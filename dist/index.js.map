{"version":3,"sources":["webpack://qcharts/webpack/universalModuleDefinition","webpack://qcharts/webpack/bootstrap","webpack://qcharts/external {\"root\":\"spritejs\",\"commonjs2\":\"spritejs/spritejs.min.js\",\"commonjs\":\"spritejs/spritejs.min.js\",\"amd\":\"spritejs\",\"umd\":\"spritejs\"}","webpack://qcharts/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/extends.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/inherits.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/createClass.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/get.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://qcharts/./node_modules/filter-clone/lib/index.js","webpack://qcharts/./node_modules/@qcharts/vnode/node_modules/@qcharts/utils/lib/index.js","webpack://qcharts/./src/base/platform.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/typeof.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/construct.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/superPropBase.js","webpack://qcharts/(webpack)/buildin/global.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://qcharts/./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack://qcharts/./node_modules/@qcharts/vnode/src/h.js","webpack://qcharts/./node_modules/@qcharts/vnode/src/consts.js","webpack://qcharts/./node_modules/@qcharts/vnode/src/diff.js","webpack://qcharts/./node_modules/@qcharts/vnode/src/render.js","webpack://qcharts/./node_modules/@qcharts/vnode/tween/easing.js","webpack://qcharts/./node_modules/@qcharts/vnode/util/interpolate.js","webpack://qcharts/./node_modules/@qcharts/vnode/util/invariant.js","webpack://qcharts/./node_modules/@qcharts/vnode/util/index.js","webpack://qcharts/./node_modules/@qcharts/vnode/tween/tween.js","webpack://qcharts/./node_modules/@qcharts/vnode/tween/index.js","webpack://qcharts/./node_modules/@qcharts/vnode/src/nodeHelper.js","webpack://qcharts/./node_modules/@qcharts/vnode/src/patch.js","webpack://qcharts/./node_modules/@qcharts/vnode/src/index.js","webpack://qcharts/./node_modules/@qcharts/dataset/src/state.js","webpack://qcharts/./node_modules/@qcharts/dataset/src/event.js","webpack://qcharts/./node_modules/@qcharts/dataset/src/Cell.js","webpack://qcharts/./node_modules/@qcharts/dataset/src/Row.js","webpack://qcharts/./node_modules/@qcharts/dataset/src/Dataset.js","webpack://qcharts/./node_modules/@qcharts/dataset/src/index.js","webpack://qcharts/./src/base/mixin.js","webpack://qcharts/./node_modules/@qcharts/utils/src/index.js","webpack://qcharts/./src/base/Base.js","webpack://qcharts/./src/theme/default.js","webpack://qcharts/./src/base/BaseVisual.js","webpack://qcharts/./src/utils/getStyle.js","webpack://qcharts/./src/utils/scaleLinear.js","webpack://qcharts/./src/utils/axis.js","webpack://qcharts/./src/visuals/Line/layout.js","webpack://qcharts/./src/utils/Point.js","webpack://qcharts/./src/visuals/Line/index.js","webpack://qcharts/./src/visuals/Pie/layout.js","webpack://qcharts/./src/visuals/Pie/index.js","webpack://qcharts/./src/visuals/Area/index.js","webpack://qcharts/./src/visuals/Radar/layout.js","webpack://qcharts/./src/visuals/Radar/index.js","webpack://qcharts/./src/visuals/Bar/layout.js","webpack://qcharts/./src/visuals/Bar/index.js","webpack://qcharts/./src/visuals/PolarBar/layout.js","webpack://qcharts/./src/visuals/PolarBar/index.js","webpack://qcharts/./src/visuals/Funnel/layout.js","webpack://qcharts/./src/visuals/Funnel/index.js","webpack://qcharts/./src/utils/color.js","webpack://qcharts/./src/visuals/Scatter/layout.js","webpack://qcharts/./src/visuals/Scatter/index.js","webpack://qcharts/./src/utils/ellipse2path.js","webpack://qcharts/./src/visuals/Wave/index.js","webpack://qcharts/./src/visuals/Gauge/index.js","webpack://qcharts/./src/visuals/RadialBar/index.js","webpack://qcharts/./src/base/BasePlugin.js","webpack://qcharts/./src/plugins/Axis/layout.js","webpack://qcharts/./src/plugins/Axis/index.js","webpack://qcharts/./src/plugins/Legend/index.js","webpack://qcharts/./src/plugins/Tooltip/index.js","webpack://qcharts/./src/Chart.js","webpack://qcharts/./src/index.js"],"names":["isWeiXin","wx","getSystemInfoSync","getGlobal","getApp","self","window","global","Error","platform","hide","hover","active","disabled","mixed","mixinEvent","target","__store","events","on","type","cb","push","off","i","length","undefined","curEvent","splice","once","listener","args","fn","apply","dispatchEvent","option","forEach","item","call","Cell","data","dataset","Object","create","state","row","col","datasets","_layoutScaleFunc","layoutScaleFunc","num","name","value","List","__name","__option","arr","cell","sta","dispatchOption","Row","Col","Array","Dataset","handleLayoutScale","layoutScale","store","__deps","__rows","getArrData","res","rowKey","indexOf","dep","method","replace","NUM","console","warn","number","isNumber","test","Number","datasetReverse","Math","pow","cols","colLen","key","sort","resArr","list","a","b","keys","curRow","m","n","lifeCycle","beforeCreate","created","beforeRender","rendered","beforeUpdate","updated","beforeDestroy","destroyed","mixin","component","addEventListener","removeEventListener","Base","attrs","emptyObject","__attrs","__vnode__","__isCreated__","__refs","layerSetting","layer","attr","__update","throttle","update","options","opts","deepObjectMerge","_","render","patches","diff","patch","bind","$el","renderAttrs","params","vnode","event","obj","animation","use","duration","useTween","easing","clientRect","left","top","right","bottom","width","height","opacity","layoutBy","val","jsType","ref","el","style","styleKey","substr","baseAttrs","defaultAttrs","theme","layerName","zIndex","scene","styles","defaultStyles","rect","canvas","getBoundingClientRect","getDistancePx","colors","chart","Node","random","toString","visuals","Line","line","lineWidth","guideline","strokeColor","point","pointType","radiusX","radiusY","borderWidth","statck","Pie","sector","Area","area","Radar","Bar","bar","textureRepeat","groupBar","text","PolarBar","Funnel","funnel","Scatter","showGuideLine","Wave","wave","fillColor","fontSize","shape","Gauge","RadialBar","plugins","Tooltip","Legend","iconSize","Axis","axis","scale","bgcolor","label","grid","lineDash","orient","set","BaseVisual","constructor","filterClone","getStyle","defaultStyle","oStyle","arrStyle","oArgs","cusStyle","includes","curStyle","oDefaultStyle","filter","Boolean","scaleLinear","domain","range","disDomain","disRange","per","isArray","dataSet","hasOwnProperty","section","sectionAxis","dataHandle","upZero","downZero","element","abs","sortUpZero","sortDownZero","maxUpZero","ceil","pop","maxDownZero","maxValue","mixNum","maxNum","splitNumber","getMax","len","max","axisArray","round","reverse","unit","unshift","stack","sum","sumDown","j","leng","layoutScaleValue","gap","divide","toFixed","layout","lines","axisGap","scales","maxVal","minVal","min","scaleFY","prevRow","points","areaPoints","smoothRange","dx","offsetX","curPos","axisPoints","curLine","ind","nextPoints","concat","map","transAreaPoint","startPoints","endPoints","allPoint","sprite","Sprite","path","Path","ellipse","Ellipse","Rect","triangle","Triangle","parallel","Parallel","regular","Regular","star","Star","Point","$sprite","renderSymbol","pos","renderAttr","remove","append","Group","renderLines","hoverIndex","getRenderData","arrLayout","maxLen","areaFrom","areaTo","from","to","renderData","sqrt","guidePoints","resetState","arrX","getOffsetPosition","x","y","curInd","posX","lineState","smooth","renderStyles","guidelineleave","guidelinemove","rows","lineClick","p","styleHover","rings","arrVal","reduce","totalVal","startAngle","endAngle","activeOffset","minAngle","maxAngle","totalAngle","curPercent","perAngle","offsetPos","curObj","prevRing","curAngle","bisectorAngle","bisectorRadian","transRadius","cos","sin","angle","PI","computeLinePos","center","radius","disRadius","centerAn","centerAngle","labelAnchor","startPoint","endPoint","labelPos","renderRings","activeIndex","pervAngle","computeLine","oldRings","radiusPx","fromPoints","fromAnchor","fromPos","toPoints","toAnchor","toPos","anchor","innerRadius","curData","innerRadiusPx","mouseleave","ring","outerRadius","_index","mousemove","getPointCoordinate","radian","indicatorMax","labelOffset","bgPoints","gridAttrs","axisAttrs","sectionAttrs","some","d","allDataValue","t","dimension","perRadian","startRadian","currentRadian","maxScale","index","categoryPoints","dataOrigin","close","gridPoints","attributes","sectionData","scaleEl","oldPos","gridType","zeroPoints","fill","preData","otherData","processSectionAttrs","otherAttrs","hoverStyle","stateStyle","getPolylineAnimation","processData","updateData","toScale","fromPts","toPts","GridShape","Arc","Polyline","getScaleAnimation","calcAnchor","color","getPt","perNum","perX","perY","labels","display","common","translate","elIndex","preEl","formatter","renderAxisLabel","renderAxisScale","allPoints","secAnimation","prePoints","isSamePoints","pre","cur","otherAttr","onMouseenter","onMouseleave","gAnimation","renderGrid","renderAxis","renderSection","renderPoints","barSize","transpose","groupGap","stackGap","barWidth","barData","groupData","textData","bgPillarAttr","valueAxis","tableSize","axisValueMax","axisValueMin","POSITIVE_RATIO","GROUP_BAR_NUM","computerLegend","GROUP_NUM","BAR_HEIGHT_FACTOR","flag","rawValue","gpData","rects","lenj","barHeight","size","rotate","paddingLeft","assign","heightSumUp","heightSumDown","stackGapTemp","posY","posLabelY","paddingAttrs","groups","isNaN","floor","bgpillarState","log","pillars","texts","fromTos","nextPillar","prev","labelAttrs","disable","nextText","dataLength","stateArray","states","bgpillar","e","onMousemove","myClick","pillar","barAttrs","textStyle","groupPadAngle","barInnerRadius","padAngle","BAR_MAX_HEIGHT","groupAngle","barAngle","id","timer","legendArr","barStyle","setTimeout","clearTimeout","groupInd","align","pyramid","polygons","widthFactory","POLYGON_NUM","polygon","colse","offset","textAnchor","counter","nextValue","plg","oldPolygons","plgStyle","hexToRgba","hex","c","substring","split","join","randomHexColor","getDataRange","getBigRange","updateSectionVal","newSection","layoutWay","textField","valueField","allData","xDomain","xSection","xIsTextData","xScales","field","yIsTextData","ySection","yScales","yDomain","newLayoutWay","xLinear","yLinear","resultData","dArry","scatterData","guideLineData","labelField","areaField","areaRange","di","temp","oldRow","cInd","getRealRadius","oldCell","fromRadius","toRadius","linear","realArea","arc","children","rowInd","colInd","scatters","ci","labelAttr","other","hStyle","renderScatter","renderGuideLine","ellipse2path","cx","cy","rx","ry","offsetR","tickId","oldAttr","amplitude","wavelength","percent","currentR","clipWave","$refs","clipPath","pathHeight","originalContentRect","perR","currentX","startY","requestAnimationFrame","lastY","waveStyle","shapeStyle","tickLine","tickLength","isInner","cX0","cY0","anchorX","anchorY","gaugeAnimations","lineCap","_useBuiltInColors","strokeBgcolor","title","tickStep","tickFormatter","total","transform","maxTickTextFontSize","fromRotate","toRotate","pointerAnimation","pointerWidth","pointerTopOffset","pointerLen","pWidth","transformOrigin","labelCenter","ticks","isStyleExist","tickText","realTitle","gradientColor","gradientOpt","vector","Gradient","tick","realSize","gPos","gSize","renderPointer","forceUpdate","v","count","tickRadius","ret","flattern","animators","cloneData","maxOuterRadius","arcOffset","perRadius","normalStyle","anticlockwise","maxRadius","maxWidth","maxHeight","BasePlugin","grids","padding","textAlign","str","distance","getItemAttrs","scaleAttr","gridAttr","curArr","nameAttr","dy","scaleF","labelPosValue","yv","xv","oldAxis","axisStyle","arrOrient","plugin","nameStyle","nameAni","ani","targetVisual","page","totalPage","perPageWidthOrHeight","paginationSize","groupSize","twiceRender","animationSwitch","posFrom","currentPos","legendStateArray","textSize","outGap","innerGap","reset","textAttrs","legendsSize","maxTextWidth","iconAttrs","iconEl","iconRect","textEl","textRect","isVertical","pagePos","afterrender","textHoverStyle","itemClick","itemLeave","itemMove","pagePrev","marginLeft","changePage","pageText","pageNext","canvasWidth","canvasHeight","isValidLayout","hLocation","numberOrPercent","parseFloat","vLocation","totalPageX","totalPageY","pagePosY","pagePosX","maxLeft","innerWidth","maxTop","innerHeight","tarTop","tarLeft","innerHTML","innerHtml","$div","document","createElement","cssText","html","appendChild","body","tipMousemove","className","Chart","container","querySelector","pixelUnit","contextType","displayRatio","windowWidth","Scene","extra","devicePixelRatio","checkUpdate","node","checkRender","child","addDep","notNeedDataSetList","Target","source","error","snapshot","toDataURL","qcharts","version","h"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,gD;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;ACPA;AACA;AACA,mBAAmB,sBAAsB;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,0B;;;;;;AClBA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;ACNA,cAAc,mBAAO,CAAC,EAAmB;;AAEzC,4BAA4B,mBAAO,CAAC,CAAyB;;AAE7D;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4C;;;;;;ACZA,qBAAqB,mBAAO,CAAC,EAAkB;;AAE/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,2B;;;;;;ACjBA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;AChBA,oBAAoB,mBAAO,CAAC,EAAiB;;AAE7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,sB;;;;;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C;AACA;AACA;AACA;;AAEA;AACA,2EAA2E;AAC3E;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4B;;;;;;AChCA;AACA;AACA;;AAEA,iC;;;;;;ACJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA,uC;;;;;;AC9BA;AACA;AACA;;AAEA,kC;;;;;;ACJA,qBAAqB,mBAAO,CAAC,CAAkB;;AAE/C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gC;;;;;;ACXA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACnBA;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA;;AAEA;AACA;AACA;;AAEA,oC;;;;;;ACVA;AACA;AACA;;AAEA,kC;;;;;;ACJA;AACA;AACA;;AAEA,oC;;;;;;ACJA;AACA;AACA;AACA;AACA;;AAEA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;AACA;;;ACTO;AACA;AACA;AACA;;;ACHmD;;AAE1D;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb;AACA;AACA;AACA;AACA;AACA,gCAAgC;;AAEhC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb;AACe;AACf;AACA,YAAY,OAAO,MAAM;AACzB;AACA;AACA,YAAY,OAAO,MAAM;AACzB;AACA;AACA,YAAY,OAAO,OAAO;AAC1B;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;;;ACxEoC;AAC7B;AACP;AACA;AACA;AACA;AACA;AACA,OAAO,oCAAoC;AAC3C;AACA;AACA,EAAE,UAAU;AACZ;AACA;AACA;AACA;AACA;;;ACfA;AACA;AACA;AACA;AACA,MAAM,aAAM;AACZ;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA,eAAe,aAAM;AACrB,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,aAAa,OAAO;AACpB,cAAc;AACd;AACA;AACA;AACA,aAAa,aAAM;AACnB;AACA,WAAW,aAAM;AACjB;AACA;;AAEe,8DAAM;;;;;;AChVkB;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,QAAQ;AACrB;AACA;;AAEA,QAAQ,QAAQ;AAChB;AACA;;AAEA;AACA,eAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,qBAAM;AACnB;AACA;;AAEA,aAAa,qBAAM;AACnB;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEe;AACf;AACA,6GAA6G,qBAAM;AACnH;;;AC5DA;AACA;AACA;AACA;AACA;AACA;;AAEY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAoB;;AAErC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qDAAqD;AACrD,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACe,4DAAS;;;AC1Ce;AACJ;;AAEnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAM,UAAK;AACX;AACA;AACA;AACA,KAAK;AACL;AAC0F;;;AC5BI;AACjE;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,YAAM,SAAS,YAAM,SAAS,YAAM;;AAErD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,GAAG;AACxB;AACA;AACA;AACA;AACA,UAAU,oBAAoB;AAC9B,SAAS;AACT;AACA,kBAAkB,qBAAqB;AACvC;AACA;;AAEA;AACA,oBAAoB,GAAG;AACvB;AACA,gBAAgB,qBAAqB;AACrC;;AAEA;AACA,QAAQ,oBAAoB;AAC5B;;AAEA;AACA,QAAQ,UAAK;AACb,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;;AAEe,+CAAK;;;ACpHS;AACF;;AAEH;;;;;;;ACHQ;AAC6B;AACvB;;AAEtC;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb;AACO;AACP;AACA;AACA;AACA,oBAAoB,8BAAe;;AAEnC,SAAS,+EAA+E;;AAExF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0BAAW;;AAEvB;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP,KAAK;AACL,UAAU,KAAK;AACf;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb;AACO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb;AACO,uCAAuC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,0BAAW;AACtD,qBAAqB,8BAAe,CAAC,0BAAW;AAChD,qBAAqB,8BAAe,CAAC,0BAAW;AAChD;AACA,WAAW,WAAW,GAAG,8BAAe,CAAC,0BAAW;AACpD;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb;AACO,uCAAuC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,GAAG;AACH;;;ACjH0D;AAClB;AAC6B;;AAE9D;AACP;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,MAAM;AACR,EAAE,QAAQ;AACV,EAAE,QAAQ;AACV;AACA,EAAE,UAAU;AACZ;;AAEA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,WAAW,EAAE;AACb;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,MAAM;AACf,aAAa,WAAW;AACxB,oBAAoB,aAAa;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,OAAO;AAChB,aAAa,WAAW;AACxB,oBAAoB,aAAa;AACjC;AACA;AACA;AACA,SAAS,MAAM;AACf;AACA;AACA;AACA,SAAS,MAAM;AACf,aAAa,kBAAkB;AAC/B;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9EmB;AACM;AACE;AACM;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJlB;AACb,aAAS,SADI;AACO;AACpBO,MAAI,EAAE,MAFO;AAEC;AACdC,OAAK,EAAE,OAHM;AAGG;AAChBC,QAAM,EAAE,QAJK;AAIK;AAClBC,UAAQ,EAAE,UALG;AAKS;AACtBC,OAAK,EAAE,OANM,CAME;;AANF,CAAf,E;;ACAA,SAASC,UAAT,CAAoBC,MAApB,EAA4B;AAC1B,MAAIA,MAAM,CAACC,OAAX,EAAoB;AAClBD,UAAM,CAACC,OAAP,CAAeC,MAAf,GAAwB,EAAxB;AACA,QAAIA,MAAM,GAAGF,MAAM,CAACC,OAAP,CAAeC,MAA5B;;AACAF,UAAM,CAACG,EAAP,GAAY,UAASC,IAAT,EAAeC,EAAf,EAAmB;AAC7BH,YAAM,CAACI,IAAP,CA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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"spritejs/spritejs.min.js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"spritejs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"qcharts\"] = factory(require(\"spritejs/spritejs.min.js\"));\n\telse\n\t\troot[\"qcharts\"] = factory(root[\"spritejs\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction filterClone(obj, include, exclude) {\n  var res = obj;\n\n  if (_typeof(obj) == 'object') {\n    if (getType(obj) === 'array') {\n      res = [];\n\n      for (var i = 0, len = obj.length; i < len; i++) {\n        res.push(filterClone(obj[i], include, exclude));\n      }\n    } else if (obj !== null) {\n      res = Object.create(null);\n\n      for (var j in obj) {\n        if (include && getType(include) === 'array' && include.length) {\n          if (include.indexOf(j) != -1) {\n            res[j] = filterClone(obj[j], include, exclude);\n          }\n        } else if (include && getType(include) === 'regexp') {\n          if (include.test(j)) {\n            res[j] = filterClone(obj[j], include, exclude);\n          }\n        } else if (include && getType(include) === 'function') {\n          if (include(j, obj[j])) {\n            res[j] = filterClone(obj[j], include, exclude);\n          }\n        } else if (exclude && getType(exclude) === 'array' && exclude.length) {\n          if (exclude.indexOf(j) === -1) {\n            res[j] = filterClone(obj[j], include, exclude);\n          }\n        } else if (exclude && getType(exclude) === 'regexp') {\n          if (!exclude.test(j)) {\n            res[j] = filterClone(obj[j], include, exclude);\n          }\n        } else if (exclude && getType(exclude) === 'function') {\n          if (!exclude(j, obj[j])) {\n            res[j] = filterClone(obj[j], include, exclude);\n          }\n        } else {\n          res[j] = filterClone(obj[j], include, exclude);\n        }\n      }\n    }\n  }\n\n  return res;\n\n  function getType(value) {\n    var str = _typeof(value);\n\n    if (str === 'object') {\n      return value === null ? null : Object.prototype.toString.call(value).slice(8, -1).toLowerCase();\n    }\n\n    return str;\n  }\n}\n\nvar _default = filterClone;\nexports[\"default\"] = _default;\n//# sourceMappingURL=index.js.map","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.utils=e():t.utils=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=0)}([function(t,e,n){\"use strict\";function r(...t){let e=t[0];if(t.length>1)for(let r=1;r<t.length;r++)n(e,t[r]);return e;function n(t,e){for(var n in e)t[n]=t[n]&&\"[object Object]\"===t[n].toString()?r(t[n],e[n]):t[n]=e[n];return t}}function o(){return Object.create(null)}function u(t){const e=typeof t;return\"object\"===e?null===t?null:Object.prototype.toString.call(t).slice(8,-1).toLowerCase():e}function i(t,e=16,n=!1){let r=null,o=n;return function(...n){if(o)return t.apply(this,n),o=!1;r||(r=setTimeout(()=>{clearTimeout(r),r=null,t.apply(this,n)},e))}}function c(t,e){return\"string\"===u(t)&&t.match(/%$/)?Number(t.substring(0,t.indexOf(\"%\")))/100*e:t}n.r(e),n.d(e,\"deepObjectMerge\",(function(){return r})),n.d(e,\"emptyObject\",(function(){return o})),n.d(e,\"jsType\",(function(){return u})),n.d(e,\"throttle\",(function(){return i})),n.d(e,\"getDistancePx\",(function(){return c}))}])}));\n//# sourceMappingURL=index.js.map","export const isWeiXin = () => {\r\n  return typeof wx !== 'undefined' && typeof wx.getSystemInfoSync === 'function'\r\n}\r\n\r\nexport const getGlobal = () => {\r\n  if (isWeiXin()) return getApp()\r\n  if (typeof self !== 'undefined') return self\r\n  if (typeof window !== 'undefined') return window\r\n  if (typeof global !== 'undefined') return global\r\n  throw new Error(`unable to locate global object`)\r\n}\r\n\r\nexport const platform = getGlobal()\r\n","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","const VNode = function VNode() {}\nconst flattern = arr => [].concat.apply([], arr)\n\nexport default function h(tagName, attrs, ...children) {\n  const node = new VNode()\n  node.tagName = tagName\n  node.attrs = attrs || {}\n  node.children = flattern(children).filter(Boolean)\n  return node\n}\n","export const CREATE = 'CREATE'\nexport const REPLACE = 'REPLACE'\nexport const UPDATE = 'UPDATE'\nexport const REMOVE = 'REMOVE'\n","import { CREATE, REPLACE, UPDATE, REMOVE } from './consts'\n\nconst isNull = obj => obj === undefined || obj === null\n\nconst diffVNodeChildren = (oldVNode, newVNode) => {\n  const patches = []\n  // 新旧节点的子节点长度可能不一样，但是进行比对的次数应当为最长子节点数目\n  const len = Math.max(oldVNode.children.length, newVNode.children.length)\n  for (let i = 0; i < len; i++) {\n    // 注意：这里不使用 patches.push ，是为了保持 子节点 在整个节点树的位置是不变的\n    patches[i] = diff(oldVNode.children[i], newVNode.children[i])\n  }\n  return patches\n}\n\n/**\n * 比对节点属性\n * 首先合并新旧节点属性\n * 新节点没有的属性，则移除属性\n * 新旧节点属性不一致，则设置属性\n * @param {*} oldVNode\n * @param {*} newVNode\n */\nconst diffVNodeAttrs = (oldVNode, newVNode) => {\n  let patches = []\n  const oldVNodeAttrs = oldVNode.attrs\n  const newVNodeAttrs = newVNode.attrs\n  const attrs = Object.assign({}, oldVNodeAttrs, newVNodeAttrs)\n\n  patches = attrs\n\n  return patches\n}\n\n/**\n * 判断两节点是否不一样\n * 1. 旧节点为文本节点，新节点不是\n * 2. 新节点为文本节点，旧节点不是\n * 3. 新旧节点标签名不一样\n * @param {*} oldVNode\n * @param {*} newVNode\n */\nconst isDiffrentVNode = (oldVNode, newVNode) => {\n  return (typeof oldVNode !== 'object' && oldVNode !== newVNode) || (typeof newVNode !== 'object' && oldVNode !== newVNode) || oldVNode.tagName !== newVNode.tagName\n}\n\n/**\n * diff 新旧节点差异\n * case CREATE: 旧节点不存在，则应当新建新节点\n * case REMOVE: 新节点不存在，则移出旧节点\n * case REPLACE: 只比较新旧节点，不比较其子元素，新旧节点标签名或文本内容不一致，则应当替换旧节点\n * case UPDATE: 到这里，新旧节点可能只剩下 attrs 和 子节点未进行 diff，所以直接循环 diffAttrs 和 diffChildren 即可\n * @param {*} oldVNode\n * @param {*} newVNode\n */\nexport default function diff(oldVNode, newVNode) {\n  if (isNull(oldVNode)) {\n    return { type: CREATE, newVNode }\n  }\n  if (isNull(newVNode)) {\n    return { type: REMOVE }\n  }\n  if (isDiffrentVNode(oldVNode, newVNode)) {\n    return { type: REPLACE, newVNode }\n  }\n  if (newVNode.tagName) {\n    return {\n      type: UPDATE,\n      children: diffVNodeChildren(oldVNode, newVNode),\n      attrs: diffVNodeAttrs(oldVNode, newVNode)\n    }\n  }\n}\n","import { patchAttrs } from './patch'\nexport function createElement(vnode) {\n  if (!vnode) {\n    return\n  }\n  //当前图形通过绑定this传递进来\n  let graph = this\n  let { tagName: TagName, attrs, children } = vnode\n  const el = new TagName(attrs)\n  //渲染的spritejs对象放到 visual或者plugin上\n  patchAttrs(graph, el, attrs)\n  if (el.appendChild) {\n    children.map(createElement.bind(this)).filter(Boolean).forEach(el.appendChild.bind(el))\n  }\n  return el\n}\n","/**\n * 缓动代码来自 https://github.com/sole/tween.js/blob/master/src/Tween.js\n * @see http://sole.github.io/tween.js/examples/03_graphs.html\n */\nconst easing = {\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  linear: function(k) {\n    return k\n  },\n\n  quadIn(k) {\n    return k * k\n  },\n\n  quadOut(k) {\n    return k * (2 - k)\n  },\n\n  quadInOut(k) {\n    return ((k *= 2) <= 1 ? k * k : --k * (2 - k) + 1) / 2\n  },\n\n  // 三次方的缓动（t^3）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  cubicIn: function(k) {\n    return k * k * k\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  cubicOut: function(k) {\n    return --k * k * k + 1\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  cubicInOut: function(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k\n    }\n    return 0.5 * ((k -= 2) * k * k + 2)\n  },\n\n  // 四次方的缓动（t^4）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quarticIn: function(k) {\n    return k * k * k * k\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quarticOut: function(k) {\n    return 1 - --k * k * k * k\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quarticInOut: function(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k\n    }\n    return -0.5 * ((k -= 2) * k * k * k - 2)\n  },\n\n  // 五次方的缓动（t^5）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quinticIn: function(k) {\n    return k * k * k * k * k\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quinticOut: function(k) {\n    return --k * k * k * k * k + 1\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  quinticInOut: function(k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k * k\n    }\n    return 0.5 * ((k -= 2) * k * k * k * k + 2)\n  },\n\n  // 正弦曲线的缓动（sin(t)）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  sinusoidalIn: function(k) {\n    return 1 - Math.cos((k * Math.PI) / 2)\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  sinusoidalOut: function(k) {\n    return Math.sin((k * Math.PI) / 2)\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  sinusoidalInOut: function(k) {\n    return 0.5 * (1 - Math.cos(Math.PI * k))\n  },\n\n  // 指数曲线的缓动（2^t）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  exponentialIn: function(k) {\n    return k === 0 ? 0 : Math.pow(1024, k - 1)\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  exponentialOut: function(k) {\n    return k === 1 ? 1 : 1 - Math.pow(2, -10 * k)\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  exponentialInOut: function(k) {\n    if (k === 0) {\n      return 0\n    }\n    if (k === 1) {\n      return 1\n    }\n    if ((k *= 2) < 1) {\n      return 0.5 * Math.pow(1024, k - 1)\n    }\n    return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2)\n  },\n\n  // 圆形曲线的缓动（sqrt(1-t^2)）\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  circularIn: function(k) {\n    return 1 - Math.sqrt(1 - k * k)\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  circularOut: function(k) {\n    return Math.sqrt(1 - --k * k)\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  circularInOut: function(k) {\n    if ((k *= 2) < 1) {\n      return -0.5 * (Math.sqrt(1 - k * k) - 1)\n    }\n    return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1)\n  },\n\n  // 创建类似于弹簧在停止前来回振荡的动画\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  elasticIn: function(k) {\n    var s\n    var a = 0.1\n    var p = 0.4\n    if (k === 0) {\n      return 0\n    }\n    if (k === 1) {\n      return 1\n    }\n    if (!a || a < 1) {\n      a = 1\n      s = p / 4\n    } else {\n      s = (p * Math.asin(1 / a)) / (2 * Math.PI)\n    }\n    return -(\n      a *\n      Math.pow(2, 10 * (k -= 1)) *\n      Math.sin(((k - s) * (2 * Math.PI)) / p)\n    )\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  elasticOut: function(k) {\n    var s\n    var a = 0.1\n    var p = 0.4\n    if (k === 0) {\n      return 0\n    }\n    if (k === 1) {\n      return 1\n    }\n    if (!a || a < 1) {\n      a = 1\n      s = p / 4\n    } else {\n      s = (p * Math.asin(1 / a)) / (2 * Math.PI)\n    }\n    return (\n      a * Math.pow(2, -10 * k) * Math.sin(((k - s) * (2 * Math.PI)) / p) + 1\n    )\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  elasticInOut: function(k) {\n    var s\n    var a = 0.1\n    var p = 0.4\n    if (k === 0) {\n      return 0\n    }\n    if (k === 1) {\n      return 1\n    }\n    if (!a || a < 1) {\n      a = 1\n      s = p / 4\n    } else {\n      s = (p * Math.asin(1 / a)) / (2 * Math.PI)\n    }\n    if ((k *= 2) < 1) {\n      return (\n        -0.5 *\n        (a *\n          Math.pow(2, 10 * (k -= 1)) *\n          Math.sin(((k - s) * (2 * Math.PI)) / p))\n      )\n    }\n    return (\n      a *\n        Math.pow(2, -10 * (k -= 1)) *\n        Math.sin(((k - s) * (2 * Math.PI)) / p) *\n        0.5 +\n      1\n    )\n  },\n\n  // 在某一动画开始沿指示的路径进行动画处理前稍稍收回该动画的移动\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  backIn: function(k) {\n    var s = 1.70158\n    return k * k * ((s + 1) * k - s)\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  backOut: function(k) {\n    var s = 1.70158\n    return --k * k * ((s + 1) * k + s) + 1\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  backInOut: function(k) {\n    var s = 1.70158 * 1.525\n    if ((k *= 2) < 1) {\n      return 0.5 * (k * k * ((s + 1) * k - s))\n    }\n    return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2)\n  },\n\n  // 创建弹跳效果\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  bounceIn: function(k) {\n    return 1 - easing.bounceOut(1 - k)\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  bounceOut: function(k) {\n    if (k < 1 / 2.75) {\n      return 7.5625 * k * k\n    } else if (k < 2 / 2.75) {\n      return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75\n    } else if (k < 2.5 / 2.75) {\n      return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375\n    } else {\n      return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375\n    }\n  },\n  /**\n   * @param {number} k\n   * @return {number}\n   */\n  bounceInOut: function(k) {\n    if (k < 0.5) {\n      return easing.bounceIn(k * 2) * 0.5\n    }\n    return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5\n  }\n}\n\nexport default easing\n","import { jsType } from '@qcharts/utils'\n\nconst constant = x => () => x\nconst number = (a, b) => t => a + (b - a) * t\nconst array = (a, b) => {\n  const bl = b ? b.length : 0\n  const al = a ? Math.min(bl, a.length) : 0\n  const x = new Array(al)\n  const c = new Array(bl)\n  let i\n\n  for (i = 0; i < al; ++i) {\n    x[i] = interpolate(a[i], b[i])\n  }\n\n  for (; i < bl; ++i) {\n    c[i] = b[i]\n  }\n\n  return t => {\n    for (i = 0; i < al; ++i) {\n      c[i] = x[i](t)\n    }\n\n    return c\n  }\n}\nconst object = (a, b) => {\n  let i = {}\n  let c = {}\n  let k\n\n  if (!a || !jsType(a) === 'object') {\n    a = {}\n  }\n\n  if (!b || !jsType(b) === 'object') {\n    b = {}\n  }\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = interpolate(a[k], b[k])\n    } else {\n      c[k] = b[k]\n    }\n  }\n\n  return t => {\n    for (k in i) {\n      c[k] = i[k](t)\n    }\n\n    return c\n  }\n}\n\nexport default function interpolate(a, b) {\n  let type = typeof b\n  return b === null || type === 'string' || type === 'boolean' ? constant(b) : (type === 'number' ? number : jsType(b) === 'array' ? array : object)(a, b)\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict'\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nconst NODE_ENV = process.env.NODE_ENV\n\nfunction invariant(condition, message) {\n  if (NODE_ENV !== 'production') {\n    if (message === undefined) {\n      throw new Error('invariant requires an error message argument')\n    }\n  }\n\n  if (!condition) {\n    var error\n    if (message === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.')\n    } else {\n      error = new Error(message)\n      error.name = 'Qcharts Error'\n    }\n\n    error.framesToPop = 1 // we don't care about invariant's own frame\n    throw error\n  }\n}\nexport default invariant\n","import interpolate from './interpolate'\nimport invariant from './invariant'\n\nfunction now() {\n  return typeof performance !== 'undefined' ? performance.now() : Date.now()\n}\n\nlet requestAnimationFrame, cancelAnimationFrame\nif (typeof window !== 'undefined' && typeof window.requestAnimationFrame === 'function') {\n  requestAnimationFrame = window.requestAnimationFrame\n  cancelAnimationFrame = window.cancelAnimationFrame\n} else {\n  const startTime = now()\n  requestAnimationFrame = (fn) => {\n    return setTimeout(() => {\n      fn(now() - startTime)\n    }, 16)\n  }\n  cancelAnimationFrame = (id) => {\n    return clearTimeout(id)\n  }\n}\nconst delay = (time) =>\n  new Promise((resolve) =>\n    setTimeout(() => {\n      resolve()\n    }, time)\n  )\nexport { now, interpolate, invariant, requestAnimationFrame, cancelAnimationFrame, delay }\n","import { interpolate, delay, now, requestAnimationFrame, cancelAnimationFrame } from '../util'\nimport easing from './easing'\nfunction Tween(name = 'linear') {\n  this._start = null\n  this._end = null\n  this._delay = 0\n\n  this._canceled = false\n  this._duration = 1\n  this._easing = easing[name] ? easing[name] : easing.linear\n\n  this._onUpdate = () => {}\n  this._onStart = () => {}\n\n  return this\n}\n\nTween.prototype = {\n  from(val) {\n    this._start = val\n    return this\n  },\n\n  to(val) {\n    this._end = val\n    return this\n  },\n\n  duration(time) {\n    if (typeof time !== 'number') {\n      throw new Error('Duration time must be a number')\n    }\n    this._duration = time\n    return this\n  },\n\n  delay(time) {\n    this._delay = time\n    return this\n  },\n\n  easing(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error('easing function must be a function')\n    }\n    this._easing = fn\n    return this\n  },\n\n  onStart(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error('start callback must be a function')\n    }\n    this._onStart = fn\n    return this\n  },\n\n  onUpdate(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error('update callback must be a function')\n    }\n    this._onUpdate = fn\n    return this\n  },\n\n  onComplete(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error('complete callback must be a function')\n    }\n    this._onComplete = fn\n    return this\n  },\n  start() {\n    // const dt = 16.7 // 每一帧 16.7 ms\n    const e = this._easing\n    const i = interpolate(this._start, this._end)\n    const callback = this._onUpdate\n    let elapseTime = 0 // 已消耗时长\n    let animateTime = this._duration\n    let timer = null\n    let delayTime = this._delay\n    let startTime = 0\n\n    return new Promise(resolve => {\n      const step = () => {\n        elapseTime = now() - startTime\n        const t = e(Math.min(1.0, elapseTime / animateTime))\n        if (elapseTime >= animateTime) {\n          callback(i(1))\n          resolve(this)\n          cancelAnimationFrame(timer)\n        } else {\n          callback(i(t))\n          timer = requestAnimationFrame(step)\n        }\n      }\n\n      const start = () => {\n        startTime = now()\n        this._onStart(this._start, this._end)\n        timer = requestAnimationFrame(step)\n      }\n\n      this.cancel = () => {\n        cancelAnimationFrame(timer)\n      }\n\n      if (delayTime && delayTime > 0) {\n        delay(delayTime).then(start)\n      } else {\n        start()\n      }\n    })\n  }\n}\n\nexport default Tween\n","import easing from './easing'\nimport Tween from './tween'\n\nexport { Tween, easing }\n","import { Tween } from '../tween'\nimport { deepObjectMerge, emptyObject } from '@qcharts/utils'\nimport filterClone from 'filter-clone'\n\n/**\n * 为 spritejs 元素添加动画\n * @param {*} el\n * @param {*} attrs\n */\nexport function addAnimate(graph, el, attrs) {\n  if (!el || !attrs.animation) {\n    return\n  }\n  const animation = deepObjectMerge(graph.renderAttrs.animation, attrs.animation)\n\n  const { from, middle, use, to, delay, duration, useTween, easing, formatter = d => d } = animation\n\n  if (!from || !to || !use) {\n    return\n  }\n  if (from) {\n    //如果存在from，一开始就设置，防止出现抖动\n    el.attr(from)\n  }\n  let ani = filterClone(animation, null, ['from', 'to', 'formatter', 'use'])\n\n  const setAnimation = () => {\n    if (!useTween) {\n      let keys = null\n      if (middle) {\n        keys = [from, middle, to]\n      } else {\n        keys = [from, to]\n      }\n      el.animate(keys, {\n        fill: 'both',\n        ...ani\n      }).finished.then(() => {\n        delete to.offset\n        el.attr(to)\n      })\n    } else {\n      new Tween(easing)\n        .from(from)\n        .to(to)\n        .delay(delay)\n        .duration(duration)\n        .onUpdate(attr => {\n          el.attr(formatter(attr))\n        })\n        .start()\n    }\n  }\n  setAnimation()\n}\n\n/**\n * ref 回调函数\n * @param {*} el\n * @param {*} attrs\n */\nexport function addRef(graph, el, attrs) {\n  const ref = attrs.ref\n  delete attrs.ref\n  if (ref && el) {\n    try {\n      graph.addRef(ref, el)\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\n/**\n * 为 spritejs 元素添加事件\n * @param {*} el\n * @param {*} attrs\n */\nexport function addAttrs(graph, el, attrs = {}) {\n  let states = attrs['states']\n  let state = attrs['state']\n  if (states && state) {\n    let oldState = el.attr('state')\n    if (state !== oldState) {\n      //不相当就处理，相当上一次已经处理完毕\n      let oldstates = el.attr('states') || emptyObject()\n      let oldAttrs = deepObjectMerge(emptyObject(), attrs, oldstates[oldState])\n      let newAttrs = deepObjectMerge(emptyObject(), attrs, states[state])\n      el.attr(oldAttrs)\n      let { duration } = deepObjectMerge(emptyObject(), graph.renderAttrs.animation, states.animation)\n      el.transition(duration / 1000).attr(newAttrs)\n    }\n  } else {\n    el.attr(attrs)\n  }\n}\n/**\n * 为 spritejs 元素添加事件\n * @param {*} el\n * @param {*} attrs\n */\nexport function addEvent(graph, el, attrs = {}) {\n  //缓存方法，修改方法指针this\n  Object.keys(attrs).forEach(key => {\n    if (!/^on/.test(key)) {\n      return\n    }\n    const type = key.split('on')[1].toLowerCase()\n    const cb = attrs[key] || (() => {})\n    let newF = evt => cb.call(graph, evt, el)\n    el.removeAllListeners(type)\n    el.addEventListener(type, newF)\n    delete attrs[key]\n  })\n}\n","import { CREATE, REPLACE, UPDATE, REMOVE } from './consts'\nimport { createElement } from './render'\nimport { addEvent, addAttrs, addAnimate, addRef } from './nodeHelper'\n\nexport function patchAttrs(graph, el, patche) {\n  if (!el) {\n    return\n  }\n  if (!Object.keys(patche).length) {\n    return\n  }\n  addRef(graph, el, patche)\n  addEvent(graph, el, patche)\n  addAttrs(graph, el, patche)\n  //el.attr(patche)\n  addAnimate(graph, el, patche)\n}\n\n/**\n * @param {*} $el 当前的真实spritejs 节点\n * @param {*} patches 虚拟节点\n * @param {*} isRoot 是否是初节点，用于绑定$el与visual或者plugin\n */\nexport default function patch($el, patche, isRoot = 0) {\n  //core中调用patch的时候，base中处理绑定this到当前图表\n  let graph = this //graph为当前的qcharts对象 visula或者plugin\n  if (!$el && !patche) {\n    return\n  }\n  switch (patche.type) {\n    case CREATE: {\n      const { newVNode } = patche\n      const newEl = createElement.bind(graph)(newVNode)\n      if (newEl) {\n        if (isRoot) {\n          //创建的时候，visual与plugin绑定对应的sprite元素\n          graph.$el = newEl\n        }\n        $el.appendChild(newEl)\n      }\n      break\n    }\n    case REPLACE: {\n      const { newVNode } = patche\n      const newEl = createElement.bind(graph)(newVNode)\n      $el.parent.replaceChild(newEl, $el)\n      break\n    }\n    case REMOVE: {\n      $el.remove()\n      break\n    }\n    case UPDATE: {\n      const { attrs, children } = patche\n      //对应的dom与vnode打上对应的ind，防止remove与create的时候变动i\n      patchAttrs(graph, $el, attrs)\n      if ($el.children && children.length) {\n        $el.children.forEach((child, ind) => {\n          child._ind = ind\n        })\n        children.forEach((child, ind) => {\n          child._ind = ind\n        })\n        let len = children.length > $el.children.length ? children.length : $el.children.length\n        for (let j = 0; j < len; j++) {\n          let curNode = $el.children.filter(child => child._ind === j)[0]\n          let curVnode = children.filter(child => child._ind === j)[0]\n          if (curVnode && curVnode.type === 'CREATE') {\n            //如果是create需要传父级$el\n            patch.bind(graph)($el, curVnode)\n          } else {\n            patch.bind(graph)(curNode, curVnode)\n          }\n        }\n      }\n      break\n    }\n  }\n}\n","import h from './h'\nimport diff from './diff'\nimport patch from './patch'\nimport { easing } from '../tween'\nexport { h, diff, patch, easing }\n","export default {\n  default: 'default', //默认\n  hide: 'hide', //数据隐藏\n  hover: 'hover', //次激活模式，类似css中的hover\n  active: 'active', //激活模式，如选中等场景\n  disabled: 'disabled', //禁用模式\n  mixed: 'mixed' //混合模式,比如一个row或者col里面有多种状态\n}\n","function mixinEvent(target) {\n  if (target.__store) {\n    target.__store.events = []\n    let events = target.__store.events\n    target.on = function(type, cb) {\n      events.push({ type, cb })\n      return target\n    }\n    target.off = function(type, cb) {\n      for (let i = 0; i < events.length; i++) {\n        if (cb === undefined) {\n          events = []\n        } else {\n          let curEvent = events[i]\n          if (curEvent.type === type && curEvent.cb === cb) {\n            events.splice(i, 1)\n            i--\n          }\n        }\n      }\n      return target\n    }\n    target.once = function(type, cb) {\n      const listener = function(...args) {\n        fn.apply(target, args)\n        self.off(type, cb)\n      }\n      return target.on(type, listener)\n    }\n    target.dispatchEvent = function(type, option) {\n      events.forEach(item => {\n        if (item.type === type) {\n          item.cb.call(target, { type, option })\n        }\n      })\n      return target\n    }\n  }\n}\nexport { mixinEvent }\n","import state from \"./state\";\nimport { mixinEvent } from \"./event\";\nclass Cell extends Object {\n  constructor(data, option, dataset) {\n    super();\n    this.__store = Object.create(null);\n    this.__store.state = state[\"default\"];\n    this.__store.row = undefined;\n    this.__store.col = undefined;\n    this.__store.option = option;\n    this.__store.data = data;\n    this.__store.datasets = [dataset];\n    this._layoutScaleFunc = dataset.layoutScaleFunc;\n    mixinEvent(this);\n  }\n  get datasets() {\n    return this.__store.datasets;\n  }\n  get data() {\n    return this, this.__store.data;\n  }\n  get value() {\n    return this.__store.data[this.__store.option[\"value\"]];\n  }\n  get layoutScaleValue() {\n    return typeof this._layoutScaleFunc === \"function\"\n      ? this._layoutScaleFunc(this.__store.data[this.__store.option[\"value\"]])\n      : this.__store.data[this.__store.option[\"value\"]];\n  }\n  get text() {\n    return this.__store.data[this.__store.option[\"text\"]];\n  }\n  set row(num) {\n    if (this.__store.row === undefined) {\n      this.__store.row = num;\n    }\n  }\n  get row() {\n    return this.__store.row;\n  }\n  set col(num) {\n    if (this.__store.col === undefined) {\n      this.__store.col = num;\n    }\n  }\n  get col() {\n    return this.__store.col;\n  }\n  get option() {\n    return this.__store.option;\n  }\n  get state() {\n    return this.__store.state;\n  }\n  set state(name) {\n    if (state[name] && this.__store.state !== state[name]) {\n      this.__store.state = state[name];\n      this.dispatchEvent(\"change\", {\n        name: \"cell\",\n        value: state[name],\n        data: this,\n      });\n      this.datasets.forEach((dataset) => {\n        dataset.dispatchEvent(\"change\", {\n          name: \"cell\",\n          value: state[name],\n          data: this,\n        });\n      });\n    }\n  }\n}\nexport default Cell;\n","import { mixinEvent } from './event'\nimport state from './state'\nclass List extends Array {\n  constructor(name, option) {\n    super()\n    this.__store = Object.create(null)\n    this.__store.__name = name\n    this.__store.__option = option\n    this.__store.dataset = null\n    mixinEvent(this)\n  }\n  get data() {\n    let arr = []\n    this.forEach(cell => {\n      arr.push(cell.data)\n    })\n    return arr\n  }\n  set dataset(arr) {\n    this.__store.dataset = arr\n  }\n  get dataset() {\n    return this.__store.dataset\n  }\n  get name() {\n    return this.__store.__name\n  }\n  get option() {\n    return this.__store.__option\n  }\n  get state() {\n    //遍历子项，查看状态是否统一\n    let sta = this[0].state\n    for (let i = 1; i < this.length; i++) {\n      if (this[i].state !== sta) {\n        sta = 'mixed'\n        break\n      }\n    }\n    return sta\n  }\n  set state(name) {\n    if (state[name] && this.state !== state[name]) {\n      //给所有子项设置state\n      this.forEach(cell => {\n        //如果disabled的状态，必须先设置位default,disabled的state不能直接修改位其它状态\n        if (cell.state === 'disabled' && name !== 'default') {\n          return\n        }\n        cell.state = state[name]\n      })\n      let dispatchOption = null\n      if (this instanceof Row) {\n        dispatchOption = { name: 'row', value: state[name], data: this }\n      } else if (this instanceof Col) {\n        dispatchOption = { name: 'col', value: state[name], data: this }\n      }\n      this.dispatchEvent('change', dispatchOption)\n      this.dataset && this.dataset.dispatchEvent('change', dispatchOption)\n    }\n  }\n}\nclass Row extends List {}\nclass Col extends List {}\nexport { Row, Col }\n","import Cell from './Cell'\nimport { Row, Col } from './Row'\nimport { mixinEvent } from './event'\nclass Dataset extends Array {\n  constructor(data, option) {\n    super()\n    this.layoutScaleFunc = this.handleLayoutScale(option.layoutScale)\n    data.forEach((item, i) => {\n      let cell = item\n      if (!(item instanceof Cell)) {\n        cell = new Cell(item, option, this)\n      } else {\n        cell.datasets.push(this)\n      }\n      this[i] = cell\n    })\n    this.__store = Object.create(null)\n    let store = this.__store\n    store.__option = option\n    store.__deps = []\n    store.__rows = []\n    store.__rows = getArrData(this, option)\n    mixinEvent(this)\n  }\n  get option() {\n    return this.__store.__option\n  }\n  get cols() {\n    let cols = []\n    let colLen = 0\n    this.__store.__rows.forEach(row => {\n      if (row.length > colLen) {\n        colLen = row.length\n      }\n    })\n    for (let i = 0; i < colLen; i++) {\n      let arr = new Col()\n      arr.dataset = this\n      this.__store.__rows.forEach(item => {\n        arr.push(item[i])\n      })\n      cols.push(arr)\n    }\n    return cols\n  }\n  get rows() {\n    return this.__store.__rows\n  }\n  resetState(state = 'default') {\n    let res = []\n    this.forEach(cell => {\n      //reset的时候不处理disabled\n      if (cell.state !== state && cell.state !== 'disabled') {\n        res.push(cell)\n        cell.state = state\n      }\n    })\n    this.dispatchEvent('change', { name: 'reset', data: res })\n  }\n  selectRows(name) {\n    let rowKey = this.option.row\n    let arr = []\n    this.forEach(item => {\n      if (name.indexOf(item.data[rowKey]) !== -1) {\n        arr.push(item)\n      }\n    })\n    return new Dataset(arr, this.option)\n  }\n  addDep(dep) {\n    this.__store.__deps.push(dep)\n  }\n  handleLayoutScale(layoutScale) {\n    if (typeof layoutScale === 'string') {\n      let method = layoutScale.replace(/\\d+$/, '')\n      let NUM = 2\n      if (method !== 'sqrt' && method !== 'pow' && method !== 'log') {\n        console.warn('layoutScale type error')\n        return function (value) {\n          return value\n        }\n      }\n\n      let number = layoutScale.replace(/^[a-z]+/, '')\n      if (number) {\n        let isNumber = /^[-+]?\\d*$/.test(number)\n        if (!isNumber) {\n          console.warn('layoutScale type error')\n          return function (value) {\n            return value\n          }\n        } else {\n          NUM = Number(number)\n        }\n      }\n\n      switch (method) {\n        case 'sqrt':\n          this.datasetReverse = function (value) {\n            return Math.pow(value, NUM)\n          }\n          return function (value) {\n            return Math.pow(value, 1 / NUM)\n          }\n        case 'pow':\n          this.datasetReverse = function (value) {\n            return Math.pow(value, 1 / NUM)\n          }\n          return function (value) {\n            return Math.pow(value, NUM)\n          }\n        case 'log':\n          if (NUM !== 2 && NUM !== 10) {\n            console.warn('layoutScale type error')\n            return function (value) {\n              return value\n            }\n          }\n          this.datasetReverse = function (value) {\n            return Math.pow(NUM, value)\n          }\n          return function (value) {\n            return Math['log' + NUM](value)\n          }\n        default:\n          console.warn('layoutScale type error')\n          return function (value) {\n            return value\n          }\n      }\n    }\n    return layoutScale\n  }\n}\nfunction getArrData(data = [], option) {\n  let { row: key, sort } = option\n  let resArr = []\n  if (key === '*') {\n    let list = new Row('*', option)\n    data.forEach(item => {\n      list.push(item)\n    })\n    if (sort) {\n      list.sort((a, b) => sort(a.data, b.data))\n    }\n    resArr.push(list)\n  } else {\n    let keys = Object.create(null)\n    data.forEach(item => {\n      let data = item.__store.data\n      if (!keys[data[key]]) {\n        keys[data[key]] = new Row(data[key], option)\n      }\n      keys[data[key]].push(item)\n    })\n    for (let key in keys) {\n      let curRow = keys[key]\n      if (sort) {\n        curRow.sort((a, b) => sort(a.data, b.data))\n      }\n      resArr.push(curRow)\n    }\n  }\n  resArr.forEach((list, m) => {\n    list.dataset = data\n    list.forEach((cell, n) => {\n      cell.row = m\n      cell.col = n\n    })\n  })\n  return resArr\n}\n\nexport default Dataset\n","import Dataset from './Dataset'\nexport default Dataset\n","const lifeCycle = {\r\n  beforeCreate: 'beforeCreate', //创建前\r\n  created: 'created', // 图表创建\r\n  beforeRender: 'beforeRender', //图表渲染前\r\n  rendered: 'rendered', // 图表渲染结束\r\n  beforeUpdate: 'beforeUpdate', // 图表更新前\r\n  updated: 'updated', // 图表更新\r\n  beforeDestroy: 'beforeDestroy', // 图表卸载前\r\n  destroyed: 'destroyed' // 图表卸载\r\n}\r\nfunction mixin(component) {\r\n  component.on = component.addEventListener\r\n  component.off = component.removeEventListener\r\n  component.once = function(type, fn) {\r\n    const listener = (...args) => {\r\n      fn.apply(this, args)\r\n      this.off(type, listener)\r\n    }\r\n    return this.on(type, listener)\r\n  }\r\n}\r\n\r\nexport { lifeCycle, mixin }\r\n","function deepObjectMerge(...args) {\n  // 深度合并对象\n  let res = args[0]\n  if (args.length > 1) {\n    for (let i = 1; i < args.length; i++) {\n      objectMerge(res, args[i])\n    }\n  }\n  return res\n  function objectMerge(FirstOBJ, SecondOBJ) {\n    for (var key in SecondOBJ) {\n      if (FirstOBJ[key] && jsType(FirstOBJ[key]) === 'object' && jsType(SecondOBJ[key]) === 'object') {\n        //对象处理\n        deepObjectMerge(FirstOBJ[key], SecondOBJ[key])\n      } else if (FirstOBJ[key] && jsType(FirstOBJ[key]) === 'array' && jsType(SecondOBJ[key]) === 'array') {\n        //数组处理\n        FirstOBJ[key].splice(0, FirstOBJ[key].length, ...SecondOBJ[key])\n      } else {\n        FirstOBJ[key] = SecondOBJ[key]\n      }\n    }\n    return FirstOBJ\n  }\n}\n\nfunction emptyObject() {\n  //创建空对象\n  return Object.create(null)\n}\n\nfunction jsType(value) {\n  //判断js数据类型\n  const str = typeof value\n  if (str === 'object') {\n    return value === null ? null : Object.prototype.toString.call(value).slice(8, -1).toLowerCase()\n  }\n  return str\n}\n\nfunction throttle(fn, interval = 16, immediately = false) {\n  //截流函数\n  let timer = null\n  let firstTime = immediately\n  return function (...args) {\n    if (firstTime) {\n      // 第一次加载\n      fn.apply(this, args)\n      return (firstTime = false)\n    }\n    if (timer) {\n      // 定时器正在执行中，跳过\n      return\n    }\n    timer = setTimeout(() => {\n      clearTimeout(timer)\n      timer = null\n      fn.apply(this, args)\n    }, interval)\n  }\n}\nfunction debounce(fn, delay = 16, immediately = false) {\n  let timer = null\n  return function () {\n    let args = arguments\n    let context = this\n    if (timer) {\n      clearTimeout(timer)\n      timer = setTimeout(function () {\n        fn.apply(context, args)\n      }, delay)\n    } else {\n      if (immediately) {\n        fn.apply(context, args)\n      }\n      timer = setTimeout(function () {\n        fn.apply(context, args)\n      }, delay)\n    }\n  }\n}\nfunction getDistancePx(num, distance) {\n  if (jsType(num) === 'string' && num.match(/%$/)) {\n    return (Number(num.substring(0, num.indexOf('%'))) / 100) * distance\n  }\n  return num\n}\nexport { deepObjectMerge, emptyObject, jsType, throttle, debounce, getDistancePx }\n","import { Node } from 'spritejs'\r\nimport { lifeCycle, mixin } from './mixin'\r\nimport { emptyObject, deepObjectMerge, jsType, getDistancePx, throttle } from '@qcharts/utils'\r\nimport { patch, diff } from '@qcharts/vnode'\r\nimport Dataset from '@qcharts/dataset'\r\nimport { isWeiXin } from './platform'\r\nclass Base extends Node {\r\n  constructor(attrs) {\r\n    super()\r\n    this.dispatchEvent(lifeCycle.beforeCreate)\r\n    mixin(this)\r\n    this['__store'] = emptyObject()\r\n    let store = this['__store']\r\n    store.__attrs = emptyObject()\r\n    store.__vnode__ = null\r\n    store.__isCreated__ = false\r\n    store.__refs = emptyObject()\r\n    store.dataset = null\r\n    // 微信中不支持多图层\r\n    const layerSetting = isWeiXin() ? { layer: 'default' } : {}\r\n    this.attr({ ...attrs, ...layerSetting })\r\n    this.__update = throttle((args) => {\r\n      if (store.__isCreated__) {\r\n        this.update(args)\r\n      }\r\n    })\r\n  }\r\n  get store() {\r\n    return this['__store']\r\n  }\r\n  get layer() {\r\n    let { layer: layerName, zIndex = 0 } = deepObjectMerge(\r\n      {},\r\n      this.baseAttrs(),\r\n      this.defaultAttrs(),\r\n      this.theme.attrs,\r\n      this.attr()\r\n    )\r\n    if (isWeiXin()) {\r\n      return this.scene.layer(layerName)\r\n    }\r\n    return this.scene.layer(layerName).attr({ zIndex })\r\n  }\r\n  get $refs() {\r\n    return this['__store'].__refs\r\n  }\r\n  get renderStyles() {\r\n    let styles = deepObjectMerge({}, this.defaultStyles(), this.theme.styles)\r\n    return styles\r\n  }\r\n  get renderAttrs() {\r\n    //attrs转换\r\n    let attrs = deepObjectMerge({}, this.baseAttrs(), this.defaultAttrs(), this.theme.attrs, this.attr())\r\n    let { animation, clientRect } = attrs\r\n    //动画数据转换\r\n    if (jsType(animation) === 'boolean') {\r\n      animation = { use: animation ? true : false }\r\n    }\r\n    //处理layer支持多layer\r\n    const rect = isWeiXin() ? this.layer.canvas : this.layer.canvas.getBoundingClientRect()\r\n    const { width, height } = rect\r\n\r\n    //计算布局数据\r\n    for (let key in clientRect) {\r\n      if (['left', 'right', 'width'].indexOf(key) !== -1) {\r\n        clientRect[key] = getDistancePx(clientRect[key], width)\r\n      } else if (['top', 'bottom', 'height'].indexOf(key) !== -1) {\r\n        clientRect[key] = getDistancePx(clientRect[key], height)\r\n      }\r\n    }\r\n    if (clientRect.width === undefined) {\r\n      clientRect.width = width - clientRect.left - clientRect.right\r\n    } else {\r\n      clientRect.right = width - clientRect.left - clientRect.width\r\n    }\r\n    if (clientRect.height === undefined) {\r\n      clientRect.height = height - clientRect.top - clientRect.bottom\r\n    } else {\r\n      clientRect.bottom = height - clientRect.top - clientRect.height\r\n    }\r\n    attrs.colors = this.theme.colors\r\n    return attrs\r\n  }\r\n  get dataset() {\r\n    return this['__store'].dataset || (this.chart && this.chart.dataset)\r\n  }\r\n  source(data, options) {\r\n    let store = this['__store']\r\n    if (!(data instanceof Dataset)) {\r\n      let opts = options\r\n      if (store.dataset) {\r\n        opts = deepObjectMerge({}, store.dataset.option, options)\r\n      }\r\n      store.dataset = new Dataset(data, opts)\r\n    } else {\r\n      store.dataset = data\r\n    }\r\n    if (store.dataset && store.__isCreated__) {\r\n      store.dataset.on('change', (_) => {\r\n        this.__update({ type: 'state' })\r\n      })\r\n      //如果以前存在，则更新\r\n      this.__update({ type: 'source' })\r\n    }\r\n    return this\r\n  }\r\n  created() {\r\n    //初始化创建的时候执行\r\n    let store = this['__store']\r\n    this.dispatchEvent(lifeCycle.created)\r\n    store.__vnode__ = this.render(this.beforeRender({ type: 'create' }))\r\n    const patches = diff(null, store.__vnode__)\r\n    this.dispatchEvent(lifeCycle.beforeRender)\r\n    patch.bind(this)(this.$el || this.layer, patches, 1)\r\n    this.dispatchEvent(lifeCycle.rendered)\r\n    this.rendered()\r\n    store.__isCreated__ = true\r\n    this.dataset.on('change', (_) => {\r\n      this.__update({ type: 'state' })\r\n    })\r\n  }\r\n  beforeRender() {\r\n    //图表初始化准备数据\r\n    return this.renderAttrs\r\n  }\r\n  render() {\r\n    console.warn('this function must be rewrited')\r\n  }\r\n  beforeUpdate() {\r\n    return this.renderAttrs\r\n  }\r\n  update(params) {\r\n    //图表更新准备数据\r\n    let store = this['__store']\r\n    this.dispatchEvent(lifeCycle.beforeUpdate)\r\n    let vnode = this.render(this.beforeUpdate(params))\r\n    const patches = diff(store.__vnode__, vnode)\r\n    patch.bind(this)(this.$el || this.layer, patches)\r\n    store.__vnode__ = vnode\r\n    this.dispatchEvent(lifeCycle.updated)\r\n    this.updated()\r\n  }\r\n  updated() {}\r\n  dispatchEvent(event, obj = emptyObject()) {\r\n    super.dispatchEvent(event, obj)\r\n  }\r\n  defaultAttrs() {\r\n    return emptyObject()\r\n  }\r\n  defaultStyles() {\r\n    return emptyObject()\r\n  }\r\n  baseAttrs() {\r\n    let attrs = {\r\n      //动画类型\r\n      animation: {\r\n        use: true,\r\n        duration: 700,\r\n        useTween: true,\r\n        easing: 'bounceOut'\r\n      },\r\n      //位置布局信息\r\n      clientRect: {\r\n        left: '10%',\r\n        top: '10%',\r\n        right: '10%',\r\n        bottom: '10%',\r\n        width: undefined,\r\n        height: undefined\r\n      },\r\n      //透明度\r\n      opacity: 1,\r\n      layer: 'default',\r\n      layoutBy: 'rows' //按照哪个数据布局 ['rows','cols']\r\n    }\r\n    return attrs\r\n  }\r\n  attr(name, val) {\r\n    //属性设置\r\n    let store = this['__store']\r\n    if (jsType(name) === 'object') {\r\n      for (let key in name) {\r\n        this.attr(key, name[key])\r\n      }\r\n    } else if (name === undefined) {\r\n      let res = emptyObject()\r\n      for (let key in store.__attrs) {\r\n        //过滤style属性\r\n        if (key.indexOf('style@') !== 0) {\r\n          res[key] = store.__attrs[key]\r\n        }\r\n      }\r\n      return res\r\n    } else if (val === undefined) {\r\n      //获取属性\r\n      return store.__attrs[name]\r\n    } else if (name !== undefined) {\r\n      store.__attrs[name] = val\r\n      store.__isCreated__ && this.__update({ type: 'attr' })\r\n    }\r\n  }\r\n  addRef(ref, el) {\r\n    this['__store'].__refs[ref] = el\r\n    //在vnode中调用，存储到this.__refs中\r\n  }\r\n  style(type, style) {\r\n    //样式设置，样式用attr逻辑存储，添加@符号\r\n    if (jsType(type) === 'object') {\r\n      //多样式赋值\r\n      for (let key in type) {\r\n        this.style(key, type[key])\r\n      }\r\n    } else if (type !== undefined && style === undefined) {\r\n      //获取样式，统一返回成函数\r\n      const style = this.attr('style@' + type)\r\n      return (...args) => {\r\n        if (jsType(style) === 'function') {\r\n          return style.apply(this, args)\r\n        } else {\r\n          return style\r\n        }\r\n      }\r\n    } else if (type !== undefined && style !== undefined) {\r\n      //赋值\r\n      this.attr('style@' + type, style)\r\n      return this\r\n    } else if (type === undefined && style === undefined) {\r\n      //获取全部样式\r\n      let res = emptyObject()\r\n      let attrs = this['__store'].__attrs\r\n      for (let key in attrs) {\r\n        if (key.indexOf('style@') === 0) {\r\n          let styleKey = key.substr(6)\r\n          res[styleKey] = this.style(styleKey)\r\n        }\r\n      }\r\n      return res\r\n    }\r\n  }\r\n}\r\nexport default Base\r\n","import { deepObjectMerge } from '@qcharts/utils'\r\nconst colors = ['#47A1FF', '#59CB74', '#FFB952', '#FC6980', '#6367EC', '#DA65CC', '#FBD54A', '#ADDF84', '#6CD3FF', '#659AEC', '#9F8CF1', '#ED8CCE', '#A2E5FF', '#4DCCCB', '#F79452', '#84E0BE', '#5982F6', '#E37474', '#3FDDC7', '#9861E5']\r\nfor (let i = 0; i < 1004; i++) {\r\n  //生成1024种颜色\r\n  colors.push('#' + ('00000' + ((Math.random() * 0x1000000) << 0).toString(16)).substr(-6))\r\n}\r\nconst theme = {\r\n  colors\r\n}\r\ntheme.visuals = {\r\n  Line: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      line: { lineWidth: 1 },\r\n      guideline: { strokeColor: '#ddd' },\r\n      point: {\r\n        pointType: 'ellipse',\r\n        radiusX: 4,\r\n        radiusY: 4,\r\n        strokeColor: '#fff',\r\n        borderWidth: 1\r\n      }\r\n    },\r\n    attrs: {\r\n      statck: false\r\n    }\r\n  },\r\n  Pie: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      sector: { lineWidth: 1, strokeColor: '#fff' }\r\n    },\r\n    attrs: {}\r\n  },\r\n  Area: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      area: { opacity: 0.5 },\r\n      guideline: { strokeColor: '#ddd' },\r\n      point: {\r\n        pointType: 'ellipse',\r\n        radiusX: 4,\r\n        radiusY: 4,\r\n        strokeColor: '#fff',\r\n        borderWidth: 1\r\n      }\r\n    },\r\n    attrs: {}\r\n  },\r\n  Radar: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      area: { opacity: 0.5 }\r\n    },\r\n    attrs: {}\r\n  },\r\n  Bar: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      bar: { textureRepeat: true },\r\n      groupBar: { opacity: 0.1 },\r\n      text: false\r\n    },\r\n    attrs: {\r\n      statck: false\r\n    }\r\n  },\r\n  PolarBar: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      bar: {}\r\n    },\r\n    attrs: {\r\n      statck: false\r\n    }\r\n  },\r\n  Funnel: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      funnel: {}\r\n    },\r\n    attrs: {\r\n      statck: false\r\n    }\r\n  },\r\n  Scatter: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      point: {}\r\n    },\r\n    attrs: {\r\n      showGuideLine: false\r\n    }\r\n  },\r\n  Wave: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      wave: { fillColor: '#37c', strokeColor: '#37c', lineWidth: 0 },\r\n      text: { fillColor: '#333', fontSize: 24 },\r\n      shape: { fillColor: '#e6f3ff', lineWidth: 3, strokeColor: '#156cbd' }\r\n    },\r\n    attrs: {}\r\n  },\r\n  Gauge: {\r\n    colors: theme.colors,\r\n    attrs: {}\r\n  },\r\n  RadialBar: {\r\n    colors: theme.colors,\r\n    attrs: {}\r\n  }\r\n}\r\ntheme.plugins = {\r\n  Tooltip: {\r\n    colors: theme.colors,\r\n    styles: {},\r\n    attrs: {}\r\n  },\r\n  Legend: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      point: {\r\n        pointType: 'sprite',\r\n        iconSize: [12, 12]\r\n      },\r\n      text: {\r\n        fontSize: '12px',\r\n        fillColor: '#666'\r\n      }\r\n    },\r\n    attrs: {}\r\n  },\r\n  Axis: {\r\n    colors: theme.colors,\r\n    styles: {\r\n      axis: {\r\n        strokeColor: '#ccc',\r\n        lineWidth: 1\r\n      },\r\n      scale: {\r\n        bgcolor: '#ccc'\r\n      },\r\n      label: {\r\n        fontSize: 12,\r\n        fillColor: '#666'\r\n      },\r\n      grid: {\r\n        strokeColor: '#ddd',\r\n        lineDash: [3, 3]\r\n      },\r\n      name: {\r\n        fontSize: 12,\r\n        fillColor: '#666'\r\n      }\r\n    },\r\n    attrs: {\r\n      orient: 'bottom'\r\n    }\r\n  }\r\n}\r\ntheme.set = function(obj) {\r\n  //合并样式\r\n  deepObjectMerge(theme, obj)\r\n}\r\nexport default theme\r\n","import Base from './Base'\r\nimport theme from '../theme/default'\r\nimport { deepObjectMerge } from '@qcharts/utils'\r\nimport filterClone from 'filter-clone'\r\nexport default class BaseVisual extends Base {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.theme = theme.visuals[this.constructor.name]\r\n    //如果当前对象设置了theme，不继承theme\r\n    this.theme.set = obj => {\r\n      if (this.theme === theme.visuals[this.constructor.name]) {\r\n        this.theme = filterClone(this.theme)\r\n      }\r\n      this.theme = deepObjectMerge(this.theme, obj)\r\n    }\r\n  }\r\n}\r\n","// merge style\r\nimport { deepObjectMerge, jsType } from '@qcharts/utils'\r\n/**\r\n * chart:当前的图表\r\n * key:当前的样式名称\r\n * defaultstyle:为数组或者对象，表示默认的样式\r\n * args:调用style方法的时候，style以后的参数\r\n */\r\nexport function getStyle(chart, key, defaultStyle, args) {\r\n  //合并样式\r\n  let oStyle = defaultStyle\r\n  let arrStyle = defaultStyle\r\n  let oArgs = args\r\n  if (jsType(defaultStyle) === 'array') {\r\n    oStyle = deepObjectMerge.apply(this, defaultStyle)\r\n  } else {\r\n    arrStyle = [defaultStyle]\r\n  }\r\n  if (jsType(args) !== 'array') {\r\n    oArgs = [args]\r\n  }\r\n  let cusStyle = chart.style(key)(oStyle, ...oArgs)\r\n  if (cusStyle === false) {\r\n    return false\r\n  } else if (arrStyle.includes(false) && cusStyle === undefined) {\r\n    return false\r\n  } else if (cusStyle !== undefined) {\r\n    //如果返回的cusStyle不是false或者undefined，需要把default样式进行重写叠加\r\n    let curStyle = defaultStyle\r\n    if (jsType(defaultStyle) !== 'array') {\r\n      curStyle = [defaultStyle]\r\n    }\r\n    //获取default样式\r\n    let oDefaultStyle = chart.defaultStyles()[key]\r\n    oStyle = deepObjectMerge({}, oDefaultStyle, curStyle.filter(Boolean), oStyle)\r\n  }\r\n  return deepObjectMerge({}, oStyle, cusStyle)\r\n}\r\n","function scaleLinear() {\r\n  let domain = [0, 1]\r\n  let range = [0, 1]\r\n  function scale(num) {\r\n    let disDomain = domain[1] - domain[0]\r\n    let disRange = range[1] - range[0]\r\n    let per = (num - domain[0]) / disDomain || 0\r\n    return range[0] + disRange * per\r\n  }\r\n  scale.domain = function(arr) {\r\n    domain = arr\r\n    return this\r\n  }\r\n  scale.range = function(arr) {\r\n    range = arr\r\n    return this\r\n  }\r\n  return scale\r\n}\r\n\r\n// const data = [80, 40, 30, 60, 70]\r\n// const s = scaleLinear().domain([0, 100]).range([0, 100])\r\n// console.log(data.map(s))\r\n\r\nexport { scaleLinear }\r\n","//import { Global } from '../core/Global'\r\nexport function axis(attr) {\r\n  // 计算坐标轴刻度\r\n  if (!Array.isArray(attr.dataSet) && !attr.hasOwnProperty(\"section\")) {\r\n    return [];\r\n  }\r\n  if (attr.section !== undefined) {\r\n    return sectionAxis(attr.section);\r\n  }\r\n  const data = dataHandle(attr);\r\n  let upZero = []; // 大于零的数\r\n  let downZero = []; // 小于零的数\r\n  for (const element of data) {\r\n    if (element < 0) {\r\n      downZero.push(Math.abs(element));\r\n    } else {\r\n      upZero.push(element);\r\n    }\r\n  }\r\n  let length = 5; // 刻度数量\r\n  let sortUpZero = upZero.sort((a, b) => {\r\n    return a - b;\r\n  });\r\n  let sortDownZero = downZero.sort((a, b) => {\r\n    return a - b;\r\n  });\r\n  let maxUpZero = sortUpZero.length && Math.ceil(sortUpZero.pop() / 0.95);\r\n  let maxDownZero = sortDownZero.length && Math.ceil(sortDownZero.pop() / 0.95);\r\n  let maxValue = maxUpZero - maxDownZero >= 0 ? maxUpZero : maxDownZero;\r\n  let mixNum = 4;\r\n  let maxNum = 7;\r\n  if (maxDownZero && maxUpZero) {\r\n    mixNum = 3;\r\n    maxNum = 5;\r\n  }\r\n  if (attr.splitNumber) {\r\n    mixNum = attr.splitNumber;\r\n    maxNum = mixNum + 1;\r\n  }\r\n  let getMax = false;\r\n  const len = maxValue.toString().length; // 最大值位数\r\n  let max =\r\n    len < 3\r\n      ? Math.ceil(maxValue / Math.pow(10, len - 1))\r\n      : Math.ceil(maxValue / Math.pow(10, len - 2));\r\n  do {\r\n    for (let i = mixNum; i < maxNum; i++) {\r\n      if (max % i === 0) {\r\n        length = i;\r\n        maxValue =\r\n          len < 3 ? max * Math.pow(10, len - 1) : max * Math.pow(10, len - 2);\r\n        getMax = true;\r\n        break;\r\n      }\r\n    }\r\n    max++;\r\n  } while (!getMax);\r\n\r\n  let axisArray = new Array(length + 1);\r\n  axisArray[0] = 0;\r\n  for (let i = 1; i < length + 1; i++) {\r\n    axisArray[i] =\r\n      maxUpZero >= maxDownZero\r\n        ? Math.round((maxValue / length) * i)\r\n        : -1 * Math.round((maxValue / length) * i);\r\n  }\r\n\r\n  // 处理0-1之间的数据\r\n  if (\r\n    (maxDownZero <= 1 && maxDownZero > 0) ||\r\n    (maxUpZero <= 1 && maxUpZero > 0) ||\r\n    (maxUpZero === 0 && maxDownZero === 0)\r\n  ) {\r\n    axisArray = new Array(6);\r\n    axisArray[0] = 0;\r\n    maxValue = 1;\r\n    for (let i = 1; i < 6; i++) {\r\n      axisArray[i] =\r\n        maxUpZero >= maxDownZero\r\n          ? (2 * maxValue * i) / 10\r\n          : (-2 * maxValue * i) / 10;\r\n    }\r\n  }\r\n\r\n  if (maxUpZero < maxDownZero) {\r\n    axisArray.reverse();\r\n  }\r\n  if (maxDownZero.length === 0 || maxUpZero.length === 0) {\r\n    return axisArray;\r\n  }\r\n  if (maxUpZero >= maxDownZero) {\r\n    const unit = axisArray[1] * 10;\r\n    for (\r\n      let i = 1,\r\n        len = Math.ceil(((axisArray.length - 1) * maxDownZero) / maxUpZero);\r\n      i < len + 1;\r\n      i++\r\n    ) {\r\n      axisArray.unshift((-1 * unit * i) / 10);\r\n    }\r\n  } else {\r\n    const unit = axisArray[axisArray.length - 2] * 10;\r\n    for (\r\n      let i = 1,\r\n        len = Math.ceil(((axisArray.length - 1) * maxUpZero) / maxDownZero);\r\n      i < len + 1;\r\n      i++\r\n    ) {\r\n      axisArray.push((-1 * unit * i) / 10);\r\n    }\r\n  }\r\n  // if (attr.needReverse) {\r\n  //   axisArray = axisArray.map((value) => {\r\n  //     return this.dataset.datasetReverse\r\n  //       ? Math.round(this.dataset.datasetReverse(value))\r\n  //       : value;\r\n  //   });\r\n  // }\r\n  return axisArray;\r\n}\r\n\r\nfunction dataHandle(attr) {\r\n  const stack = attr.stack || false;\r\n  const data = attr.dataSet || [];\r\n  const arr = [];\r\n\r\n  if (stack && data.length !== 0 && data[0].length) {\r\n    for (let i = 0, len = data[0].length; i < len; i++) {\r\n      let sum = 0;\r\n      let sumDown = 0;\r\n      for (let j = 0, leng = data.length; j < leng; j++) {\r\n        let val = data[j][i].layoutScaleValue;\r\n        if (data[j][i].disabled === true || val === undefined) {\r\n          continue;\r\n        }\r\n        if (val < 0) {\r\n          sumDown = sumDown + val;\r\n        } else {\r\n          sum = sum + val;\r\n        }\r\n      }\r\n      sum && arr.push(sum);\r\n      sumDown && arr.push(sumDown);\r\n    }\r\n  } else {\r\n    for (let m = 0; m < data.length; m++) {\r\n      for (let n = 0; n < data[m].length; n++) {\r\n        let val = data[m][n].layoutScaleValue;\r\n        if (data[m][n].disabled === true || val === undefined) {\r\n          continue;\r\n        }\r\n        arr.push(val);\r\n      }\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction sectionAxis(section) {\r\n  if (section && Array.isArray(section)) {\r\n    const gap = section[1] - section[0];\r\n    const arr = [];\r\n    let divide = 4;\r\n    arr.push(section[0]);\r\n    for (let i = 4; i < 8; i++) {\r\n      if (gap % i === 0) {\r\n        divide = i;\r\n        break;\r\n      }\r\n    }\r\n    for (let j = 1; j <= divide; j++) {\r\n      arr.push((section[0] + (gap * j) / divide).toFixed(2));\r\n    }\r\n    return arr;\r\n  }\r\n  return [];\r\n}\r\n","import { scaleLinear } from \"../../utils/scaleLinear\";\r\nimport { axis } from \"../../utils/axis\";\r\nexport default function layout(arr, attrs) {\r\n  let type = this.type;\r\n  let lines = [];\r\n  const { stack, splitNumber, clientRect, axisGap } = attrs;\r\n  const { width, height } = clientRect;\r\n  let scales = axis.call(this, { dataSet: arr, stack, splitNumber });\r\n  let maxVal = Math.max.apply(this, scales);\r\n  let minVal = Math.min.apply(this, scales);\r\n  let scaleFY = scaleLinear()\r\n    .domain([minVal, maxVal])\r\n    .range([0, height]);\r\n  let prevRow = null;\r\n  arr.forEach((row) => {\r\n    let line = {\r\n      points: [],\r\n      areaPoints: [],\r\n      smoothRange: [],\r\n      state: row.state,\r\n    };\r\n    row.forEach((cell, i) => {\r\n      let val = cell.layoutScaleValue;\r\n      if (cell.value !== undefined) {\r\n        //如果为undefined 不渲染\r\n        let dx = width / (row.length - 1);\r\n        let offsetX = 0;\r\n        if (axisGap) {\r\n          dx = width / row.length;\r\n          offsetX = dx / 2;\r\n        }\r\n        let curPos = [dx * i + offsetX, height - scaleFY(val)];\r\n        if (stack && prevRow) {\r\n          //如果是堆叠并且前一个row存在，则叠加\r\n          curPos = [\r\n            dx * i + offsetX,\r\n            height - scaleFY(val + prevRow[i].layoutScaleValue),\r\n          ];\r\n        }\r\n        line.points.push(curPos);\r\n      }\r\n    });\r\n    line.axisPoints = [\r\n      [line.points[0][0], height - scaleFY(0)],\r\n      [line.points[line.points.length - 1][0], height - scaleFY(0)],\r\n    ];\r\n    if (line.state !== \"disabled\") {\r\n      prevRow = row;\r\n    }\r\n    lines.push(line);\r\n  });\r\n  if (type === \"area\") {\r\n    let curLine = null;\r\n    lines.forEach((line, ind) => {\r\n      let nextPoints = []\r\n        .concat(line.points)\r\n        .reverse()\r\n        .map((point) => [point[0], height]);\r\n      if (curLine && attrs.stack) {\r\n        nextPoints = [].concat(lines[ind - 1].points).reverse();\r\n      }\r\n      let res = transAreaPoint(line.points, nextPoints);\r\n      line.areaPoints = res.areaPoints;\r\n      line.smoothRange = res.smoothRange;\r\n      if (line.state !== \"disabled\") {\r\n        curLine = line;\r\n      }\r\n    });\r\n  }\r\n  return lines;\r\n}\r\nfunction transAreaPoint(startPoints, endPoints) {\r\n  let res = {\r\n    areaPoints: [],\r\n    smoothRange: [],\r\n  };\r\n  res.areaPoints = []\r\n    .concat([startPoints[0]])\r\n    .concat(startPoints)\r\n    .concat([startPoints[startPoints.length - 1]])\r\n    .concat([endPoints[0]])\r\n    .concat(endPoints)\r\n    .concat([endPoints[endPoints.length - 1]]);\r\n  res.smoothRange = [\r\n    1,\r\n    startPoints.length,\r\n    startPoints.length + 3,\r\n    startPoints.length + endPoints.length + 2,\r\n  ];\r\n  return res;\r\n}\r\n","import { Sprite, Path, Ellipse, Rect, Triangle, Parallel, Regular, Star, Group } from 'spritejs'\r\nimport { jsType } from '@qcharts/utils'\r\n\r\nconst allPoint = {\r\n  sprite: Sprite,\r\n  path: Path,\r\n  ellipse: Ellipse,\r\n  rect: Rect,\r\n  triangle: Triangle,\r\n  parallel: Parallel,\r\n  regular: Regular,\r\n  star: Star\r\n}\r\nclass Point extends Group {\r\n  constructor(attrs = {}) {\r\n    super()\r\n    this.pointType = null\r\n    this.$sprite = null\r\n    this.attr({ pointType: 'ellipse', ...attrs })\r\n  }\r\n  attr(name, val) {\r\n    let attrs = name\r\n    if (jsType(name) !== 'object') {\r\n      attrs = {}\r\n      attrs[name] = val\r\n    }\r\n    this.renderSymbol(attrs)\r\n  }\r\n  renderSymbol(attrs) {\r\n    const { pointType, pos, ...renderAttr } = attrs\r\n\r\n    if (pointType && pointType !== this.pointType) {\r\n      if (!Object.keys(allPoint).includes(pointType)) {\r\n        throw new Error(\r\n          `pointType should be one of 'sprite','path','ellipse','rect','triangle','parallel','regular','star' but it is ${pointType}`\r\n        )\r\n      }\r\n      this.$sprite && this.$sprite.remove()\r\n      this.$sprite = new allPoint[pointType](renderAttr)\r\n      this.append(this.$sprite)\r\n    } else {\r\n      this.$sprite.attr(renderAttr)\r\n    }\r\n    if (pos && pos.length) {\r\n      super.attr('pos', pos)\r\n    }\r\n\r\n    this.pointType = pointType\r\n  }\r\n}\r\nexport default Point\r\n","import Base from '../../base/BaseVisual'\r\nimport { Group, Polyline, Node } from 'spritejs'\r\nimport { getStyle } from '@/utils/getStyle'\r\nimport layout from './layout'\r\nimport Point from '../../utils/Point'\r\nimport { deepObjectMerge } from '@qcharts/utils'\r\nclass Line extends Base {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.renderLines = []\r\n    this.type = 'line'\r\n    this.hoverIndex = -1\r\n  }\r\n  get renderAttrs() {\r\n    //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理，如果需要新增渲染时的默认值，在该处处理\r\n    let attrs = super.renderAttrs\r\n    return attrs\r\n  }\r\n  beforeRender() {\r\n    //渲染前的处理函数，返回lines,继承base\r\n    let { arrLayout, maxLen } = this.getRenderData()\r\n    let lines = arrLayout.map(item => {\r\n      return {\r\n        smoothRange: item.smoothRange,\r\n        areaFrom: { points: item.areaPoints },\r\n        areaTo: { points: item.areaPoints },\r\n        from: { points: item.points, lineDash: [1, maxLen] },\r\n        to: { points: item.points, lineDash: [maxLen, maxLen] }\r\n      }\r\n    })\r\n    return lines\r\n  }\r\n  beforeUpdate() {\r\n    //更新前的处理函数，返回lines,继承base\r\n    let { arrLayout, maxLen } = this.getRenderData()\r\n    let renderLines = this.renderLines\r\n    let lines = arrLayout.map((item, i) => {\r\n      let from = { points: item.points }\r\n      if (renderLines[i]) {\r\n        from = { points: renderLines[i].to.points }\r\n      }\r\n      if (!renderLines[i] || renderLines[i].state === 'disabled') {\r\n        from.lineDash = [4, maxLen]\r\n      }\r\n      return {\r\n        state: item.state,\r\n        smoothRange: item.smoothRange,\r\n        areaFrom: (renderLines[i] && renderLines[i].areaTo) || item.areaPoints,\r\n        areaTo: {\r\n          points: item.areaPoints\r\n        },\r\n        from,\r\n        to: {\r\n          points: item.points,\r\n          lineDash: [maxLen, maxLen]\r\n        }\r\n      }\r\n    })\r\n    return lines\r\n  }\r\n  getRenderData() {\r\n    //根据line的特性返回需要数据\r\n    let renderAttrs = this.renderAttrs\r\n    let renderData = this.dataset[renderAttrs.layoutBy]\r\n    let arrLayout = layout.call(this, renderData, renderAttrs)\r\n    let { height, width } = renderAttrs.clientRect\r\n    //对角线长度的2保证会大于曲线的长度\r\n    let maxLen = Math.sqrt(height ** 2, width ** 2) * 5\r\n    return { width, height, arrLayout, maxLen }\r\n  }\r\n  rendered() {\r\n    //console.log(this.$refs['wrap'])\r\n  }\r\n  defaultAttrs() {\r\n    // 默认的属性,继承base，正常情况可以删除，建议到theme里面设置默认样式\r\n    return {\r\n      guidePoints: [],\r\n      layer: 'line'\r\n    }\r\n  }\r\n  defaultStyles() {\r\n    // 默认的样式,继承base\r\n    return {\r\n      //smooth: false,\r\n    }\r\n  }\r\n  guidelineleave(event, el) {\r\n    this.attr('guidePoints', [])\r\n    this.dataset.resetState()\r\n  }\r\n  guidelinemove(event, el) {\r\n    if (this.renderLines.length) {\r\n      //获取 x轴坐标的刻度\r\n      let arrX = this.renderLines[0].to.points.map(pos => pos[0])\r\n      //转换cancas坐标到当前group的相对坐标\r\n      let [x] = el.getOffsetPosition(event.x, event.y)\r\n      let curInd = 0\r\n      //查找当前位置\r\n      for (let i = 0; i < arrX.length; i++) {\r\n        if (x > arrX[i] && x < arrX[i + 1]) {\r\n          curInd = Math.abs(x - arrX[i]) < Math.abs(x - arrX[i + 1]) ? i : i + 1\r\n          break\r\n        }\r\n      }\r\n      //重置所有的dateset的状态\r\n      if (this.hoverIndex !== curInd) {\r\n        this.dataset.resetState()\r\n        //设置当前列的state为hover\r\n        this.dataset.cols[curInd].state = 'hover'\r\n        let { clientRect } = this.renderAttrs\r\n        let posX = arrX[curInd]\r\n        this.hoverIndex = curInd\r\n        this.attr({\r\n          guidePoints: [\r\n            [posX, 0],\r\n            [posX, clientRect.height]\r\n          ],\r\n          lineState: 'default'\r\n        })\r\n      }\r\n    }\r\n  }\r\n  render(lines) {\r\n    let { clientRect, smooth, guidePoints } = this.renderAttrs\r\n    //渲染的样式，合并了theme中的styles与组件上的defaultStyles\r\n    let styles = this.renderStyles\r\n    //当前主体颜色\r\n    let colors = this.theme.colors\r\n    this.renderLines = lines\r\n    return (\r\n      <Group zIndex={1} class=\"container\" pos={[clientRect.left, clientRect.top]} onMouseleave={this.guidelineleave} onMouseenter={this.guidelinemove} onMousemove={this.guidelinemove} size={[clientRect.width, clientRect.height]}>\r\n        <Group class=\"lines-group\">\r\n          {lines.map((line, ind) => {\r\n            let style = getStyle(this, 'line', [{ strokeColor: colors[ind], smooth }, styles.line], [this.dataset.rows[ind], ind])\r\n            return line.state === 'disabled' || style === false ? <Node /> : <Polyline onClick={this.lineClick} {...style} animation={{ from: line.from, to: line.to }} />\r\n          })}\r\n        </Group>\r\n        <Group class=\"areas-group\">\r\n          {this.type !== 'area'\r\n            ? null\r\n            : lines.map((line, ind) => {\r\n                let style = getStyle(this, 'area', [{ fillColor: colors[ind], smooth }, styles.area], [this.dataset.rows[ind], ind])\r\n                return line.state === 'disabled' || style === false ? <Node /> : <Polyline smoothRange={line.smoothRange} {...style} animation={{ from: line.areaFrom, to: line.areaTo }} />\r\n              })}\r\n        </Group>\r\n        <Group class=\"line-points\">\r\n          {lines.map((line, ind) => {\r\n            return line.state === 'disabled' ? (\r\n              <Node />\r\n            ) : (\r\n              <Group>\r\n                {line.to.points.map((p, j) => {\r\n                  const animation = { from: { pos: line.from.points[j] }, to: { pos: p } }\r\n                  let style = getStyle(this, 'point', [{ fillColor: colors[ind] }, styles.point], [this.dataset.rows[ind], ind, j])\r\n                  let styleHover = getStyle(this, 'point:hover', [style, styles['point:hover']], [this.dataset.rows[ind], ind, j])\r\n                  if (this.dataset.rows[ind][j].state === 'hover') {\r\n                    deepObjectMerge(style, styleHover)\r\n                  }\r\n                  return <Point {...style} animation={animation} />\r\n                })}\r\n              </Group>\r\n            )\r\n          })}\r\n        </Group>\r\n        <Group class=\"guide-line-group\">\r\n          {guidePoints.length ? (\r\n            (_ => {\r\n              let style = getStyle(this, 'guideline', styles.guideline)\r\n              return style === false ? <Node /> : <Polyline points={guidePoints} {...style} />\r\n            })()\r\n          ) : (\r\n            <Node />\r\n          )}\r\n        </Group>\r\n      </Group>\r\n    )\r\n  }\r\n}\r\nexport default Line\r\n","export default function layout(arr, attrs) {\r\n  let rings = []\r\n  let arrVal = arr.map(row => row.reduce((val, item) => (row.state !== 'disabled' ? val + item.value : val), 0))\r\n  //当totalVal为0的时候，会造成分母为0 如果totalVal为0 处理成1\r\n  let totalVal = arrVal.reduce((val, item) => val + item, 0) || 1\r\n  let { startAngle, endAngle, activeOffset } = attrs\r\n  let minAngle = Math.min(startAngle, endAngle)\r\n  let maxAngle = Math.max(startAngle, endAngle)\r\n  if (maxAngle > minAngle + 360) {\r\n    maxAngle = minAngle + 360\r\n  }\r\n  let totalAngle = maxAngle - minAngle\r\n  arrVal.forEach((num, ind) => {\r\n    let curPercent = num / totalVal\r\n    let perAngle = curPercent * totalAngle\r\n    //默认中心坐标偏移量0\r\n    let offsetPos = [0, 0]\r\n\r\n    let curObj = { startAngle: minAngle, endAngle: minAngle + perAngle, offsetPos }\r\n    if (ind !== 0) {\r\n      let prevRing = rings[ind - 1]\r\n      curObj = { startAngle: prevRing.endAngle, endAngle: prevRing.endAngle + perAngle, offsetPos }\r\n    }\r\n    let curAngle = ((curObj.startAngle + curObj.endAngle) / 2) % 360\r\n    curObj.bisectorAngle = curAngle\r\n    curObj.bisectorRadian = transRadius(curAngle)\r\n    if (arr[ind].state === 'hover') {\r\n      //角平分,角度转弧度,默认是顺时针，角度为相反\r\n      curObj.offsetPos = [activeOffset * Math.cos(curObj.bisectorRadian), activeOffset * Math.sin(curObj.bisectorRadian)]\r\n      //选中状态\r\n    }\r\n    rings.push(curObj)\r\n  })\r\n  return rings\r\n}\r\nexport function transRadius(angle) {\r\n  return (angle / 180) * Math.PI\r\n}\r\nexport function computeLinePos(startAngle, endAngle, center, radius, disRadius) {\r\n  let points = []\r\n  let centerAn = ((startAngle + endAngle) / 2) % 360\r\n  let centerAngle = transRadius(centerAn)\r\n  let labelAnchor = [0, 0]\r\n  let startPoint = [radius * Math.cos(centerAngle), radius * Math.sin(centerAngle)]\r\n  let endPoint = [(radius + disRadius) * Math.cos(centerAngle), (radius + disRadius) * Math.sin(centerAngle)]\r\n  let labelPos = [(radius + disRadius) * Math.cos(centerAngle), (radius + disRadius + 5) * Math.sin(centerAngle)]\r\n  labelPos = [center[0] + labelPos[0], center[1] + labelPos[1]]\r\n  points.push([center[0] + startPoint[0], center[1] + startPoint[1]])\r\n  points.push([center[0] + endPoint[0], center[1] + endPoint[1]])\r\n  labelAnchor = [Math.sin(centerAngle / 2), 1 - Math.cos(centerAngle / 4)]\r\n  return { points, labelAnchor, labelPos: labelPos }\r\n}\r\n","import Base from '../../base/BaseVisual'\r\nimport { Group, Node, Ring, Polyline, Label } from 'spritejs'\r\nimport filterClone from 'filter-clone'\r\nimport layout from './layout'\r\nimport { computeLinePos } from './layout'\r\nimport { getStyle } from '@/utils/getStyle'\r\nclass Pie extends Base {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.renderRings = []\r\n    this.hoverIndex = -1\r\n    this.activeIndex = -1\r\n  }\r\n  get renderAttrs() {\r\n    //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理，如果需要新增渲染时的默认值，在该处处理\r\n    let attrs = super.renderAttrs\r\n    let { radius, innerRadius } = attrs\r\n    let { width, height } = attrs.clientRect\r\n    attrs.center = [width / 2, height / 2]\r\n    attrs.radiusPx = (Math.min(width, height) * radius) / 2\r\n    attrs.innerRadiusPx = (Math.min(width, height) * innerRadius) / 2\r\n    return attrs\r\n  }\r\n  beforeRender() {\r\n    //渲染前的处理函数，返回lines,继承base\r\n    let { rings } = this.getRenderData()\r\n    let { center } = this.renderAttrs\r\n    let arr = rings.map((item, ind) => {\r\n      if (ind === 0) {\r\n        return {\r\n          from: { startAngle: 0, endAngle: 0, pos: center },\r\n          to: { ...item, pos: center }\r\n        }\r\n      }\r\n      let pervAngle = rings[ind - 1].endAngle\r\n      return {\r\n        from: { startAngle: pervAngle, endAngle: pervAngle, pos: center },\r\n        to: { ...item, pos: center }\r\n      }\r\n    })\r\n    this.computeLine(arr)\r\n    return arr\r\n  }\r\n  beforeUpdate() {\r\n    //更新前的处理函数，返回lines,继承base\r\n    let { rings } = this.getRenderData()\r\n    let { center } = this.renderAttrs\r\n    let oldRings = this.renderRings\r\n    let arr = rings.map((item, ind) => {\r\n      let curPos = [center[0] + item.offsetPos[0], center[1] + item.offsetPos[1]]\r\n      let attrs = filterClone(item, ['startAngle', 'endAngle'])\r\n      if (ind === this.hoverIndex) {\r\n        return {\r\n          from: { ...oldRings[ind].to },\r\n          to: { ...attrs, pos: curPos }\r\n        }\r\n      } else {\r\n        return {\r\n          from: { ...oldRings[ind].to },\r\n          to: { ...attrs, pos: curPos }\r\n        }\r\n      }\r\n    })\r\n    this.computeLine(arr)\r\n    return arr\r\n  }\r\n  computeLine(arr) {\r\n    let { radiusPx } = this.renderAttrs\r\n    arr.forEach(item => {\r\n      let { points: fromPoints, labelAnchor: fromAnchor, labelPos: fromPos } = computeLinePos(item.from.startAngle, item.from.endAngle, item.from.pos, radiusPx + 1, 15)\r\n      let { points: toPoints, labelAnchor: toAnchor, labelPos: toPos } = computeLinePos(item.to.startAngle, item.to.endAngle, item.to.pos, radiusPx + 1, 15)\r\n      item.line = {\r\n        from: {\r\n          points: fromPoints\r\n        },\r\n        to: {\r\n          points: toPoints\r\n        }\r\n      }\r\n      item.label = {\r\n        from: {\r\n          pos: fromPos,\r\n          anchor: fromAnchor\r\n        },\r\n        to: {\r\n          pos: toPos,\r\n          anchor: toAnchor\r\n        }\r\n      }\r\n    })\r\n    //计算guideline位置\r\n  }\r\n  getRenderData() {\r\n    //根据line的特性返回需要数据\r\n    let renderAttrs = this.renderAttrs\r\n    //let { radiusPx, center } = renderAttrs\r\n    let renderData = this.renderData()\r\n    let rings = layout.call(this, renderData, renderAttrs)\r\n    return { rings }\r\n  }\r\n  rendered() {\r\n    //console.log(this.$refs['wrap'])\r\n  }\r\n  defaultAttrs() {\r\n    // 默认的属性,继承base，正常情况可以删除，建议到theme里面设置默认样式\r\n    return {\r\n      layer: 'pie',\r\n      radius: 1,\r\n      innerRadius: 0,\r\n      startAngle: 0,\r\n      endAngle: 360,\r\n      lineWidth: 1,\r\n      //选中偏移量基数\r\n      activeOffset: 10\r\n    }\r\n  }\r\n  defaultStyles() {\r\n    // 默认的样式,继承base\r\n    return {}\r\n  }\r\n  mousemove(event, el) {\r\n    let renderData = this.renderData()\r\n    let ind = el.attr('_index')\r\n    if (ind !== this.hoverIndex) {\r\n      let curData = renderData[ind]\r\n      renderData.forEach(row => {\r\n        if (row.state === 'hover') {\r\n          row.state = 'default'\r\n        }\r\n      })\r\n      curData.state = 'hover'\r\n      this.hoverIndex = ind\r\n    }\r\n  }\r\n  mouseleave() {\r\n    let renderData = this.renderData()\r\n    renderData.forEach(row => {\r\n      if (row.state === 'hover') {\r\n        row.state = 'default'\r\n      }\r\n    })\r\n    this.hoverIndex = -1\r\n  }\r\n  renderData() {\r\n    let renderAttrs = this.renderAttrs\r\n    return this.dataset[renderAttrs.layoutBy]\r\n  }\r\n  render(rings) {\r\n    //console.log(rings)\r\n    let { clientRect, innerRadiusPx, radiusPx } = this.renderAttrs\r\n    //渲染的样式，合并了theme中的styles与组件上的defaultStyles\r\n    let styles = this.renderStyles\r\n    //当前主体颜色\r\n    let colors = this.theme.colors\r\n    this.renderRings = rings\r\n    return (\r\n      <Group zIndex={1} class=\"container\" pos={[clientRect.left, clientRect.top]} size={[clientRect.width, clientRect.height]}>\r\n        <Group class=\"rings-group\" onMouseleave={this.mouseleave}>\r\n          {rings.map((ring, ind) => {\r\n            let style = getStyle(this, 'sector', [{ strokeColor: colors[ind], fillColor: colors[ind], innerRadius: innerRadiusPx, outerRadius: radiusPx, _index: ind }, styles.sector], [this.dataset.rows[ind], ind])\r\n            return ring.state === 'disabled' || style === false ? <Node /> : <Ring onMousemove={this.mousemove} {...style} animation={{ from: ring.from, to: ring.to }} />\r\n          })}\r\n        </Group>\r\n        <Group class=\"line-group\">\r\n          {rings.map((ring, ind) => {\r\n            let style = getStyle(this, 'guideline', [{ strokeColor: colors[ind] }, styles.guideline], [this.dataset.rows[ind], ind])\r\n            let hide = false\r\n            if (ring.to.startAngle === ring.to.endAngle || ring.state === 'disable' || style === false) {\r\n              hide = true\r\n            }\r\n            return hide || style === false ? <Node /> : <Polyline {...style} animation={{ from: ring.line.from, to: ring.line.to }} />\r\n          })}\r\n        </Group>\r\n        <Group class=\"label-group\">\r\n          {rings.map((ring, ind) => {\r\n            let name = this.dataset.rows[ind].name\r\n            let style = getStyle(this, 'guideText', [{ fillColor: '#666', fontSize: 12 }, styles.guideline], [this.dataset.rows[ind], ind])\r\n            let hide = false\r\n            if (ring.to.startAngle === ring.to.endAngle || ring.state === 'disable' || style === false) {\r\n              hide = true\r\n            }\r\n            return hide || style === false ? <Node /> : <Label text={name} {...style} pos={ring.label.from.pos} animation={{ from: ring.label.from, to: ring.label.to }} />\r\n          })}\r\n        </Group>\r\n      </Group>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Pie\r\n","import Line from '../Line'\r\nimport { deepObjectMerge } from '@qcharts/utils'\r\nclass Area extends Line {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.type = 'area'\r\n  }\r\n  defaultAttrs() {\r\n    return deepObjectMerge({}, super.defaultAttrs(), {\r\n      stack: true,\r\n      animation: {\r\n        duration: 700,\r\n        easing: 'bounceOut'\r\n      },\r\n      layer: 'area'\r\n    })\r\n  }\r\n}\r\nexport default Area\r\n","/**\r\n * 根据给定角度和长度获取极坐标值\r\n * @param {Number} radian 角度\r\n * @param {Number} length 长度\r\n * @returns {Array} [x,y]\r\n */\r\nconst getPointCoordinate = (radian, length) => {\r\n  let x = Math.cos(radian) * length\r\n  let y = Math.sin(radian) * length\r\n  return [x, y]\r\n}\r\n\r\n/**\r\n * 获取数组中最大数除以层级后的整数\r\n * @param {Array} data\r\n * @param {Number} splitNumber\r\n * @returns {Number}\r\n */\r\nconst getMax = (data, splitNumber) => {\r\n  const indicatorMax = Math.max(...data)\r\n  if (indicatorMax < splitNumber * 10) {\r\n    return Math.ceil(indicatorMax / splitNumber) * splitNumber\r\n  } else {\r\n    return Math.ceil(indicatorMax / 10 / splitNumber) * 10 * splitNumber\r\n  }\r\n}\r\n\r\n/**\r\n * 根据给定的数据，返回绘制雷达图所需要的数据\r\n * @param {Array} dataset 数据集\r\n * @param {Number} radius 雷达图半径\r\n * @param {Number} splitNumber  雷达图背景层级\r\n * @param {Number} startAngle 雷达图起始轴角度\r\n * @param {Number} labelOffset 雷达图文字偏移值\r\n * @param {Array} colors 雷达图主题颜色\r\n * @returns {Object} { sectionAttrs, borderAttrs, axisAttrs, gridAttrs }\r\n */\r\nexport default function layout(data, radius, splitNumber, startAngle, labelOffset, colors) {\r\n  let bgPoints = [] // 最外层背景多边形\r\n  let gridAttrs = [] // 蜘蛛网图背景\r\n  let axisAttrs = [] // 坐标轴\r\n  let sectionAttrs = [] // 多边形数据\r\n\r\n  if (data.some((d) => d.length === 0)) {\r\n    return { sectionAttrs, axisAttrs, gridAttrs }\r\n  }\r\n\r\n  const allDataValue = data.reduce((t, row) => {\r\n    return t.concat(row.map((cell) => cell.value))\r\n  }, [])\r\n\r\n  const max = getMax(allDataValue, splitNumber)\r\n\r\n  // 每个类别的弧度\r\n  const dimension = data[0].length\r\n  const perRadian = (Math.PI * 2) / dimension\r\n  // 起始角度->转弧度\r\n  const startRadian = (Math.PI / 180) * startAngle\r\n  for (let i = 0; i < dimension; i++) {\r\n    // 根据角度和半径，计算对应的坐标\r\n    let currentRadian = i * perRadian + startRadian\r\n    let point = getPointCoordinate(currentRadian, radius)\r\n\r\n    bgPoints.push({\r\n      point,\r\n      radian: currentRadian\r\n    })\r\n\r\n    // 类别指示坐标\r\n    const labelPos = getPointCoordinate(currentRadian, radius + labelOffset)\r\n    const label = data[0][i].text\r\n    // 坐标轴属性\r\n    axisAttrs.push({\r\n      points: [[0, 0], point],\r\n      lineWidth: 1,\r\n      lineDash: [3, 2],\r\n      strokeColor: '#DDE0E5',\r\n      label,\r\n      labelPos,\r\n      radian: currentRadian,\r\n      maxScale: max,\r\n      splitNumber: splitNumber\r\n    })\r\n  }\r\n\r\n  data.forEach((row, index) => {\r\n    const categoryPoints = row.map((d, i) => {\r\n      const value = d.value\r\n      const radian = bgPoints[i].radian\r\n      return getPointCoordinate(radian, (value / max) * radius)\r\n    })\r\n\r\n    sectionAttrs.push({\r\n      index: index,\r\n      name: row.name,\r\n      dataOrigin: row.data,\r\n      lineWidth: 1,\r\n      points: categoryPoints,\r\n      state: row.state,\r\n      close: true,\r\n      strokeColor: colors[index],\r\n      fillColor: colors[index]\r\n    })\r\n  })\r\n\r\n  // 背景网格多边形坐标\r\n  const gridPoints = bgPoints.map((p) => p.point)\r\n  for (let i = 0; i < splitNumber; i++) {\r\n    let scale = 1 - i / splitNumber\r\n    gridAttrs.push({\r\n      scale,\r\n      radius,\r\n      points: gridPoints,\r\n      index: i,\r\n      close: true,\r\n      lineWidth: 1,\r\n      strokeColor: '#DDE0E5',\r\n      anchor: [0.5, 0.5]\r\n    })\r\n  }\r\n\r\n  return { sectionAttrs, axisAttrs, gridAttrs }\r\n}\r\n","import { Group, Polyline, Arc, Label } from 'spritejs'\r\nimport { deepObjectMerge, throttle, jsType } from '@qcharts/utils'\r\nimport BaseVisual from '../../base/BaseVisual'\r\nimport layout from './layout'\r\nimport Point from '../../utils/Point'\r\n\r\nclass Radar extends BaseVisual {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.type = 'radar'\r\n    this.sectionData = []\r\n    this.scaleEl = []\r\n    this.oldPos = null\r\n  }\r\n\r\n  //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理，如果需要新增渲染时的默认值，在该处处理\r\n  get renderAttrs() {\r\n    const attrs = super.renderAttrs\r\n    const { height, width } = attrs.clientRect\r\n    const center = [width / 2, height / 2]\r\n\r\n    const len = Math.min(...center) * attrs.radius\r\n\r\n    return { ...attrs, center, len }\r\n  }\r\n\r\n  // 默认的属性,继承base，正常情况可以删除，建议到theme里面设置默认样式\r\n  defaultAttrs() {\r\n    return {\r\n      layer: 'radar',\r\n      gridType: 'polygon', // 网格类型,polygon,circle\r\n      splitNumber: 4, // 网格层次\r\n      startAngle: 270, // 起始角度\r\n      radius: 0.6, // 雷达图半径\r\n      labelOffset: 7 // 文字偏移\r\n    }\r\n  }\r\n\r\n  getPolylineAnimation(toPoints, state, index) {\r\n    const zeroPoints = new Array(toPoints.length).fill([0, 0])\r\n    const preData = this.sectionData[index] || { animation: { to: { points: zeroPoints } } }\r\n    const animation = {\r\n      from: { points: preData.animation.to.points },\r\n      to: { points: toPoints }\r\n    }\r\n    // disabled的时候缩回原点并透明\r\n    if (state === 'disabled') {\r\n      animation.to.points = zeroPoints\r\n    }\r\n    return animation\r\n  }\r\n\r\n  getRenderData() {\r\n    const dataSet = this.dataset\r\n    // // FIXME 数据筛选之前先按照label进行排序?是否需要？\r\n    const { len, splitNumber, startAngle, labelOffset } = this.renderAttrs\r\n    const colors = this.theme.colors\r\n\r\n    const { sectionAttrs, axisAttrs, gridAttrs } = layout(\r\n      [...dataSet.rows],\r\n      len,\r\n      splitNumber,\r\n      startAngle,\r\n      labelOffset,\r\n      colors\r\n    )\r\n\r\n    return { sectionAttrs, axisAttrs, gridAttrs }\r\n  }\r\n\r\n  processData() {\r\n    const { sectionAttrs, ...otherData } = this.getRenderData()\r\n    const processSectionAttrs = sectionAttrs.map((attr, i) => {\r\n      const { points, state, ...otherAttrs } = attr\r\n      const { style, hoverStyle } = this.getStyle('section', attr, [...attr.dataOrigin], i)\r\n      let stateStyle = state === 'hover' ? hoverStyle : {}\r\n      const animation = this.getPolylineAnimation(points, state, i)\r\n      return deepObjectMerge(otherAttrs, { state }, { animation }, style, stateStyle)\r\n    })\r\n    return { ...otherData, sectionAttrs: processSectionAttrs }\r\n  }\r\n\r\n  beforeRender() {\r\n    super.beforeRender()\r\n    const renderData = this.processData()\r\n    this.sectionData = [...renderData.sectionAttrs]\r\n    return renderData\r\n  }\r\n\r\n  beforeUpdate() {\r\n    super.beforeUpdate()\r\n    const updateData = this.processData()\r\n    if (updateData.sectionAttrs) {\r\n      const len = Math.max(this.sectionData.length, updateData.sectionAttrs.length)\r\n      for (let i = 0; i < len; i++) {\r\n        this.sectionData[i] = updateData.sectionAttrs[i]\r\n      }\r\n    }\r\n    this.sectionData = [...updateData.sectionAttrs]\r\n    return updateData\r\n  }\r\n\r\n  rendered() {}\r\n\r\n  getScaleAnimation(toScale) {\r\n    return {\r\n      from: { scale: 0 },\r\n      to: { scale: toScale }\r\n    }\r\n  }\r\n\r\n  getStyle(type, attr, data, index) {\r\n    return {\r\n      style: this.style(type)(attr, data, index) || {},\r\n      hoverStyle: this.style(`${type}:hover`)(attr, data, index) || {}\r\n    }\r\n  }\r\n\r\n  isSamePoints(fromPts, toPts) {\r\n    return fromPts.toString() === toPts.toString()\r\n  }\r\n\r\n  renderGrid(gridAttrs) {\r\n    const { gridType } = this.renderAttrs\r\n    const GridShape = gridType === 'circle' ? Arc : Polyline\r\n    return gridAttrs.map((attr, i) => {\r\n      const animation = this.scaleEl.length > 0 ? {} : this.getScaleAnimation(attr.scale)\r\n      const { style } = this.getStyle('grid', attr, null, i)\r\n      if (style === false) {\r\n        return\r\n      }\r\n      return <GridShape {...attr} {...style} animation={animation} />\r\n    })\r\n  }\r\n\r\n  renderAxisLabel(attrs, i) {\r\n    const calcAnchor = radian => {\r\n      const x = 0.5 - Math.cos(radian)\r\n      const y = 0.5 - Math.sin(radian)\r\n      return [x, y]\r\n    }\r\n    const { label, labelPos, radian } = attrs\r\n    const anchor = calcAnchor(radian)\r\n    const attr = {\r\n      text: label,\r\n      pos: labelPos,\r\n      color: '#67728C',\r\n      radian,\r\n      anchor,\r\n      fontSize: 12\r\n    }\r\n    const animation = this.scaleEl.length > 0 ? {} : this.getScaleAnimation(1)\r\n    const { style } = this.getStyle('label', attr, { text: attr.label, radian }, i)\r\n    if (style === false) {\r\n      return\r\n    }\r\n    return <Label {...attr} {...style} animation={animation} />\r\n  }\r\n\r\n  renderAxisScale(attrs, index) {\r\n    const getPt = attrs => {\r\n      const { points, splitNumber, maxScale } = attrs\r\n      const [x, y] = points[1]\r\n      const perNum = maxScale / splitNumber\r\n      return [[x / splitNumber, y / splitNumber], perNum]\r\n    }\r\n    const [[perX, perY], perNum] = getPt(attrs)\r\n    let labels = []\r\n    const display = index === 0 ? 'block' : 'none'\r\n    const common = {\r\n      fontSize: 12,\r\n      anchor: [1, 0.5],\r\n      translate: [-5, 0],\r\n      display\r\n    }\r\n    for (let i = 0; i < attrs.splitNumber + 1; i++) {\r\n      let point = [perX * i, perY * i]\r\n      let text = perNum * i\r\n      let attr = {\r\n        text,\r\n        color: '#67728C',\r\n        pos: point,\r\n        ...common\r\n      }\r\n      const { style } = this.getStyle('scale', attr, { text, index }, i)\r\n      if (style === false) {\r\n        return\r\n      }\r\n      if (attr.display !== 'none') {\r\n        let animation = {}\r\n        const elIndex = index * attrs.splitNumber + i\r\n        const preEl = this.scaleEl[elIndex]\r\n        if (preEl) {\r\n          if (preEl.text !== text) {\r\n            animation = {\r\n              from: { text: preEl.text },\r\n              to: { text },\r\n              formatter: attr => {\r\n                attr.text = attr.text.toFixed(0)\r\n                return attr\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          animation = {\r\n            from: { pos: [0, 0] },\r\n            to: { pos: point }\r\n          }\r\n        }\r\n        this.scaleEl[i] = { text: Number(text.toFixed(0)) }\r\n        labels.push(<Label {...attr} {...style} animation={animation} />)\r\n      }\r\n    }\r\n    return labels\r\n  }\r\n\r\n  renderAxis(axisAttrs) {\r\n    const animation = this.scaleEl.length > 0 ? {} : this.getScaleAnimation(1)\r\n    return axisAttrs.map((attr, i) => {\r\n      const { style } = this.getStyle('axis', attr, { text: attr.label }, i)\r\n      if (style === false) {\r\n        return\r\n      }\r\n      return (\r\n        <Group>\r\n          <Polyline {...attr} {...style} animation={animation} />\r\n          {this.renderAxisLabel(attr, i)}\r\n          {this.renderAxisScale(attr, i)}\r\n        </Group>\r\n      )\r\n    })\r\n  }\r\n\r\n  renderPoints(sectionAttrs) {\r\n    const allPoints = sectionAttrs.map(attrs => {\r\n      const { animation: secAnimation, dataOrigin, strokeColor, state } = attrs\r\n      const prePoints = secAnimation && secAnimation.from && secAnimation.from.points\r\n      const toPoints = secAnimation && secAnimation.to && secAnimation.to.points\r\n      return toPoints.map((point, i) => {\r\n        const attr = {\r\n          pos: point,\r\n          fillColor: strokeColor,\r\n          radius: 2,\r\n          dataOrigin: dataOrigin[i]\r\n        }\r\n        const { style, hoverStyle } = this.getStyle('point', attr, { ...attr.dataOrigin }, i)\r\n        if (style === false) {\r\n          return\r\n        }\r\n\r\n        let animation = {\r\n          from: { pos: [0, 0], opacity: 1 },\r\n          to: { pos: point, opacity: 1 }\r\n        }\r\n\r\n        if (prePoints && prePoints[i]) {\r\n          if (!this.isSamePoints(prePoints[i], point)) {\r\n            animation.from.pos = prePoints[i]\r\n          } else {\r\n            animation.from.pos = point\r\n          }\r\n        }\r\n        if (state === 'disabled') {\r\n          animation.to.opacity = 0\r\n        }\r\n        const stateStyle = state === 'hover' ? hoverStyle : {}\r\n        return <Point {...attr} {...style} {...stateStyle} animation={animation} zIndex={99} />\r\n      })\r\n    })\r\n\r\n    return allPoints.reduce((pre, cur) => pre.concat(cur), [])\r\n  }\r\n\r\n  renderSection(sectionAttrs) {\r\n    return sectionAttrs.map((attr, i) => {\r\n      const { animation, ...otherAttr } = attr\r\n      return <Polyline zIndex={9 + i} {...otherAttr} animation={animation} onMouseenter={this.onMouseenter} onMouseleave={this.onMouseleave} />\r\n    })\r\n  }\r\n\r\n  onMouseenter = throttle(\r\n    (event, el) => {\r\n      this.dataset.resetState()\r\n      const name = el.attributes.name\r\n      this.dataset.rows\r\n        .filter(row => row.state !== 'disabled')\r\n        .forEach(row => {\r\n          row.state = row.name === name ? 'hover' : 'default'\r\n        })\r\n    },\r\n    16,\r\n    true\r\n  )\r\n  onMouseleave() {\r\n    this.dataset.resetState()\r\n    this.dataset.rows.filter(row => row.state !== 'disabled').forEach(row => row.state === 'default')\r\n  }\r\n\r\n  render({ sectionAttrs, axisAttrs, gridAttrs }) {\r\n    const { center, clientRect } = this.renderAttrs\r\n    const gAnimation = {\r\n      from: { pos: this.oldPos ? this.oldPos : center },\r\n      to: { pos: center }\r\n    }\r\n    this.oldPos = center\r\n    return (\r\n      <Group pos={[clientRect.left, clientRect.top]} size={[clientRect.width, clientRect.height]}>\r\n        <Group pos={center} animation={gAnimation}>\r\n          {this.renderGrid(gridAttrs)}\r\n          {this.renderAxis(axisAttrs)}\r\n          {this.renderSection(sectionAttrs)}\r\n          {this.renderPoints(sectionAttrs)}\r\n        </Group>\r\n      </Group>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Radar\r\n","import { axis } from \"../../utils/axis\"\r\nexport default function layout(arr, attrs) {\r\n  // 输入\r\n  const data = arr\r\n  const { stack, splitNumber, clientRect } = attrs\r\n  const { width, height } = clientRect\r\n  const barSize = [width, height]\r\n  const transpose = attrs.transpose || false\r\n  const groupGap = attrs.groupGap || 0\r\n  const stackGap = attrs.stackGap || 0\r\n  let barWidth = attrs.barWidth || 0\r\n  // 输出\r\n  const barData = []\r\n  const groupData = []\r\n  const textData = []\r\n  const bgPillarAttr = { opacity: 0, bgcolor: \"#000\" }\r\n\r\n  const valueAxis = axis.call(this, { dataSet: data, stack, splitNumber })\r\n  if (!valueAxis || !valueAxis.length) {\r\n    return { barData, groupData, textData }\r\n  }\r\n  const tableSize = transpose\r\n    ? { label: barSize[1], value: barSize[0] }\r\n    : { label: barSize[0], value: barSize[1] }\r\n  const axisValueMax = Math.max.apply(this, valueAxis)\r\n  const axisValueMin = Math.min.apply(this, valueAxis)\r\n  const POSITIVE_RATIO = axisValueMax / (axisValueMax - axisValueMin) // 正负柱子高度比例\r\n  const GROUP_BAR_NUM = computerLegend(data) // 图例显示个数\r\n\r\n  const GROUP_NUM = data[0].length\r\n  let gap = 0\r\n  // 柱子宽度，根据数据绘制类型计算，是否分组，是否旋转\r\n  if (barWidth === 0) {\r\n    barWidth = stack\r\n      ? (tableSize.label * 0.5) / GROUP_NUM\r\n      : (tableSize.label * 0.5) / (GROUP_NUM * GROUP_BAR_NUM)\r\n\r\n    gap = stack ? barWidth : barWidth * GROUP_BAR_NUM\r\n  } else {\r\n    gap = stack\r\n      ? (tableSize.label - barWidth * GROUP_NUM) / GROUP_NUM\r\n      : (tableSize.label -\r\n          barWidth * GROUP_BAR_NUM * GROUP_NUM -\r\n          groupGap * (GROUP_BAR_NUM - 1) * GROUP_NUM) /\r\n        GROUP_NUM\r\n  }\r\n\r\n  const BAR_HEIGHT_FACTOR = tableSize.value / (axisValueMax - axisValueMin)\r\n  if (!stack) {\r\n    // 分组柱状图\r\n    for (let i = 0, len = GROUP_NUM; i < len; i++) {\r\n      let flag = 0 // 计算当前柱子前面有几根被隐藏\r\n      let value = 0\r\n      let rawValue = 0\r\n      let gpData = { rects: [] }\r\n      // 计算单根柱子\r\n      for (let j = 0, lenj = data.length; j < lenj; j++) {\r\n        // if (data[j][i].state !== \"disabled\") {\r\n        //   data[j][i].state = \"default\";\r\n        // }\r\n        rawValue = data[j][i].value\r\n        value = data[j][i].layoutScaleValue\r\n        let barHeight = BAR_HEIGHT_FACTOR * Math.abs(value)\r\n        let rect = {\r\n          anchor: [\r\n            transpose && value < 0 ? 1 : 0,\r\n            transpose || value < 0 ? 0 : 1,\r\n          ],\r\n          size: transpose\r\n            ? [barHeight, barWidth - 1]\r\n            : [barWidth - 1, barHeight],\r\n          pos: transpose\r\n            ? [\r\n                tableSize.value * (1 - POSITIVE_RATIO),\r\n                gap / 2 +\r\n                  (barWidth + groupGap) * (j - flag) +\r\n                  (barWidth * GROUP_BAR_NUM +\r\n                    groupGap * (GROUP_BAR_NUM - 1) +\r\n                    gap) *\r\n                    i,\r\n              ]\r\n            : [\r\n                gap / 2 +\r\n                  (barWidth + groupGap) * (j - flag) +\r\n                  (barWidth * GROUP_BAR_NUM +\r\n                    groupGap * (GROUP_BAR_NUM - 1) +\r\n                    gap) *\r\n                    i,\r\n                tableSize.value * POSITIVE_RATIO,\r\n              ],\r\n        }\r\n        if (data[j][i].state === \"disabled\") {\r\n          rect.size = transpose ? [0, rect.size[1]] : [rect.size[0], 0]\r\n          flag++\r\n        } else {\r\n          gpData.rects.push(rect)\r\n        }\r\n        let label = {\r\n          opacity: data[j][i].state !== \"disabled\" ? 1 : 0,\r\n          text: rawValue.toString(),\r\n          anchor: [transpose && value < 0 ? 1 : 0, 0.5],\r\n          pos: transpose\r\n            ? [\r\n                tableSize.value * (1 - POSITIVE_RATIO),\r\n                gap / 2 +\r\n                  (barWidth + groupGap) * (j - flag) +\r\n                  (barWidth * GROUP_BAR_NUM +\r\n                    groupGap * (GROUP_BAR_NUM - 1) +\r\n                    gap) *\r\n                    i +\r\n                  barWidth * 0.5,\r\n              ]\r\n            : [\r\n                gap / 2 +\r\n                  (barWidth + groupGap) * (j - flag) +\r\n                  (barWidth * GROUP_BAR_NUM +\r\n                    groupGap * (GROUP_BAR_NUM - 1) +\r\n                    gap) *\r\n                    i +\r\n                  barWidth * 0.5,\r\n                tableSize.value * POSITIVE_RATIO,\r\n              ],\r\n          rotate: transpose ? 0 : value < 0 ? 90 : 270,\r\n          paddingLeft: 8,\r\n        }\r\n        barData.push(rect)\r\n        textData.push(label)\r\n      }\r\n      // 柱子整体属性\r\n      gpData = Object.assign(gpData, {\r\n        // title: data[0][i]['_x'],\r\n        pos: transpose\r\n          ? [\r\n              0,\r\n              (gap +\r\n                barWidth * GROUP_BAR_NUM +\r\n                groupGap * (GROUP_BAR_NUM - 1)) *\r\n                i,\r\n            ]\r\n          : [\r\n              (gap +\r\n                barWidth * GROUP_BAR_NUM +\r\n                groupGap * (GROUP_BAR_NUM - 1)) *\r\n                i,\r\n              0,\r\n            ],\r\n        size: transpose\r\n          ? [\r\n              tableSize.value,\r\n              barWidth * GROUP_BAR_NUM + groupGap * (GROUP_BAR_NUM - 1) + gap,\r\n            ]\r\n          : [\r\n              barWidth * GROUP_BAR_NUM + groupGap * (GROUP_BAR_NUM - 1) + gap,\r\n              tableSize.value,\r\n            ],\r\n        ...bgPillarAttr,\r\n      })\r\n      groupData.push(gpData)\r\n    }\r\n  } else {\r\n    // 堆叠柱状图\r\n    for (let i = 0, len = GROUP_NUM; i < len; i++) {\r\n      let heightSumUp = 0\r\n      let heightSumDown = 0\r\n      let value = 0\r\n      let gpData = { rects: [] }\r\n      // 计算单根柱子\r\n      for (let j = 0, lenj = data.length; j < lenj; j++) {\r\n        let stackGapTemp = stackGap\r\n        // if (data[j][i].state !== \"disabled\") {\r\n        //   data[j][i].state = \"default\";\r\n        // }\r\n        value = data[j][i].layoutScaleValue\r\n        let barHeight = BAR_HEIGHT_FACTOR * Math.abs(value)\r\n        if (barHeight === 0) {\r\n          stackGapTemp = 0\r\n        }\r\n        let posY =\r\n          value < 0\r\n            ? tableSize.value * POSITIVE_RATIO + heightSumDown\r\n            : tableSize.value * POSITIVE_RATIO - heightSumUp\r\n        let posX =\r\n          value < 0\r\n            ? tableSize.value * (1 - POSITIVE_RATIO) - heightSumDown\r\n            : tableSize.value * (1 - POSITIVE_RATIO) + heightSumUp\r\n        let posLabelY =\r\n          value < 0\r\n            ? tableSize.value * POSITIVE_RATIO + heightSumDown + barHeight\r\n            : tableSize.value * POSITIVE_RATIO - heightSumUp\r\n        let rect = {\r\n          anchor: [\r\n            transpose && value < 0 ? 1 : 0,\r\n            transpose || value < 0 ? 0 : 1,\r\n          ],\r\n          size: transpose\r\n            ? [barHeight - stackGapTemp, barWidth]\r\n            : [barWidth, barHeight - stackGapTemp],\r\n          pos: transpose\r\n            ? [posX, gap / 2 + (barWidth + gap) * i]\r\n            : [gap / 2 + (barWidth + gap) * i, posY],\r\n          index: j,\r\n        }\r\n        let paddingAttrs = transpose ? \"paddingLeft\" : \"paddingBottom\"\r\n        let label = {\r\n          opacity: data[j][i].state !== \"disabled\" ? 1 : 0,\r\n          text: value.toString(),\r\n          anchor: transpose ? (value < 0 ? [1, 0.5] : [0, 0.5]) : [0.5, 1],\r\n          pos: transpose\r\n            ? [posX, +(gap + barWidth) / 2 + (barWidth + gap) * i]\r\n            : [(gap + barWidth) / 2 + (barWidth + gap) * i, posLabelY],\r\n        }\r\n        label[paddingAttrs] = 8\r\n        if (data[j][i].state === \"disabled\") {\r\n          rect.size = transpose ? [0, rect.size[1]] : [rect.size[0], 0]\r\n        } else {\r\n          value < 0\r\n            ? (heightSumDown = heightSumDown + barHeight)\r\n            : (heightSumUp = heightSumUp + barHeight)\r\n          gpData.rects.push(rect)\r\n        }\r\n        textData.push(label)\r\n        barData.push(rect)\r\n      }\r\n      // 柱子整体属性\r\n      gpData = Object.assign(gpData, {\r\n        pos: transpose ? [0, (gap + barWidth) * i] : [(gap + barWidth) * i, 0],\r\n        size: transpose\r\n          ? [tableSize.value, barWidth + gap]\r\n          : [barWidth + gap, tableSize.value],\r\n        ...bgPillarAttr,\r\n      })\r\n      groupData.push(gpData)\r\n    }\r\n  }\r\n\r\n  return { textData, barData, groupData }\r\n}\r\n\r\nfunction computerLegend(data) {\r\n  let flag = 0\r\n  for (let i = 0, len = data.length; i < len; i++) {\r\n    if (data[i][0].state !== \"disabled\") {\r\n      flag++\r\n    }\r\n  }\r\n  if (flag === 0) {\r\n    // console.warn('data invalid!')\r\n  }\r\n  return flag || 1\r\n}\r\n","import Base from '../../base/BaseVisual'\r\nimport { Group, Sprite, Label } from 'spritejs'\r\nimport { getStyle } from '@/utils/getStyle'\r\nimport { deepObjectMerge, throttle } from '@qcharts/utils'\r\nimport layout from './layout'\r\nimport filterClone from 'filter-clone'\r\nclass Bar extends Base {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.type = 'bar'\r\n    this.pillars = null\r\n    this.texts = null\r\n    this.groups = null\r\n    this.fromTos = null\r\n    this.hoverIndex = -1\r\n  }\r\n  get renderAttrs() {\r\n    //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理，如果需要新增渲染时的默认值，在该处处理\r\n    let attrs = super.renderAttrs\r\n    return attrs\r\n  }\r\n  beforeRender() {\r\n    //渲染前的处理函数，返回lines,继承base---------before\r\n    let { arrLayout } = this.getRenderData()\r\n    let barData = arrLayout.barData.map(item => {\r\n      return {\r\n        attrs: item,\r\n        from: {\r\n          size: this.renderAttrs.transpose ? [0, item.size[1]] : [item.size[0], 0]\r\n        },\r\n        to: {\r\n          size: item.size\r\n        }\r\n      }\r\n    })\r\n    let textData = arrLayout.textData.map(item => {\r\n      return {\r\n        attrs: item,\r\n        from: {\r\n          pos: item.pos\r\n        },\r\n        to: {\r\n          pos: item.pos\r\n        }\r\n      }\r\n    })\r\n    this.pillars = barData\r\n    this.groups = arrLayout.groupData\r\n    this.texts = textData\r\n    return { barData, textData, groupData: arrLayout.groupData }\r\n  }\r\n  beforeUpdate() {\r\n    const pillars = this.pillars\r\n    const texts = this.texts\r\n    let { arrLayout } = this.getRenderData()\r\n    let barData = arrLayout.barData.map((nextPillar, i) => {\r\n      let prev = pillars[i] ? pillars[i] : arrLayout.barData[i - 1]\r\n      if (!prev) {\r\n        prev = {\r\n          size: [0, 0],\r\n          pos: nextPillar.pos,\r\n          labelAttrs: null\r\n        }\r\n      }\r\n      return {\r\n        attrs: nextPillar,\r\n        from: {\r\n          size: prev.attrs.disable ? (this.attr('transpose') ? [0, prev.attrs.size[1]] : [prev.attrs.size[0], 0]) : prev.attrs.size,\r\n          pos: prev.attrs.pos\r\n        },\r\n        to: {\r\n          size: nextPillar.size,\r\n          pos: nextPillar.pos\r\n        }\r\n      }\r\n    })\r\n    let textData = arrLayout.textData.map((nextText, i) => {\r\n      let prev = texts[i] ? texts[i] : arrLayout.textData[i - 1]\r\n      if (!prev) {\r\n        prev = {\r\n          pos: nextPillar.pos\r\n        }\r\n      }\r\n      return {\r\n        attrs: nextText,\r\n        from: {\r\n          pos: prev.attrs.pos\r\n        },\r\n        to: {\r\n          pos: nextText.pos\r\n        }\r\n      }\r\n    })\r\n    this.pillars = barData\r\n    this.groups = arrLayout.groupData\r\n    this.texts = textData\r\n    return { barData, textData, groupData: arrLayout.groupData }\r\n  }\r\n  getRenderData() {\r\n    let renderAttrs = this.renderAttrs\r\n    let renderData = this.dataset[renderAttrs.layoutBy]\r\n    const dataLength = renderData.length > 1 ? renderData.length : renderData[0].length\r\n    let arrLayout = layout.call(this, renderData, renderAttrs)\r\n    let colors = this.theme.colors\r\n    let styles = this.renderStyles\r\n    arrLayout.barData = arrLayout.barData.map((bar, i) => {\r\n      // let style = this.style(\"pillar\")(bar.attrs, this.dataset.rows[i], i);\r\n      // let barStyle = deepObjectMerge(\r\n      //   { bgcolor: bar.bgcolor || colors[i % dataLength] },\r\n      //   styles.bar,\r\n      //   style\r\n      // );\r\n      // bar = deepObjectMerge(bar, barStyle);\r\n      return bar\r\n    })\r\n    return { arrLayout }\r\n  }\r\n  rendered() {\r\n    //console.log(this.$refs['wrap'])\r\n  }\r\n  defaultAttrs() {\r\n    let renderData = this.dataset['rows']\r\n    let stateArray = Array.from({ length: renderData[0].length }, () => 'defalut')\r\n    // 默认的属性,继承base，正常情况可以删除，建议到theme里面设置默认样式\r\n    return {\r\n      layer: 'bar',\r\n      bgpillarState: stateArray,\r\n      states: {\r\n        bgpillar: {\r\n          animation: { duration: 20 },\r\n          default: { opacity: 0.01 },\r\n          hover: { opacity: 0.1 }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  defaultStyles() {\r\n    // 默认的样式,继承base\r\n    return {\r\n      text: { fontSize: 12, fillColor: '#666' }\r\n    }\r\n  }\r\n  onMousemove = throttle(\r\n    (event, el) => {\r\n      if (this.groups.length && !isNaN(event.x) && !isNaN(event.y)) {\r\n        let curInd = 0\r\n        let [x, y] = el.getOffsetPosition(event.x, event.y)\r\n        if (!this.renderAttrs.transpose) {\r\n          //获取 x轴坐标的刻度\r\n          let width = this.groups[0].size[0]\r\n          //转换canvas坐标到当前group的相对坐标\r\n          curInd = Math.floor(x / width)\r\n        } else {\r\n          let width = this.groups[0].size[1]\r\n          //转换canvas坐标到当前group的相对坐标\r\n          curInd = Math.floor(y / width)\r\n        }\r\n        if (curInd < 1) {\r\n          curInd = 0\r\n        } else if (curInd > this.groups.length - 1) {\r\n          curInd = this.groups.length - 1\r\n        }\r\n        if (this.hoverIndex !== curInd) {\r\n          let { bgpillarState } = this.renderAttrs\r\n          bgpillarState[curInd] = 'hover'\r\n          bgpillarState[this.hoverIndex] = 'defualt'\r\n          this.attr('bgpillarState', bgpillarState)\r\n          this.dataset.resetState()\r\n          this.dataset.cols[curInd].state = 'hover'\r\n          this.hoverIndex = curInd\r\n        }\r\n      }\r\n    },\r\n    16,\r\n    true\r\n  )\r\n  onMouseleave(e, el) {\r\n    this.dataset.resetState()\r\n    let { bgpillarState } = this.renderAttrs\r\n    bgpillarState[this.hoverIndex] = 'defualt'\r\n    this.attr('bgpillarState', bgpillarState)\r\n    this.hoverIndex = -1\r\n  }\r\n  myClick = function() {\r\n    console.log('myclick')\r\n  }\r\n\r\n  render(data) {\r\n    let { clientRect, bgpillarState, states } = this.renderAttrs\r\n    const styles = this.renderStyles\r\n    let renderData = this.dataset[this.renderAttrs.layoutBy]\r\n    const dataLength = renderData.length > 1 ? renderData.length : renderData[0].length\r\n    let colors = this.theme.colors\r\n    return (\r\n      <Group\r\n        pos={[clientRect.left, clientRect.top]}\r\n        size={[clientRect.width, clientRect.height]}\r\n        onMouseleave={this.onMouseleave}\r\n        onMouseenter={this.onMousemove}\r\n        onMousemove={this.onMousemove}\r\n        onClick={this.myClick}\r\n        // onMousemove={throttle(this.onMousemove)}\r\n      >\r\n        <Group ref=\"pillars\" class=\"pillars-group\">\r\n          {data.barData.map((pillar, ind) => {\r\n            let cell = this.dataset.rows[ind % renderData.length][Math.floor(ind / renderData.length)]\r\n            const style = getStyle(this, 'pillar', [{ bgcolor: colors[ind % dataLength], ...pillar.attrs }, styles.bar], [cell.data, Math.floor(ind / renderData.length), ind % renderData.length])\r\n            const hoverStyle = getStyle(this, 'pillar:hover', [], [cell.data, Math.floor(ind / renderData.length), ind % renderData.length])\r\n            if (cell.state === 'hover') {\r\n              deepObjectMerge(style, hoverStyle)\r\n            }\r\n            return <Sprite {...pillar.attrs} {...pillar.from} {...style} animation={{ from: pillar.from, to: pillar.to }} />\r\n          })}\r\n          {data.textData.map((text, ind) => {\r\n            let barAttrs = filterClone(data.barData[ind].attrs, ['pos', 'size'])\r\n            let textStyle = getStyle(this, 'text', [{ barAttrs: barAttrs }, styles.text], [this.dataset.rows[ind % renderData.length][Math.floor(ind / renderData.length)].data, Math.floor(ind / renderData.length), ind % renderData.length])\r\n            //console.log('aaa', textStyle, styles.text)\r\n            textStyle = filterClone(textStyle, [], ['barAttrs'])\r\n            if (textStyle.pos) {\r\n              this.texts[ind].attrs.pos = textStyle.pos\r\n              text.to.pos = textStyle.pos\r\n            }\r\n\r\n            return textStyle === false ? null : (\r\n              <Label\r\n                {...text.attrs}\r\n                {...textStyle}\r\n                animation={{\r\n                  from: text.from,\r\n                  to: text.to\r\n                }}\r\n              />\r\n            )\r\n          })}\r\n        </Group>\r\n        <Group ref=\"bgpillar\" class=\"bgpillars-group\">\r\n          {data.groupData.map((pillar, ind) => {\r\n            let style = getStyle(this, 'backgroundpillar', [], [this.dataset.rows[ind % renderData.length], Math.floor(ind / renderData.length)])\r\n            return style === false ? null : <Sprite state={bgpillarState[ind]} states={states.bgpillar} {...pillar} {...style} />\r\n          })}\r\n        </Group>\r\n      </Group>\r\n    )\r\n  }\r\n}\r\nexport default Bar\r\n","import { axis } from \"../../utils/axis\";\r\n\r\nexport default function layout(arr, attrs) {\r\n  // 输入\r\n  const data = arr;\r\n  const { stack, splitNumber, clientRect, groupPadAngle, activeOffset } = attrs;\r\n  const { width, height } = clientRect;\r\n  const barSize = [width, height];\r\n  const groupGap = groupPadAngle || 0;\r\n  const stackGap = attrs.stackGap || 0;\r\n\r\n  const radius = attrs.radius || 1;\r\n  const barInnerRadius = attrs.innerRadius || 0;\r\n  const padAngle = attrs.padAngle;\r\n  // 输出\r\n  const barData = [];\r\n\r\n  const bgPillarAttr = { opacity: 0.01, fillColor: \"#FF0000\" };\r\n\r\n  // const valueAxis = getAxis(stack, data)\r\n  const valueAxis = axis.call(this, { dataSet: data, stack, splitNumber });\r\n  if (!valueAxis || !valueAxis.length) {\r\n    return { barData };\r\n  }\r\n\r\n  const tableSize = Math.min(barSize[0], barSize[1]);\r\n  const axisValueMax = Math.max.apply(this, valueAxis);\r\n  const axisValueMin = Math.min.apply(this, valueAxis);\r\n  const POSITIVE_RATIO = axisValueMax / (axisValueMax - axisValueMin); // 正负柱子高度比例\r\n  const GROUP_BAR_NUM = computerLegend(data); // 图例显示个数\r\n\r\n  const GROUP_NUM = data[0].length;\r\n  const BAR_MAX_HEIGHT = 0.5 * radius * tableSize;\r\n  const BAR_HEIGHT_FACTOR = BAR_MAX_HEIGHT / (axisValueMax - axisValueMin);\r\n  if (!stack) {\r\n    // 分组柱状图\r\n    for (let i = 0, len = GROUP_NUM; i < len; i++) {\r\n      let flag = 0; // 计算当前柱子前面有几根被隐藏\r\n      let value = 0;\r\n      let gpData = { rects: [] };\r\n      let groupAngle = (Math.PI * 2 - GROUP_NUM * groupGap) / GROUP_NUM;\r\n      // 计算单根柱子\r\n      for (let j = 0, lenj = data.length; j < lenj; j++) {\r\n        // if (data[j][i].disabled !== true) {\r\n        //   data[j][i].disabled = false;\r\n        // }\r\n        let barAngle = groupAngle / GROUP_BAR_NUM;\r\n        let startAngle =\r\n          (groupAngle + groupGap) * i + barAngle * (j - flag) - Math.PI * 0.5;\r\n        value = data[j][i].layoutScaleValue;\r\n        let barHeight = BAR_HEIGHT_FACTOR * value;\r\n        let innerRadius =\r\n          BAR_MAX_HEIGHT * (1 - POSITIVE_RATIO) +\r\n          barInnerRadius * tableSize * 0.5;\r\n        //默认中心坐标偏移量0\r\n        let offsetPos = [0, 0];\r\n        let rect = {\r\n          innerRadius: innerRadius,\r\n          outerRadius: innerRadius + barHeight,\r\n          startAngle: (startAngle * 180) / Math.PI,\r\n          endAngle: ((startAngle + barAngle) * 180) / Math.PI,\r\n          value: data[j][i].value,\r\n          text: data[j][i].text,\r\n          state: data[j][i].state,\r\n          data: data[j][i].data,\r\n          id: i * lenj + j,\r\n          offsetPos: offsetPos,\r\n        };\r\n        if (rect.state === \"hover\") {\r\n          let curAngle = ((rect.startAngle + rect.endAngle) / 2) % 360;\r\n          rect.bisectorRadian = transRadius(curAngle);\r\n          //角平分,角度转弧度,默认是顺时针，角度为相反\r\n          rect.offsetPos = [\r\n            activeOffset * Math.cos(rect.bisectorRadian),\r\n            activeOffset * Math.sin(rect.bisectorRadian),\r\n          ];\r\n          //选中状态\r\n        }\r\n        if (rect.state === \"disabled\") {\r\n          rect.endAngle = rect.startAngle;\r\n          rect.radius = 0;\r\n          rect.opacity = 0;\r\n          flag++;\r\n        } else {\r\n          rect.opacity = 1;\r\n          gpData.rects.push(rect);\r\n        }\r\n        if (GROUP_NUM < 2) {\r\n          delete rect.startAngle;\r\n          delete rect.endAngle;\r\n        }\r\n        barData.push(rect);\r\n      }\r\n    }\r\n  } else {\r\n    // 堆叠柱状图\r\n    for (let i = 0, len = GROUP_NUM; i < len; i++) {\r\n      let heightSumUp = 0;\r\n      let heightSumDown = 0;\r\n      let value = 0;\r\n      let gpData = { rects: [] };\r\n      let groupAngle = (Math.PI * 2 - GROUP_NUM * groupGap) / GROUP_NUM;\r\n      // 计算单根柱子\r\n      for (let j = 0, lenj = data.length; j < lenj; j++) {\r\n        // if (data[j][i].disabled !== true) {\r\n        //   data[j][i].disabled = false;\r\n        // }\r\n        let startAngle = (groupAngle + groupGap) * i - Math.PI * 0.5;\r\n        value = data[j][i].value;\r\n        let barHeight = BAR_HEIGHT_FACTOR * value;\r\n        let innerRadius =\r\n          value < 0\r\n            ? BAR_MAX_HEIGHT * (1 - POSITIVE_RATIO) - heightSumDown\r\n            : BAR_MAX_HEIGHT * (1 - POSITIVE_RATIO) + heightSumUp;\r\n        innerRadius = innerRadius + barInnerRadius * tableSize * 0.5;\r\n        let offsetPos = [0, 0];\r\n        let rect = {\r\n          innerRadius: innerRadius,\r\n          outerRadius: innerRadius + barHeight - stackGap,\r\n          startAngle: (startAngle * 180) / Math.PI,\r\n          endAngle: ((startAngle + groupAngle) * 180) / Math.PI,\r\n          value: data[j][i].value,\r\n          text: data[j][i].text,\r\n          state: data[j][i].state,\r\n          data: data[j][i].data,\r\n          offsetPos: offsetPos,\r\n        };\r\n\r\n        if (rect.state === \"hover\") {\r\n          rect.strokeColor = \"#F00\";\r\n        } else {\r\n          delete rect.strokeColor;\r\n        }\r\n        if (rect.state === \"disabled\") {\r\n          rect.opacity = 0;\r\n        } else {\r\n          rect.opacity = 1;\r\n          value < 0\r\n            ? (heightSumDown = heightSumDown - barHeight)\r\n            : (heightSumUp = heightSumUp + barHeight);\r\n          gpData.rects.push(rect);\r\n        }\r\n        barData.push(rect);\r\n      }\r\n    }\r\n  }\r\n  // attachPadAngleOfArr(barData, padAngle)\r\n  return { barData };\r\n}\r\n\r\nfunction computerLegend(data) {\r\n  let flag = 0;\r\n  for (let i = 0, len = data.length; i < len; i++) {\r\n    if (data[i][0].state !== \"disabled\") {\r\n      flag++;\r\n    }\r\n  }\r\n  if (flag === 0) {\r\n    // console.warn('data invalid!')\r\n  }\r\n  return flag || 1;\r\n}\r\nexport function transRadius(angle) {\r\n  return (angle / 180) * Math.PI;\r\n}\r\n","import Base from \"../../base/BaseVisual\";\r\nimport { Group, Ring } from \"spritejs\";\r\nimport { deepObjectMerge } from \"@qcharts/utils\";\r\nimport layout from \"./layout\";\r\nimport { getStyle } from \"@/utils/getStyle\";\r\nimport filterClone from \"filter-clone\";\r\nclass PolarBar extends Base {\r\n  constructor(attrs) {\r\n    super(attrs);\r\n    this.type = \"polarbar\";\r\n    this.pillars = [];\r\n    this.hoverIndex = -1;\r\n    this.timer = null;\r\n  }\r\n  get renderAttrs() {\r\n    //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理，如果需要新增渲染时的默认值，在该处处理\r\n    let attrs = super.renderAttrs;\r\n    let { height, width, top, left } = attrs.clientRect;\r\n    attrs.pos = [left + width / 2, top + height / 2];\r\n    return attrs;\r\n  }\r\n\r\n  beforeRender() {\r\n    //渲染前的处理函数，返回rings,继承base\r\n    let { arrLayout } = this.getRenderData();\r\n    this.pillars = arrLayout.barData;\r\n    let barData = arrLayout.barData.map((item) => {\r\n      return {\r\n        from: {\r\n          endAngle: item.startAngle,\r\n        },\r\n        to: item,\r\n      };\r\n    });\r\n    return { barData };\r\n  }\r\n  beforeUpdate() {\r\n    const pillars = this.pillars;\r\n    let { pos } = this.renderAttrs;\r\n    let { arrLayout } = this.getRenderData();\r\n    let barData = arrLayout.barData.map((nextPillar, i) => {\r\n      let curPos = [\r\n        pos[0] + nextPillar.offsetPos[0],\r\n        pos[1] + nextPillar.offsetPos[1],\r\n      ];\r\n      nextPillar.pos = curPos;\r\n      return {\r\n        from: { ...pillars[i] },\r\n        to: { ...nextPillar },\r\n      };\r\n    });\r\n    this.pillars = arrLayout.barData;\r\n    return { barData };\r\n  }\r\n  getRenderData() {\r\n    let renderAttrs = this.renderAttrs;\r\n    let renderData = this.dataset[renderAttrs.layoutBy];\r\n    if (!renderData || renderData.length === 0) {\r\n      return { barData: [] };\r\n    }\r\n    const dataLength =\r\n      renderData.length > 1 ? renderData.length : renderData[0].length;\r\n    this.legendArr = Array.from({ length: renderData.length }, () => {\r\n      return 1;\r\n    });\r\n    let arrLayout = layout.call(this, renderData, renderAttrs);\r\n    let colors = this.theme.colors;\r\n    let styles = this.renderStyles;\r\n\r\n    arrLayout.barData.forEach((bar, i) => {\r\n      let style = this.style(\"pillar\")(bar.attrs, this.dataset.rows[i], i);\r\n      bar.fillColor = bar.fillColor || colors[i % dataLength];\r\n      bar.strokeColor = renderAttrs.strokeColor || \"#FFF\";\r\n      bar.pos = renderAttrs.pos;\r\n      if (\r\n        !bar.hasOwnProperty(\"startAngle\") ||\r\n        !bar.hasOwnProperty(\"endAngle\")\r\n      ) {\r\n        bar.lineWidth = 0;\r\n      } else {\r\n        bar.lineWidth = 1;\r\n      }\r\n      let barStyle = deepObjectMerge(\r\n        { bgcolor: bar.bgcolor || colors[i % dataLength] },\r\n        styles.bar,\r\n        style\r\n      );\r\n      bar = deepObjectMerge(bar, barStyle);\r\n    });\r\n    return { arrLayout };\r\n  }\r\n  rendered() {\r\n    //console.log(this.$refs['wrap'])\r\n  }\r\n  defaultAttrs() {\r\n    // 默认的属性,继承base，正常情况可以删除，建议到theme里面设置默认样式\r\n    return {\r\n      layer: \"bar\",\r\n      //选中偏移量基数\r\n      activeOffset: 10,\r\n    };\r\n  }\r\n  defaultStyles() {\r\n    // 默认的样式,继承base\r\n    return {};\r\n  }\r\n\r\n  mouseleave() {\r\n    this.timer = setTimeout(() => {\r\n      this.dataset.resetState();\r\n      this.hoverIndex = -1;\r\n    }, 100);\r\n  }\r\n\r\n  mousemove(e, el) {\r\n    clearTimeout(this.timer);\r\n    // let fun = throttle(function(e, el) {\r\n    let renderData = this.renderData();\r\n    let ind = el.attr(\"_index\");\r\n    let groupInd = Math.floor(ind / renderData.length);\r\n    if (groupInd !== this.hoverIndex) {\r\n      this.dataset.resetState();\r\n      this.dataset[this.renderAttrs.layoutBy === \"rows\" ? \"cols\" : \"rows\"][\r\n        groupInd\r\n      ].state = \"hover\";\r\n      this.hoverIndex = groupInd;\r\n    }\r\n    // }, 30).bind(this);\r\n    // fun(e, el);\r\n  }\r\n  groupMousemove(e, el) {\r\n    console.log(el);\r\n  }\r\n  renderData() {\r\n    let renderAttrs = this.renderAttrs;\r\n    return this.dataset[renderAttrs.layoutBy];\r\n  }\r\n  render(data) {\r\n    let { clientRect, innerRadiusPx, radiusPx } = this.renderAttrs;\r\n    let colors = this.theme.colors;\r\n    let styles = this.renderStyles;\r\n    return (\r\n      <Group class=\"container\" ref=\"wrap\">\r\n        <Group class=\"rings-group\" onMouseleave={this.mouseleave}>\r\n          {data.barData.map((ring, ind) => {\r\n            let style = getStyle(\r\n              this,\r\n              \"sector\",\r\n              [\r\n                {\r\n                  _index: ind,\r\n                },\r\n                styles.sector,\r\n              ],\r\n              [this.dataset.rows[ind], ind]\r\n            );\r\n            return ring.state === \"disabled\" || style === false ? (\r\n              <Node />\r\n            ) : (\r\n              <Ring\r\n                onMousemove={this.mousemove}\r\n                {...style}\r\n                animation={{ from: ring.from, to: ring.to }}\r\n              />\r\n            );\r\n          })}\r\n        </Group>\r\n      </Group>\r\n    );\r\n  }\r\n}\r\nexport default PolarBar;\r\n","import { axis } from \"../../utils/axis\";\r\nexport default function layout(arr, attrs) {\r\n  // 输入\r\n  const data = arr;\r\n  const { align, pyramid, clientRect } = attrs;\r\n  const { width, height } = clientRect;\r\n  // 输出\r\n  const polygons = [];\r\n\r\n  const max = arr[0][0].value;\r\n  const widthFactory = width / max;\r\n  const POLYGON_NUM = computerLegend(data); // 图例显示个数\r\n  let flag = 0; // 计算当前polygon前面有几个被隐藏\r\n  for (let i = 0, len = data.length; i < len; i++) {\r\n    let polygon = { colse: true, lineWidth: 3, points: [] };\r\n    const value = data[i][0].value;\r\n    let offset = 0;\r\n    let textAnchor = [0, 0.5];\r\n    if (align === \"center\") {\r\n      textAnchor = [0.5, 0.5];\r\n      offset = 0.5;\r\n    } else if (align === \"right\") {\r\n      offset = 1;\r\n      textAnchor = [1, 0.5];\r\n    }\r\n    polygon.points.push(\r\n      (max - value) * offset * widthFactory,\r\n      (height * (i - flag)) / POLYGON_NUM\r\n    );\r\n    polygon.points.push(\r\n      (max * offset + value * (1 - offset)) * widthFactory,\r\n      (height * (i - flag)) / POLYGON_NUM\r\n    );\r\n    if (i - flag + 1 < POLYGON_NUM) {\r\n      let counter = 1;\r\n\r\n      while (data[i + counter][0].state === \"disabled\") {\r\n        counter++;\r\n      }\r\n      const nextValue = data[i + counter][0].value;\r\n\r\n      polygon.points.push(\r\n        (max * offset + nextValue * (1 - offset)) * widthFactory,\r\n        (height * (i - flag + 1)) / POLYGON_NUM\r\n      );\r\n      polygon.points.push(\r\n        (max - nextValue) * offset * widthFactory,\r\n        (height * (i - flag + 1)) / POLYGON_NUM\r\n      );\r\n    } else {\r\n      if (pyramid) {\r\n        polygon.points.push(offset * width, height);\r\n      } else {\r\n        polygon.points.push(\r\n          (max * offset + value * (1 - offset)) * widthFactory,\r\n          (height * (i - flag + 1)) / POLYGON_NUM\r\n        );\r\n        polygon.points.push(\r\n          (max - value) * offset * widthFactory,\r\n          (height * (i - flag + 1)) / POLYGON_NUM\r\n        );\r\n      }\r\n    }\r\n    polygon.opacity = 1;\r\n    if (data[i][0].state === \"disabled\") {\r\n      polygon.points[6] = polygon.points[0];\r\n      polygon.points[7] = polygon.points[1];\r\n\r\n      polygon.points[4] = polygon.points[2];\r\n      polygon.points[5] = polygon.points[3];\r\n\r\n      polygon.opacity = 0;\r\n      flag++;\r\n    }\r\n    polygon.labelAttrs = {\r\n      opacity: !data[i][0].state === \"disabled\" ? 1 : 0,\r\n      text: Math.round((100 * value) / max) + \"%\",\r\n      anchor: textAnchor,\r\n      pos: [\r\n        width * offset + (0.5 - offset) * 10,\r\n        ((i - flag + 0.5) * height) / POLYGON_NUM,\r\n      ],\r\n      fillColor: \"#FFF\",\r\n      fontSize: \"12px\",\r\n    };\r\n    polygons.push(polygon);\r\n  }\r\n\r\n  return polygons;\r\n}\r\n\r\nfunction computerLegend(data) {\r\n  let flag = 0;\r\n  for (let i = 0, len = data.length; i < len; i++) {\r\n    if (data[i][0].state !== \"disabled\") {\r\n      flag++;\r\n    }\r\n  }\r\n  if (flag === 0) {\r\n    console.warn(\"data invalid!\");\r\n  }\r\n  return flag || 1;\r\n}\r\n","import Base from \"../../base/BaseVisual\";\r\nimport { Group, Polyline } from \"spritejs\";\r\nimport { deepObjectMerge, throttle } from \"@qcharts/utils\";\r\nimport layout from \"./layout\";\r\nclass Funnel extends Base {\r\n  constructor(attrs) {\r\n    super(attrs);\r\n    this.type = \"funnel\";\r\n    this.polygons = null;\r\n\r\n    this.hoverIndex = -1;\r\n  }\r\n  get renderAttrs() {\r\n    //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理，如果需要新增渲染时的默认值，在该处处理\r\n    let attrs = super.renderAttrs;\r\n    return attrs;\r\n  }\r\n  beforeRender() {\r\n    //渲染前的处理函数，返回lines,继承base---------before\r\n    let { polygons } = this.getRenderData();\r\n    polygons = polygons.map((plg) => {\r\n      return {\r\n        from: {\r\n          points:\r\n            plg.points.length === 8\r\n              ? [\r\n                  plg.points[6],\r\n                  plg.points[7],\r\n                  plg.points[4],\r\n                  plg.points[5],\r\n                  plg.points[4],\r\n                  plg.points[5],\r\n                  plg.points[6],\r\n                  plg.points[7],\r\n                ]\r\n              : [\r\n                  plg.points[4],\r\n                  plg.points[5],\r\n                  plg.points[4],\r\n                  plg.points[5],\r\n                  plg.points[4],\r\n                  plg.points[5],\r\n                ],\r\n        },\r\n        to: {\r\n          pos: [0, 0],\r\n          ...plg,\r\n        },\r\n      };\r\n    });\r\n    this.polygons = polygons;\r\n    return { polygons };\r\n  }\r\n  beforeUpdate() {\r\n    let oldPolygons = this.polygons;\r\n    let { polygons } = this.getRenderData();\r\n    polygons = polygons.map((polygon, i) => {\r\n      return {\r\n        from: {\r\n          points: oldPolygons[i].to.points,\r\n        },\r\n        to: {\r\n          ...polygon,\r\n        },\r\n      };\r\n    });\r\n    this.polygons = polygons;\r\n    return { polygons };\r\n  }\r\n  getRenderData() {\r\n    let renderAttrs = this.renderAttrs;\r\n    let renderData = this.dataset[renderAttrs.layoutBy];\r\n    let polygons = layout(renderData, renderAttrs);\r\n    let colors = this.theme.colors;\r\n    let styles = this.renderStyles;\r\n    polygons = polygons.map((plg, i) => {\r\n      let style = this.style(\"polygon\")(plg.attrs, this.dataset.rows[i], i);\r\n      let plgStyle = deepObjectMerge(\r\n        { fillColor: plg.bgcolor || colors[i] },\r\n        styles.funnel,\r\n        style\r\n      );\r\n      plg = deepObjectMerge(plg, plgStyle);\r\n      return plg;\r\n    });\r\n    return { polygons };\r\n  }\r\n  rendered() {\r\n    //console.log(this.$refs['wrap'])\r\n  }\r\n  defaultAttrs() {\r\n    let renderData = this.dataset[\"rows\"];\r\n    let stateArray = Array.from(\r\n      { length: renderData[0].length },\r\n      () => \"defalut\"\r\n    );\r\n    // 默认的属性,继承base，正常情况可以删除，建议到theme里面设置默认样式\r\n    return {\r\n      layer: \"bar\",\r\n      bgpillarState: stateArray,\r\n      states: {\r\n        bgpillar: {\r\n          animation: { duration: 20 },\r\n          default: { opacity: 0.01 },\r\n          hover: { opacity: 0.1 },\r\n        },\r\n      },\r\n    };\r\n  }\r\n  defaultStyles() {\r\n    // 默认的样式,继承base\r\n    return {};\r\n  }\r\n  onMousemove = throttle(\r\n    (event, el) => {\r\n      if (this.groups.length && !isNaN(event.x) && !isNaN(event.y)) {\r\n        let curInd = 0;\r\n        let [x, y] = el.getOffsetPosition(event.x, event.y);\r\n        if (!this.renderAttrs.transpose) {\r\n          //获取 x轴坐标的刻度\r\n          let width = this.groups[0].size[0];\r\n          //转换canvas坐标到当前group的相对坐标\r\n          curInd = Math.floor(x / width);\r\n        } else {\r\n          let width = this.groups[0].size[1];\r\n          //转换canvas坐标到当前group的相对坐标\r\n          curInd = Math.floor(y / width);\r\n        }\r\n        if (curInd < 1) {\r\n          curInd = 0;\r\n        } else if (curInd > this.groups.length - 1) {\r\n          curInd = this.groups.length - 1;\r\n        }\r\n        if (this.hoverIndex !== curInd) {\r\n          let { bgpillarState } = this.renderAttrs;\r\n          bgpillarState[curInd] = \"hover\";\r\n          bgpillarState[this.hoverIndex] = \"defualt\";\r\n          this.attr(\"bgpillarState\", bgpillarState);\r\n          this.dataset.resetState();\r\n          this.dataset.cols[curInd].state = \"hover\";\r\n          this.hoverIndex = curInd;\r\n        }\r\n      }\r\n    },\r\n    16,\r\n    true\r\n  );\r\n  onMouseleave(e, el) {\r\n    this.dataset.resetState();\r\n    let { bgpillarState } = this.renderAttrs;\r\n    bgpillarState[this.hoverIndex] = \"defualt\";\r\n    this.attr(\"bgpillarState\", bgpillarState);\r\n    this.hoverIndex = -1;\r\n  }\r\n  myClick = function() {\r\n    console.log(\"myclick\");\r\n  };\r\n\r\n  render(data) {\r\n    let { clientRect, bgpillarState, states } = this.renderAttrs;\r\n\r\n    return (\r\n      <Group\r\n        class=\"container\"\r\n        ref=\"wrap\"\r\n        pos={[clientRect.left, clientRect.top]}\r\n        size={[clientRect.width, clientRect.height]}\r\n      >\r\n        <Group ref=\"pillars\" class=\"pillars-group\" bgcolor={\"#FF0\"}>\r\n          {data.polygons.map((pillar, ind) => {\r\n            return (\r\n              <Polyline\r\n                {...pillar.from}\r\n                animation={{ from: pillar.from, to: pillar.to }}\r\n              />\r\n            );\r\n          })}\r\n        </Group>\r\n        {/* <Group class=\"label-group\">\r\n        </Group>\r\n        <Group class=\"line-group\">\r\n        </Group> */}\r\n      </Group>\r\n    );\r\n  }\r\n}\r\nexport default Funnel;\r\n","export function hexToRgba(hex, opacity) {\r\n  // 16进制颜色转rgba\r\n  if (/^rgba\\(.+\\)$/.test(hex)) {\r\n    return hex;\r\n  }\r\n  var c\r\n  if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\r\n    c = hex.substring(1).split('')\r\n    if (c.length === 3) {\r\n      c = [c[ 0 ], c[ 0 ], c[ 1 ], c[ 1 ], c[ 2 ], c[ 2 ]]\r\n    }\r\n    c = '0x' + c.join('')\r\n    return (\r\n      'rgba(' +\r\n      [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(',') +\r\n      ',' +\r\n      opacity +\r\n      ')'\r\n    )\r\n  }\r\n  throw new Error('Bad Hex')\r\n}\r\nexport function randomHexColor() {\r\n  // 随机生成十六进制颜色\r\n  let random = Math.floor(Math.random() * 16777216).toString(16) // 生成ffffff以内16进制数\r\n  while (random.length < 6) {\r\n    // while循环判断hex位数，少于6位前面加0凑够6位\r\n    random = `0${random}`\r\n  }\r\n  return `#${random}`\r\n}\r\n","import { axis } from '../../utils/axis'\r\nimport { scaleLinear } from '../../utils/scaleLinear'\r\nimport { jsType } from '@qcharts/utils'\r\n\r\nconst getDataRange = (data) => {\r\n  if (data.length === 0) {\r\n    return [0, 1]\r\n  }\r\n  const min = Math.min(...data)\r\n  const max = Math.max(...data)\r\n  return [min, max]\r\n}\r\n\r\nconst getBigRange = (data) => {\r\n  if (data.length === 0) {\r\n    return [0, 1]\r\n  }\r\n  const [min, max] = getDataRange(data)\r\n  const n = Math.round(min / 10) - 1\r\n  const m = Math.round(max / 10) + 1\r\n  return [n * 10, m * 10]\r\n}\r\n\r\nconst updateSectionVal = (section, newSection) => {\r\n  const { min, max } = newSection\r\n  if (jsType(min) === 'number') {\r\n    section[0] = min\r\n  }\r\n  if (jsType(max) === 'number') {\r\n    section[1] = max\r\n  }\r\n}\r\n\r\nexport default function layout(dataSet, size, layoutWay) {\r\n  const [width, height] = size\r\n\r\n  const { text: textField, value: valueField } = dataSet.option\r\n  const allData = [...dataSet]\r\n\r\n  // 如果X轴是文本框，则进行均分\r\n  const maxLen = getDataRange(dataSet.rows.map((d) => d.length))[1]\r\n\r\n  let xDomain = [0, maxLen - 1]\r\n  let xSection = [0, maxLen - 1]\r\n  const xIsTextData = allData.some((d) => jsType(d.text) === 'string')\r\n  if (!xIsTextData) {\r\n    xSection = getBigRange(allData.map((d) => d.text))\r\n    const xScales = axis.call(this, {\r\n      dataSet: data,\r\n      stack: false,\r\n      field: textField,\r\n      section: xSection\r\n    })\r\n    xDomain = getDataRange(xScales)\r\n  }\r\n\r\n  const yIsTextData = allData.some((d) => jsType(d.value) === 'string')\r\n  if (yIsTextData) {\r\n    throw new Error(\"Scatter's value category data should be Number!\")\r\n  }\r\n  let ySection = getBigRange(allData.map((d) => d.layoutScaleValue))\r\n  const yScales = axis.call(this, {\r\n    dataSet: data,\r\n    stack: false,\r\n    field: 'layoutScaleValue',\r\n    section: ySection\r\n  })\r\n  const yDomain = getDataRange(yScales)\r\n\r\n  if (layoutWay) {\r\n    if (layoutWay[textField]) {\r\n      updateSectionVal(xSection, layoutWay[textField])\r\n    }\r\n    if (layoutWay[valueField]) {\r\n      updateSectionVal(ySection, layoutWay[valueField])\r\n    }\r\n  }\r\n\r\n  const newLayoutWay = {}\r\n  newLayoutWay[textField] = { min: xSection[0], max: xSection[1] }\r\n  newLayoutWay[valueField] = { min: ySection[0], max: ySection[1] }\r\n\r\n  const xLinear = scaleLinear()\r\n    .domain(xDomain)\r\n    .range([0, width])\r\n  const yLinear = scaleLinear()\r\n    .domain(yDomain)\r\n    .range([0, height])\r\n\r\n  const resultData = dataSet.rows.map((dArry) => {\r\n    const attrs = dArry.map((d, i) => {\r\n      const x = xIsTextData ? i : d.text\r\n      const y = d.layoutScaleValue\r\n      const pos = [xLinear(x), height - yLinear(y)]\r\n      return {\r\n        pos,\r\n        radius: 5,\r\n        anchor: [1, 1],\r\n        dataOrigin: { ...d.data },\r\n        state: d.state,\r\n        name: dArry.name,\r\n        col: d.col,\r\n        row: d.row\r\n      }\r\n    })\r\n    return {\r\n      name: dArry.name,\r\n      state: dArry.state,\r\n      attrs\r\n    }\r\n  })\r\n  return { data: resultData, layoutWay: newLayoutWay }\r\n}\r\n","import { Group, Polyline, Arc, Label } from \"spritejs\";\r\nimport BaseVisual from \"../../base/BaseVisual\";\r\nimport { scaleLinear } from \"../../utils/scaleLinear\";\r\nimport { hexToRgba } from \"../../utils/color\";\r\nimport { deepObjectMerge } from \"@qcharts/utils\";\r\nimport layout from \"./layout\";\r\n\r\nclass Scatter extends BaseVisual {\r\n  constructor(attrs = {}) {\r\n    super(attrs);\r\n    this.type = \"scatter\";\r\n    this.scatterData = [];\r\n    this.guideLineData = [];\r\n  }\r\n\r\n  defaultAttrs() {\r\n    return {\r\n      layer: \"scatter\",\r\n      labelField: null,\r\n      areaField: null, //气泡大小字段值，不设置此值则为散点图\r\n      areaRange: null, // 面积映射\r\n      showGuideLine: false,\r\n      layoutWay: null,\r\n    };\r\n  }\r\n\r\n  get renderAttrs() {\r\n    return { ...super.renderAttrs }\r\n  }\r\n\r\n  processData() {\r\n    const dataSet = this.dataset;\r\n    const { layoutWay, clientRect } = this.renderAttrs;\r\n    const { data, layoutWay: newLayoutWay } = layout.call(\r\n      this,\r\n      dataSet,\r\n      [clientRect.width, clientRect.height],\r\n      layoutWay\r\n    );\r\n    deepObjectMerge(this.renderAttrs.layoutWay || {}, newLayoutWay);\r\n\r\n    data.forEach((item, i) => {\r\n      const color = this.theme.colors[i];\r\n      const fillColor = hexToRgba(color, 0.3);\r\n      item.attrs.forEach((di) => {\r\n        di.strokeColor = color;\r\n        di.fillColor = fillColor;\r\n      });\r\n    });\r\n    return data;\r\n  }\r\n\r\n  beforeUpdate() {\r\n    super.beforeUpdate();\r\n    const updateData = this.processData();\r\n    const temp = updateData.map((row) => deepObjectMerge({}, row));\r\n    updateData.forEach((row, ind) => {\r\n      const oldRow = this.scatterData[ind];\r\n      row.attrs.forEach((cell, cInd) => {\r\n        const radius = this.getRealRadius({ ...cell });\r\n        cell.radius = radius;\r\n        if (oldRow && oldRow.attrs[cInd]) {\r\n          const oldCell = oldRow.attrs[cInd];\r\n          const toPos = [...cell.pos];\r\n          const fromPos =\r\n            oldCell.animation.to && oldCell.animation.to.pos\r\n              ? [...oldCell.animation.to.pos]\r\n              : [...oldCell.pos];\r\n          // 位置相同\r\n          if (toPos.toString() === fromPos.toString()) {\r\n            let fromRadius = radius;\r\n            let toRadius = radius;\r\n            //default-> disabled\r\n            if (cell.state === \"disabled\") {\r\n              toRadius = 0;\r\n            }\r\n            // old is disabled\r\n            if (oldCell.animation.to.radius == 0) {\r\n              fromRadius = 0;\r\n            }\r\n            cell.animation = {\r\n              from: { radius: fromRadius },\r\n              to: { radius: toRadius },\r\n            };\r\n          } else {\r\n            cell.animation = {\r\n              from: { pos: fromPos },\r\n              to: { pos: toPos },\r\n            };\r\n          }\r\n        } else {\r\n          cell.animation = {\r\n            from: { radius: 0 },\r\n            to: { radius: radius },\r\n          };\r\n        }\r\n      });\r\n    });\r\n    this.scatterData = temp;\r\n    return updateData;\r\n  }\r\n\r\n  beforeRender() {\r\n    super.beforeRender();\r\n    const renderData = this.processData();\r\n    this.scatterData = renderData.map((row) => deepObjectMerge({}, row));\r\n    renderData.forEach((row) => {\r\n      row.attrs.forEach((cell) => {\r\n        const radius = this.getRealRadius({ ...cell });\r\n        cell.animation = {\r\n          from: { radius: 0 },\r\n          to: { radius },\r\n        };\r\n      });\r\n    });\r\n    return renderData;\r\n  }\r\n\r\n  getRealRadius(attr) {\r\n    const { areaRange, areaField } = this.renderAttrs;\r\n    const { radius, dataOrigin } = attr;\r\n    // 面积字段未定义，直接返回半径\r\n    if (!areaField || !dataOrigin.hasOwnProperty(areaField)) {\r\n      return radius;\r\n    }\r\n    // 面积范围未定义，直接返回数据中的面积\r\n    if (!areaRange) {\r\n      return dataOrigin[areaField];\r\n    }\r\n\r\n    const allData = [...this.dataset].map((d) => d.data[areaField]).sort((a, b) => a - b)\r\n    const linear = scaleLinear()\r\n      .domain([allData[0], allData[allData.length - 1]])\r\n      .range(areaRange);\r\n    const realArea = linear(dataOrigin[areaField]);\r\n    return realArea;\r\n  }\r\n\r\n  onMouseenter(event, el) {\r\n\r\n    const arc = el.children[0]\r\n    const { row: rowInd, col: colInd, pos } = arc.attributes\r\n    this.dataset.forEach((cell) => {\r\n      if (cell.row === rowInd && cell.col === colInd) {\r\n        cell.state = \"hover\";\r\n      }\r\n    });\r\n    const { showGuideLine } = this.renderAttrs;\r\n    if (showGuideLine) {\r\n\r\n      const { height, width } = this.renderAttrs.clientRect\r\n      this.guideLineData = [\r\n        [\r\n          [0, pos[1]],\r\n          [width, pos[1]],\r\n        ],\r\n        [\r\n          [pos[0], 0],\r\n          [pos[0], height],\r\n        ],\r\n      ];\r\n    }\r\n  }\r\n  onMouseleave() {\r\n    this.dataset.resetState();\r\n    this.guideLineData = [];\r\n  }\r\n\r\n  renderGuideLine() {\r\n    if (this.guideLineData.length > 0) {\r\n      return this.guideLineData.map((points) => {\r\n        return (\r\n          <Polyline\r\n            points={points}\r\n            strokeColor={\"#ddd\"}\r\n            lineWidth={1}\r\n            translate={[0.5, 0.5]}\r\n          />\r\n        );\r\n      });\r\n    }\r\n    return;\r\n  }\r\n\r\n  renderScatter(data) {\r\n    const { labelField } = this.renderAttrs;\r\n    const scatters = data.map((item, di) => {\r\n      return item.attrs.map((attr, ci) => {\r\n        let style = this.style('point')(attr, { ...attr.dataOrigin }, ci)\r\n        if (style === false) {\r\n          return;\r\n        }\r\n\r\n        let labelAttr = null;\r\n\r\n        if (labelField) {\r\n          const style = this.style('label')(attr, { ...attr.dataOrigin }, ci)\r\n          if (style !== false) {\r\n            if (attr.dataOrigin.hasOwnProperty(labelField)) {\r\n              const { strokeColor, ...other } = attr;\r\n              const text = attr.dataOrigin[labelField];\r\n              labelAttr = deepObjectMerge(\r\n                other,\r\n                {\r\n                  fillColor: strokeColor,\r\n                  text,\r\n                  anchor: [0.5, 0.5],\r\n                  fontSize: '12px',\r\n                  zIndex: 10 + di + ci\r\n\r\n                },\r\n                style\r\n              );\r\n            }\r\n          }\r\n        }\r\n        const hStyle = this.style('point:hover')(attr, attr.dataOrigin, ci) || {}\r\n        const stateStyle = attr.state === 'hover' ? hStyle : {}\r\n\r\n        return (\r\n          <Group onMouseenter={this.onMouseenter} onMouseleave={this.onMouseleave}>\r\n            <Arc {...attr} {...style} {...stateStyle} zIndex={9 + di + ci} />\r\n            {labelAttr ? <Label {...labelAttr} /> : null}\r\n          </Group>\r\n        );\r\n      });\r\n    });\r\n    return scatters.reduce((pre, cur) => {\r\n      return pre.concat(cur);\r\n    }, []);\r\n  }\r\n\r\n  render(data) {\r\n    const { height, width, left, top } = this.renderAttrs.clientRect;\r\n    return (\r\n      <Group size={[width, height]} pos={[left, top]} zIndex={10}>\r\n        {this.renderScatter(data)}\r\n        {this.renderGuideLine()}\r\n      </Group>\r\n    );\r\n  }\r\n\r\n  rendered() {}\r\n}\r\n\r\nexport default Scatter;\r\n","//通过圆生成path\r\nfunction ellipse2path(cx, cy, rx, ry) {\r\n  //非数值单位计算，如当宽度像100%则移除\r\n  if (isNaN(cx - cy + rx - ry)) return\r\n  var path = 'M' + (cx - rx) + ' ' + cy + 'a' + rx + ' ' + ry + ' 0 1 0 ' + 2 * rx + ' 0' + 'a' + rx + ' ' + ry + ' 0 1 0 ' + -2 * rx + ' 0' + 'z'\r\n  return path\r\n}\r\nexport default ellipse2path\r\n","import Base from '../../base/BaseVisual'\r\nimport { Group, Polyline, Path, requestAnimationFrame, Label, Node } from 'spritejs'\r\nimport ellipse2path from '../../utils/ellipse2path'\r\nimport { getStyle } from '@/utils/getStyle'\r\nclass Wave extends Base {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    //波纹振偏移量\r\n    this.offsetR = 50\r\n    this.tickId = ''\r\n    this.oldAttr = {}\r\n  }\r\n  get renderAttrs() {\r\n    //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理，如果需要新增渲染时的默认值，在该处处理\r\n    let attrs = super.renderAttrs\r\n    let clientRect = attrs.clientRect\r\n    let width = Math.floor(clientRect.width)\r\n    let height = Math.floor(clientRect.height)\r\n    let radius = attrs.radius\r\n    attrs.pos = [0, 0]\r\n    if (!attrs.shape) {\r\n      attrs.pos = [width / 2 - radius, height / 2 - radius]\r\n      attrs.shape = ellipse2path(radius, radius, attrs.radius, attrs.radius)\r\n    }\r\n    return attrs\r\n  }\r\n  rendered() {\r\n    //path的高宽\r\n    this.wave()\r\n  }\r\n  defaultAttrs() {\r\n    // 默认的属性,继承base，正常情况可以删除，建议到theme里面设置默认样式\r\n    return {\r\n      amplitude: 8, //振幅\r\n      wavelength: 300, //波长`\r\n      radius: 150,\r\n      percent: 65,\r\n      formatter: per => {\r\n        return per + '%'\r\n      }\r\n    }\r\n  }\r\n  wave() {\r\n    let currentR = 0\r\n    let per = 4\r\n    let clipWave = this.$refs['clipWave']\r\n    let clipPath = this.$refs['clipPath'] || clipWave\r\n    let pathHeight = clipPath.originalContentRect[3]\r\n    let { percent, wavelength, amplitude, clientRect, animation, shape } = this.renderAttrs\r\n    let perR = 24 / animation.duration\r\n    let currentX = 0 - clientRect.left\r\n    //以路径的top为起点，计算百分比\r\n    let startY = pathHeight * (100 - percent) / 100 + clipPath.originalContentRect[1]\r\n    this.tickId = requestAnimationFrame(_ => {\r\n      this.offsetR += perR\r\n      let points = [[currentX, startY + pathHeight]]\r\n      points.push([currentX, startY + amplitude * Math.sin(currentR + this.offsetR)])\r\n      while (currentX < clientRect.width + clientRect.left + clientRect.right) {\r\n        points.push([currentX, startY + amplitude * Math.sin(currentR + this.offsetR)])\r\n        currentX += wavelength / (per * 2)\r\n        currentR += Math.PI / per\r\n      }\r\n      let lastY = amplitude * Math.sin(currentR + this.offsetR)\r\n      points.push([currentX, startY + lastY])\r\n      points.push([currentX, startY + lastY])\r\n      points.push([currentX, startY + pathHeight])\r\n      clipWave.attr({ points: points, clipPath: ' ' + shape })\r\n      if (this.offsetR >= 2 * Math.PI) {\r\n        this.offsetR = this.offsetR % (2 * Math.PI)\r\n      }\r\n      this.wave()\r\n    })\r\n  }\r\n  render() {\r\n    let { clientRect, shape, pos, formatter, percent, radius } = this.renderAttrs\r\n\r\n    let renderStyles = this.renderStyles\r\n    let waveStyle = getStyle(this, 'wave', renderStyles.wave)\r\n    let shapeStyle = getStyle(this, 'shape', renderStyles.shape)\r\n    let textStyle = getStyle(this, 'text', renderStyles.text)\r\n    let animation = {\r\n      from: {\r\n        pos: this.oldAttr.pos || pos\r\n      },\r\n      to: {\r\n        pos: pos\r\n      }\r\n    }\r\n    this.oldAttr = { ...this.renderAttrs }\r\n    return (\r\n      <Group zIndex={1} class=\"container\" pos={[clientRect.left, clientRect.top]} size={[clientRect.width, clientRect.height]}>\r\n        <Group animation={animation}>\r\n          <Path ref=\"clipPath1\" d={shape} fillColor={shapeStyle.fillColor} />\r\n          <Polyline ref=\"clipWave\" {...waveStyle} clipPath={shape} smooth={true} />\r\n          <Path ref=\"clipPath\" d={shape} strokeColor={shapeStyle.strokeColor} lineWidth={shapeStyle.lineWidth} />\r\n          {textStyle === false ? <Node /> : <Label text={formatter(percent)} {...textStyle} pos={[radius, radius]} anchor={[0.5]} />}\r\n        </Group>\r\n      </Group>\r\n    )\r\n  }\r\n}\r\nexport default Wave\r\n","import { Group, Polyline, Label, Arc, Gradient } from 'spritejs'\r\nimport { jsType } from '@qcharts/utils'\r\nimport BaseVisual from '../../base/BaseVisual'\r\n\r\n/**\r\n * 根据给定参数，生成仪表盘刻度的坐标以及刻度文字标注的坐标\r\n * @param {Number} radius 仪表盘半径\r\n * @param {Number} angle 刻度的角度 单位度\r\n * @param {Number} tickLength 刻度的长度\r\n * @param {Number} labelOffset 刻度文字的偏移值\r\n * @param {Boolean} isInner 刻度是否在仪表盘内部\r\n */\r\nfunction tickLine(radius, angle, tickLength, labelOffset, isInner) {\r\n  const radian = (angle * Math.PI) / 180\r\n  const cos = Math.cos(radian)\r\n  const sin = Math.sin(radian)\r\n  // 起点\r\n  const [x, y] = [cos * radius, sin * radius]\r\n  // 中点\r\n  const [cX0, cY0] = isInner\r\n    ? [x - tickLength * cos, y - tickLength * sin]\r\n    : [x + tickLength * cos, y + tickLength * sin]\r\n  const labelPos = isInner\r\n    ? [x - (tickLength + labelOffset) * cos, y - (tickLength + labelOffset) * sin]\r\n    : [x + (tickLength + labelOffset) * cos, y + (tickLength + labelOffset) * sin]\r\n\r\n  let anchorX = isInner ? cos : -cos\r\n  let anchorY = isInner ? sin : -sin\r\n  let anchor = [0.5, 0.5]\r\n\r\n  if (Math.abs(anchorX) > Math.abs(anchorY)) {\r\n    anchor[0] = anchorX < 0 ? 0 : anchorX\r\n  } else {\r\n    anchor[1] = anchorY > 0 ? anchorY : 0\r\n  }\r\n  return {\r\n    points: [\r\n      [x, y],\r\n      [cX0, cY0]\r\n    ],\r\n    labelPos,\r\n    anchor\r\n  }\r\n}\r\n\r\nclass Gauge extends BaseVisual {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.gaugeAnimations = []\r\n    this.type = 'Gauge'\r\n    this.oldPos = null\r\n    this.style('tickText', true)\r\n    this.style('tickLine', true)\r\n  }\r\n\r\n  defaultAttrs() {\r\n    return {\r\n      layer: 'gauge',\r\n      min: 0, // 刻度最小值\r\n      max: 100, // 刻度最大值\r\n      percent: 50, // 指针值\r\n      lineCap: 'round',\r\n      _useBuiltInColors: false, // 默认颜色不使用渐变色\r\n      lineWidth: 10, // 仪表盘圆弧宽度\r\n      startAngle: 140, // 仪表盘弧度起始角度，arc 角度顺时针增加，0度为屏幕X轴方向\r\n      endAngle: 400, // 仪表盘弧度终止角度\r\n      strokeBgcolor: '#dde3ea', // 仪表盘弧度的背景色\r\n      title: (d) => d,\r\n      tickStep: 10, // tick 步进，生成 tick 的数量为 (max - min) / tickStep\r\n      tickLength: 10, // 刻度长度，为负值时向外绘制\r\n      labelOffset: 5,\r\n      tickFormatter: (d) => d // 刻度文本格式化\r\n    }\r\n  }\r\n\r\n  get renderAttrs() {\r\n    const attrs = super.renderAttrs\r\n    // 仪表盘半径\r\n    const { clientRect } = attrs\r\n    const { height, width } = clientRect\r\n    const size = [width, height]\r\n\r\n    const radius = ~~Math.min.apply(\r\n      size,\r\n      size.map((v) => v / 2)\r\n    )\r\n    // 指针宽度\r\n    const pointerWidth = radius / 10\r\n    // 绘图中心\r\n    const center = [width / 2, height / 2]\r\n\r\n    return {\r\n      ...attrs,\r\n      radius,\r\n      pointerWidth,\r\n      center\r\n    }\r\n  }\r\n\r\n  get ticks() {\r\n    let {\r\n      min,\r\n      max,\r\n      radius,\r\n      startAngle,\r\n      endAngle,\r\n      lineWidth,\r\n      tickStep,\r\n      tickLength,\r\n      labelOffset,\r\n      tickFormatter\r\n    } = this.renderAttrs\r\n    const count = Math.abs(max - min) / tickStep\r\n\r\n    let total = endAngle - startAngle\r\n\r\n    const isInner = tickLength > 0\r\n    const perAngle = total / count\r\n    const ticks = []\r\n    let tickRadius = isInner ? radius - lineWidth / 2 : radius + lineWidth / 2\r\n    let angle = 0\r\n    let i = -1\r\n\r\n    while (++i <= count) {\r\n      angle = i * perAngle + startAngle\r\n      const ret = tickLine(tickRadius, angle, Math.abs(tickLength), Math.abs(labelOffset), isInner)\r\n      ticks.push({\r\n        points: ret.points,\r\n        label: {\r\n          text: tickFormatter(i * tickStep + min).toFixed(0),\r\n          pos: ret.labelPos,\r\n          anchor: ret.anchor\r\n        }\r\n      })\r\n    }\r\n\r\n    if ((ticks[0].angle + ticks[ticks.length - 1].angle) % (Math.PI * 2) === 0) {\r\n      ticks.pop()\r\n    }\r\n\r\n    return ticks\r\n  }\r\n\r\n  transform() {\r\n    const { radius, startAngle, endAngle, min, max, percent } = this.renderAttrs\r\n    const total = Math.abs(max - min)\r\n\r\n    return {\r\n      dataOrigin: percent,\r\n      startAngle,\r\n      radius,\r\n      endAngle: ((endAngle - startAngle) * (percent - min)) / total + startAngle,\r\n      strokeColor: this.color(0)\r\n    }\r\n  }\r\n\r\n  beforeRender() {\r\n    super.beforeRender()\r\n    const arc = this.transform()\r\n    this.gaugeAnimations = {\r\n      from: { startAngle: arc.startAngle, endAngle: arc.startAngle },\r\n      to: { startAngle: arc.startAngle, endAngle: arc.endAngle }\r\n    }\r\n    return arc\r\n  }\r\n\r\n  beforeUpdate() {\r\n    super.beforeUpdate()\r\n    const arc = this.transform()\r\n    const animation = {\r\n      from: { startAngle: arc.startAngle, endAngle: arc.startAngle },\r\n      to: { startAngle: arc.startAngle, endAngle: arc.endAngle }\r\n    }\r\n    if (this.gaugeAnimations) {\r\n      animation.from = { ...this.gaugeAnimations.to }\r\n    }\r\n\r\n    this.gaugeAnimations = { ...animation }\r\n    return arc\r\n  }\r\n\r\n  color(i) {\r\n    return this.theme.colors[i]\r\n  }\r\n\r\n  /**\r\n   * 渲染指针\r\n   * @param {Number} angle 角度\r\n   */\r\n  renderPointer(d, maxTickTextFontSize) {\r\n    const style = this.style('pointer')(d, d.dataOrigin, 0)\r\n    if (style === false) {\r\n      return\r\n    }\r\n    // 动画\r\n    let { from, to } = this.gaugeAnimations\r\n    // rotate角度起始位置为屏幕Y轴方向，arc角度为X轴方向\r\n    const fromRotate = from.endAngle + 90\r\n    const toRotate = to.endAngle + 90\r\n    const pointerAnimation = {\r\n      from: { rotate: fromRotate },\r\n      to: { rotate: toRotate }\r\n    }\r\n    // 半径\r\n    const { radius, pointerWidth, center, tickLength, labelOffset, lineWidth } = this.renderAttrs\r\n    // 指针顶部离仪表盘的距离\r\n    let pointerTopOffset = tickLength + lineWidth + labelOffset + maxTickTextFontSize\r\n    if (tickLength < 0) {\r\n      pointerTopOffset = pointerTopOffset - tickLength - labelOffset\r\n    }\r\n    // 指针长度\r\n    const pointerLen = radius - pointerTopOffset\r\n    // 指针宽度\r\n    let pWidth = radius / 10\r\n\r\n    // 指针颜色\r\n    const color = this.color(0)\r\n\r\n    const [x, y] = center\r\n    const attr = {\r\n      fillColor: color,\r\n      rotate: fromRotate,\r\n      transformOrigin: center,\r\n      zIndex: 11,\r\n      points: [\r\n        [x, y],\r\n        [x - pWidth / 2, y - pointerLen * 0.1],\r\n        [x, y - pointerLen],\r\n        [x + pWidth / 2, y - pointerLen * 0.1],\r\n        [x, y]\r\n      ],\r\n      close: true\r\n    }\r\n    return <Polyline {...attr} {...style} animation={pointerAnimation} />\r\n  }\r\n\r\n  isStyleExist(name) {\r\n    const style = this.style(`${name}`)\r\n    return Boolean(style)\r\n  }\r\n\r\n  render(data = {}) {\r\n    const {\r\n      _useBuiltInColors,\r\n      title,\r\n      percent,\r\n      center,\r\n      radius,\r\n      startAngle,\r\n      endAngle,\r\n      lineWidth,\r\n      lineCap,\r\n      strokeBgcolor,\r\n      clientRect\r\n    } = this.renderAttrs\r\n    const labelCenter = [center[0], center[1] * 1.25]\r\n    const ticks = this.ticks\r\n    const tickLine = this.isStyleExist('tickLine')\r\n    const tickText = this.isStyleExist('tickText')\r\n    const realTitle = title || percent\r\n\r\n    let gradientColor = null // 默认使用内置的渐变配色方案\r\n\r\n    if (_useBuiltInColors !== false) {\r\n      const colors = this.theme.colors.reverse()\r\n      const gradientOpt = {\r\n        vector: [0, 0, center[0] * 2, center[1] * 2],\r\n        colors: [\r\n          { color: colors[0], offset: 0 },\r\n          { color: colors[1], offset: 0.3 },\r\n          { color: colors[2], offset: 1 }\r\n        ]\r\n      }\r\n      gradientColor = new Gradient(gradientOpt)\r\n    }\r\n\r\n    let maxTickTextFontSize = 16\r\n    if (tickText !== false) {\r\n      ticks.map((tick, j) => {\r\n        const style = this.style('tickText')(data, data.dataOrigin, j)\r\n        if (style && style.fontSize) {\r\n          if (jsType(style.fontSize) === 'number' && maxTickTextFontSize < style.fontSize) {\r\n            maxTickTextFontSize = style.fontSize\r\n          }\r\n          if (jsType(style.fontSize) === 'string') {\r\n            const realSize = Number(style.fontSize.replace('px', ''))\r\n            if (jsType(realSize) === 'number' && maxTickTextFontSize < realSize) {\r\n              maxTickTextFontSize = realSize\r\n            }\r\n          }\r\n        }\r\n      })\r\n    }\r\n    const gPos = [clientRect.left, clientRect.top]\r\n    const gSize = [clientRect.width, clientRect.height]\r\n\r\n    const gAnimation = {\r\n      from: { pos: this.oldPos ? this.oldPos : gPos },\r\n      to: { pos: gPos }\r\n    }\r\n    this.oldPos = gPos\r\n    return (\r\n      <Group pos={gPos} size={gSize} animation={gAnimation}>\r\n        <Arc\r\n          pos={center}\r\n          lineWidth={lineWidth}\r\n          lineCap={lineCap}\r\n          startAngle={startAngle}\r\n          endAngle={endAngle}\r\n          strokeColor={strokeBgcolor}\r\n          radius={radius}\r\n          zIndex={10}\r\n        />\r\n        <Arc\r\n          pos={center}\r\n          lineCap={lineCap}\r\n          lineWidth={lineWidth}\r\n          {...data}\r\n          animation={this.gaugeAnimations}\r\n          {...(gradientColor ? { strokeColor: gradientColor } : { strokeColor: this.color(0) })}\r\n          {...this.style('arc')(data, data.dataOrigin, 0)}\r\n          zIndex={11}\r\n        />\r\n        {this.renderPointer(data, maxTickTextFontSize)}\r\n        {realTitle ? (\r\n          <Label\r\n            text={jsType(realTitle) === 'function' ? realTitle(data.dataOrigin) : realTitle}\r\n            pos={labelCenter}\r\n            textAlign=\"center\"\r\n            zIndex={10}\r\n            anchor={[0.5, 1]}\r\n            {...this.style('title')(data, data.dataOrigin, 0)}\r\n          />\r\n        ) : null}\r\n        {tickLine !== false || tickText !== false\r\n          ? ticks.map((tick, j) => (\r\n              <Group pos={center} anchor={[0, 0]} zIndex={1010}>\r\n                {tickLine !== false ? (\r\n                  <Polyline\r\n                    points={tick.points}\r\n                    strokeColor={strokeBgcolor}\r\n                    {...this.style('tickLine')(data, data.dataOrigin, j)}\r\n                  />\r\n                ) : null}\r\n                {tickText !== false ? (\r\n                  <Label {...tick.label} {...this.style('tickText')(data, data.dataOrigin, j)} />\r\n                ) : null}\r\n              </Group>\r\n            ))\r\n          : null}\r\n      </Group>\r\n    )\r\n  }\r\n\r\n  rendered() {\r\n    this.on('resize', () => this.forceUpdate())\r\n  }\r\n}\r\n\r\nexport default Gauge\r\n","import { Group, Arc } from 'spritejs'\r\nimport { deepObjectMerge } from '@qcharts/utils'\r\nimport BaseVisual from '../../base/BaseVisual'\r\n\r\n// 数据拷贝\r\nconst flattern = (arr) => [].concat.apply([], arr)\r\n\r\nclass RadialBar extends BaseVisual {\r\n  constructor(attrs = {}) {\r\n    super(attrs)\r\n    this.type = 'RadialBar'\r\n    this.animators = []\r\n    this.oldPos = null\r\n  }\r\n\r\n  defaultAttrs() {\r\n    return {\r\n      layer: 'radialBar',\r\n      radius: 0.8,\r\n      innerRadius: 0,\r\n      startAngle: -90,\r\n      endAngle: 270,\r\n      lineWidth: 5,\r\n      strokeBgcolor: '#f5f5f5'\r\n    }\r\n  }\r\n\r\n  get renderAttrs() {\r\n    const attrs = super.renderAttrs\r\n    const { clientRect } = attrs\r\n    const size = [clientRect.width, clientRect.height]\r\n    return {\r\n      ...attrs,\r\n      size\r\n    }\r\n  }\r\n\r\n  get maxOuterRadius() {\r\n    const { startAngle, endAngle, radius, size } = this.renderAttrs\r\n    const [width, height] = size\r\n\r\n    if (endAngle - startAngle === 90) {\r\n      return Math.min(width, height) * radius\r\n    } else {\r\n      return (Math.min(width, height) / 2) * radius\r\n    }\r\n  }\r\n\r\n  get center() {\r\n    const { startAngle, endAngle, radius, size } = this.renderAttrs\r\n    const angle = (endAngle + startAngle) / 2\r\n    const [width, height] = size\r\n    const maxRadius = this.maxOuterRadius\r\n    let [x, y] = [width / 2 - maxRadius, height / 2 - maxRadius]\r\n\r\n    if (endAngle - startAngle === 90) {\r\n      // 区分象限\r\n      const cos = Math.cos(angle)\r\n      const sin = Math.sin(angle)\r\n      const maxWidth = radius * width\r\n      const maxHeight = radius * height\r\n      x += cos < 0 ? maxWidth / 2 : -(maxWidth / 2)\r\n      y += sin < 0 ? maxHeight / 2 : -(maxHeight / 2)\r\n    }\r\n\r\n    return [x, y]\r\n  }\r\n\r\n  get innerRadius() {\r\n    let { radius, innerRadius } = this.renderAttrs\r\n    return innerRadius <= 0 ? 0 : (this.maxOuterRadius / radius) * innerRadius\r\n  }\r\n\r\n  transform(data) {\r\n    const { startAngle, endAngle, max, min, lineWidth, colors } = this.renderAttrs\r\n    let total = 0\r\n    if (!isNaN(max) && !isNaN(min)) {\r\n      total = max - min\r\n    } else {\r\n      let cloneData = deepObjectMerge(data)\r\n      cloneData.sort((a, b) => b.value - a.value)\r\n      total = cloneData[0].value * 1.3\r\n    }\r\n    const angle = endAngle - startAngle\r\n    const innerRadius = this.innerRadius\r\n    const outerRadius = this.maxOuterRadius\r\n    const arcOffset = 0.5\r\n    const len = data.length\r\n    const perRadius =\r\n      ((outerRadius - innerRadius) * 2 - lineWidth * (lineWidth >= 5 ? 1 : len - 1)) / ((len * 2 - 1) * (1 + arcOffset))\r\n    let value = null\r\n\r\n    data.forEach((d, i) => {\r\n      value = +d.value\r\n\r\n      d.pos = [outerRadius, outerRadius]\r\n      d.anchor = [0.5, 0.5]\r\n      d.lineWidth = lineWidth\r\n      d.startAngle = startAngle\r\n      d.endAngle = d.state === 'disabled' ? startAngle : startAngle + (angle * value) / total\r\n      d.innerRadius = innerRadius + i * (1 + arcOffset) * perRadius\r\n      d.radius = d.innerRadius + 1 * perRadius\r\n      d.strokeColor = colors[i]\r\n\r\n      const normalStyle = this.style('arc')(d, d.dataOrigin, d.index)\r\n\r\n      Object.assign(d, normalStyle)\r\n    })\r\n    // 半径大的在底，小的在上，这样事件触发才正常\r\n    return data.sort((a, b) => b.radius - a.radius)\r\n  }\r\n\r\n  beforeRender() {\r\n    super.beforeRender()\r\n    const { startAngle } = this.renderAttrs\r\n    let data = flattern(this.dataset)\r\n    data = this.transform(data)\r\n    this.animators = data.map((d) => ({\r\n      from: {\r\n        startAngle,\r\n        endAngle: startAngle\r\n      },\r\n      to: {\r\n        startAngle,\r\n        endAngle: d.endAngle\r\n      }\r\n    }))\r\n    return data\r\n  }\r\n\r\n  beforeUpdate() {\r\n    super.beforeUpdate()\r\n    const { startAngle } = this.renderAttrs\r\n    let data = flattern(this.dataset)\r\n    data = this.transform(data)\r\n    this.animators = data.map((d, i) => {\r\n      if (d.anticlockwise) {\r\n        return d.disabled ? { from: { opacity: 1 }, to: { opacity: 0 } } : { from: { opacity: 1 }, to: { opacity: 1 } }\r\n      } else {\r\n        let prev = this.animators[i] ? this.animators[i].to : data[i - 1]\r\n\r\n        if (!prev) {\r\n          prev = {\r\n            startAngle: startAngle,\r\n            endAngle: startAngle\r\n          }\r\n        }\r\n\r\n        return {\r\n          from: {\r\n            startAngle: prev.startAngle,\r\n            endAngle: prev.endAngle\r\n          },\r\n          to: {\r\n            startAngle: d.startAngle,\r\n            endAngle: d.endAngle\r\n          }\r\n        }\r\n      }\r\n    })\r\n    return data\r\n  }\r\n\r\n  onMouseenter(event, el) {\r\n    const { col, row } = el.children[1].attributes\r\n    this.dataset.forEach((item) => {\r\n      item.state = item.col === col && item.row === row ? 'hover' : 'default'\r\n    })\r\n  }\r\n\r\n  onMouseleave() {\r\n    this.dataset.resetState()\r\n  }\r\n\r\n  render(data = []) {\r\n    const { strokeBgcolor } = this.renderAttrs\r\n    const gAnimation = {\r\n      from: { pos: this.oldPos ? this.oldPos : this.center },\r\n      to: { pos: this.center }\r\n    }\r\n    this.oldPos = this.center\r\n    return (\r\n      <Group>\r\n        {data\r\n          .map((d, i) => {\r\n            const { col, row, data } = d\r\n            return (\r\n              <Group\r\n                pos={this.center}\r\n                animation={gAnimation}\r\n                onMouseenter={this.onMouseenter}\r\n                onMousemove={this.onMouseenter}\r\n                onMouseleave={this.onMouseleave}\r\n              >\r\n                <Arc {...d} startAngle={0} endAngle={360} strokeColor={strokeBgcolor} />\r\n                <Arc\r\n                  pos={this.center}\r\n                  {...{ ...d, col, row }}\r\n                  animation={this.animators[i]}\r\n                  {...this.style('arc')(d, data, i)}\r\n                />\r\n              </Group>\r\n            )\r\n          })}\r\n      </Group>\r\n    )\r\n  }\r\n\r\n  rendered() {}\r\n}\r\n\r\nexport default RadialBar\r\n","import Base from './Base'\r\nimport theme from '../theme/default'\r\nimport { deepObjectMerge } from '@qcharts/utils'\r\nimport filterClone from 'filter-clone'\r\nexport default class BasePlugin extends Base {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.theme = theme.plugins[this.constructor.name]\r\n    //如果当前对象设置了theme，不继承theme\r\n    this.theme.set = obj => {\r\n      if (this.theme === theme.visuals[this.constructor.name]) {\r\n        this.theme = filterClone(this.theme)\r\n      }\r\n      this.theme = deepObjectMerge(this.theme, obj)\r\n    }\r\n  }\r\n}\r\n","import { scaleLinear } from '../../utils/scaleLinear'\r\nimport { axis } from '../../utils/axis'\r\nimport { emptyObject } from '@qcharts/utils'\r\nexport default function layout(arr, attrs) {\r\n  let res = {\r\n    scales: [],\r\n    labels: [],\r\n    grids: [],\r\n    axisPoints: [],\r\n    orient: attrs.orient\r\n  }\r\n  let defaultAttrs = {\r\n    top: {\r\n      label: {\r\n        anchor: [0.5, 1],\r\n        padding: [0, 0, 6, 0],\r\n        textAlign: 'center'\r\n      },\r\n      scale: {\r\n        anchor: [0.5, 1],\r\n        width: 1,\r\n        height: 4\r\n      },\r\n      grid: {\r\n        strokeColor: '#666'\r\n      },\r\n      name: {},\r\n      type: 'category'\r\n    },\r\n    bottom: {\r\n      scale: {\r\n        anchor: [0.5, 0],\r\n        width: 1,\r\n        height: 4\r\n      },\r\n      label: {\r\n        anchor: [0.5, 0],\r\n        padding: [6, 0, 0, 0],\r\n        textAlign: 'center'\r\n      },\r\n      grid: {\r\n        strokeColor: '#666'\r\n      },\r\n      name: {},\r\n      type: 'category'\r\n    },\r\n    left: {\r\n      label: {\r\n        padding: [0, 8, 0, 0],\r\n        anchor: [1, 0.5],\r\n        textAlign: 'right'\r\n      },\r\n      scale: {\r\n        anchor: [1, 0.5],\r\n        width: 4,\r\n        height: 1\r\n      },\r\n      grid: {\r\n        strokeColor: '#666'\r\n      },\r\n      name: {},\r\n      type: 'value'\r\n    },\r\n    right: {\r\n      label: {\r\n        anchor: [0, 0.5],\r\n        padding: [0, 0, 0, 8]\r\n      },\r\n      scale: {\r\n        anchor: [0, 0.5],\r\n        width: 4,\r\n        height: 1\r\n      },\r\n      grid: {\r\n        strokeColor: '#666'\r\n      },\r\n      name: {},\r\n      type: 'value'\r\n    }\r\n  }\r\n  const { stack, splitNumber, clientRect, orient, axisGap, transpose } = attrs\r\n  if (transpose) {\r\n    ;['top', 'bottom', 'right', 'left'].forEach(str => {\r\n      defaultAttrs[str].type = defaultAttrs[str].type === 'value' ? 'category' : 'value'\r\n    })\r\n  }\r\n  const { width, height } = clientRect\r\n  let scales = axis.call(this, {\r\n    dataSet: arr,\r\n    stack,\r\n    splitNumber\r\n    // needReverse: true,\r\n  })\r\n  let maxVal = Math.max.apply(this, scales)\r\n  let minVal = Math.min.apply(this, scales)\r\n  let type = attrs.type || defaultAttrs[orient].type\r\n  let distance = orient === 'left' || orient === 'right' ? height : width\r\n  let datasetReverse = this.dataset.datasetReverse\r\n  if (type === 'value') {\r\n    let scaleFY = scaleLinear()\r\n      .domain([minVal, maxVal])\r\n      .range([0, distance])\r\n    scales.forEach(num => {\r\n      let { scaleAttr, labelAttr, gridAttr } = getItemAttrs(\r\n        defaultAttrs,\r\n        orient,\r\n        {\r\n          text: '' + typeof datasetReverse === 'function' ? datasetReverse(num) : num\r\n        },\r\n        num,\r\n        scaleFY,\r\n        clientRect\r\n      )\r\n      res.scales.push(scaleAttr)\r\n      res.labels.push(labelAttr)\r\n      res.grids.push(gridAttr)\r\n    })\r\n  } else if (type === 'category') {\r\n    let curArr = arr[0]\r\n    let len = axisGap ? curArr.length : curArr.length - 1\r\n    let scaleFY = scaleLinear()\r\n      .domain([0, len])\r\n      .range([0, distance])\r\n    curArr.forEach((cell, ind) => {\r\n      let { scaleAttr, labelAttr, gridAttr } = getItemAttrs(defaultAttrs, orient, cell, ind, scaleFY, clientRect, axisGap)\r\n      res.scales.push(scaleAttr)\r\n      res.labels.push(labelAttr)\r\n      res.grids.push(gridAttr)\r\n    })\r\n    if (axisGap) {\r\n      // 如果是axisGap为true，需要添加一个点\r\n      let { scaleAttr, gridAttr } = getItemAttrs(defaultAttrs, orient, {}, curArr.length, scaleFY, clientRect, axisGap)\r\n      res.scales.push(scaleAttr)\r\n      res.grids.push(gridAttr)\r\n    }\r\n  }\r\n  if (orient === 'left' || orient === 'right') {\r\n    let dx = orient === 'left' ? 0 : width\r\n    res.axisPoints = [\r\n      [dx, height],\r\n      [dx, 0]\r\n    ]\r\n    res.nameAttr = { pos: [dx, 0], anchor: [0.5, 1], padding: [10] }\r\n  } else if (orient === 'bottom' || orient === 'top') {\r\n    let dy = orient === 'bottom' ? height : 0\r\n    res.axisPoints = [\r\n      [0, dy],\r\n      [width, dy]\r\n    ]\r\n    res.nameAttr = { pos: [width, dy], anchor: [0, 1] }\r\n  }\r\n  return res\r\n}\r\nfunction getItemAttrs(defaultAttrs, orient, cell, value, scaleF, clientRect, axisGap) {\r\n  let res = emptyObject()\r\n  let { width, height, left, top } = clientRect\r\n  let labelPosValue = axisGap ? value + 0.5 : value\r\n  if (orient === 'left' || orient === 'right') {\r\n    let x = orient === 'left' ? 0 : width\r\n    let yv = scaleF(value)\r\n    res.scaleAttr = { ...defaultAttrs[orient].scale, pos: [x, height - yv] }\r\n    res.gridAttr = {\r\n      ...defaultAttrs[orient].grid,\r\n      points: [\r\n        [x, height - yv],\r\n        [width, height - yv]\r\n      ]\r\n    }\r\n    res.labelAttr = {\r\n      ...defaultAttrs[orient].label,\r\n      width: left,\r\n      text: '' + cell.text,\r\n      pos: [x, height - scaleF(labelPosValue)]\r\n    }\r\n  } else if (orient === 'top' || orient === 'bottom') {\r\n    let y = orient === 'top' ? 0 : height\r\n    let xv = scaleF(value)\r\n    res.scaleAttr = { ...defaultAttrs[orient].scale, pos: [xv, y] }\r\n    res.gridAttr = {\r\n      ...defaultAttrs[orient].grid,\r\n      points: [\r\n        [xv, 0],\r\n        [xv, y]\r\n      ]\r\n    }\r\n    res.labelAttr = {\r\n      ...defaultAttrs[orient].label,\r\n      width: left,\r\n      text: '' + cell.text,\r\n      pos: [scaleF(labelPosValue), y]\r\n    }\r\n  }\r\n  return res\r\n}\r\n","import Base from '../../base/BasePlugin'\r\nimport { Group, Label, Polyline, Node } from 'spritejs'\r\nimport { emptyObject } from '@qcharts/utils'\r\nimport filterClone from 'filter-clone'\r\nimport layout from './layout'\r\nimport { getStyle } from '@/utils/getStyle'\r\nclass Axis extends Base {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.renderAxis = emptyObject()\r\n  }\r\n  get renderAttrs() {\r\n    //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理\r\n    let attrs = super.renderAttrs\r\n    let targetVisual = this.chart.visuals[0]\r\n    if (attrs.axisGap === undefined && targetVisual && targetVisual.constructor.name === 'Bar') {\r\n      //如果axisGap没有赋值\r\n      //如果是柱状图\r\n      attrs.axisGap = true\r\n    }\r\n    if (targetVisual && targetVisual.constructor.name === 'Scatter') {\r\n      attrs.type = 'value'\r\n    }\r\n    if (attrs.transpose === undefined && targetVisual) {\r\n      //坐标轴转换\r\n      attrs.transpose = targetVisual.renderAttrs.transpose\r\n    }\r\n    return attrs\r\n  }\r\n  beforeRender() {\r\n    let { axis } = this.getRenderData()\r\n    return axis\r\n  }\r\n  beforeUpdate() {\r\n    let { axis } = this.getRenderData()\r\n    return axis\r\n  }\r\n  rendered() {\r\n    //console.log(this.$refs['wrap'])\r\n  }\r\n  defaultAttrs() {\r\n    return {\r\n      layer: 'axis',\r\n      zIndex: -1,\r\n      formatter: e => e\r\n    }\r\n  }\r\n  //defaultStyles() {}\r\n  getRenderData() {\r\n    //根据axis的特性返回需要数据\r\n    let renderAttrs = this.renderAttrs\r\n    let renderData = this.dataset[renderAttrs.layoutBy]\r\n    let axis = layout.call(this, renderData, renderAttrs)\r\n    return { axis }\r\n  }\r\n  render(axis) {\r\n    let oldAxis = this.renderAxis || emptyObject()\r\n    this.renderAxis = axis\r\n    let { clientRect, formatter, orient, name } = this.renderAttrs\r\n    //渲染的样式，合并了theme中的styles与组件上的defaultStyles\r\n    let styles = this.renderStyles\r\n    let axisStyle = getStyle(this, 'axis', styles.axis)\r\n    //当前主体颜色\r\n    let arrOrient = this.chart.plugins\r\n      .map(plugin => {\r\n        if (plugin.constructor.name === 'Axis') {\r\n          return plugin.renderAttrs.orient\r\n        }\r\n      })\r\n      .filter(Boolean)\r\n    let nameStyle = getStyle(this, 'name', [styles.name || {}, filterClone(axis.nameAttr, [], ['pos'])])\r\n    let oldPos = (oldAxis.nameAttr && oldAxis.nameAttr.pos) || axis.nameAttr.pos\r\n    let nameAni = { from: { pos: oldPos }, to: { pos: axis.nameAttr.pos } }\r\n    return (\r\n      <Group ref=\"wrap\" pos={[clientRect.left, clientRect.top]}>\r\n        <Polyline\r\n          {...axisStyle}\r\n          animation={{\r\n            from: { points: oldAxis.axisPoints },\r\n            to: { points: axis.axisPoints }\r\n          }}\r\n        ></Polyline>\r\n        <Group>\r\n          {axis.grids.map((grid, ind) => {\r\n            let fromPoints = (oldAxis.grids && oldAxis.grids[ind] && oldAxis.grids[ind].points) || grid.points\r\n            let ani = {\r\n              from: { points: fromPoints },\r\n              to: { points: grid.points }\r\n            }\r\n            let style = getStyle(this, 'grid', styles.grid, [ind])\r\n            if (orient === 'left' || orient === 'right') {\r\n              if ((ind === 0 && arrOrient.includes('bottom')) || (ind === axis.grids.length - 1 && arrOrient.includes('top'))) {\r\n                return <Node />\r\n              }\r\n            } else if (orient === 'top' || orient === 'bottom') {\r\n              if ((ind === 0 && arrOrient.includes('left')) || (ind === axis.grids.length - 1 && arrOrient.includes('right'))) {\r\n                return <Node />\r\n              }\r\n            }\r\n            return style === false ? <Node /> : <Polyline {...style} points={ani.from.points} animation={ani} />\r\n          })}\r\n          {axis.scales.map((scale, ind) => {\r\n            let fromPos = (oldAxis.scales && oldAxis.scales[ind] && oldAxis.scales[ind].pos) || scale.pos\r\n            let ani = { from: { pos: fromPos }, to: { pos: scale.pos } }\r\n            // 排除pos属性，pos属性用来处理动画，其它属性直接赋值\r\n            let style = getStyle(this, 'scale', styles.scale, [scale, ind])\r\n            return style === false ? <Node /> : <Group {...filterClone(scale, [], ['pos'])} {...style} animation={ani}></Group>\r\n          })}\r\n          {axis.labels.map((label, ind) => {\r\n            let fromPos = (oldAxis.labels && oldAxis.labels[ind] && oldAxis.labels[ind].pos) || label.pos\r\n            let style = getStyle(this, 'label', styles.label, [label, ind])\r\n            let ani = { from: { pos: fromPos }, to: { pos: label.pos } }\r\n            return style === false ? <Node /> : <Label {...filterClone(label, [], ['pos', 'text'])} {...style} text={formatter(label.text)} animation={ani}></Label>\r\n          })}\r\n        </Group>\r\n        {nameStyle === false || name === undefined || name.length === 0 ? <Node /> : <Label {...nameStyle} text={name} animation={nameAni} />}\r\n      </Group>\r\n    )\r\n  }\r\n}\r\nexport default Axis\r\n","import Base from \"../../base/BasePlugin\"\r\nimport { Group, Path, Label } from \"spritejs\"\r\nimport { getStyle } from \"@/utils/getStyle\"\r\nimport Point from \"../../utils/Point\"\r\nclass Legend extends Base {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.arrLayout = null\r\n    this.state = {\r\n      page: 1,\r\n      totalPage: 1,\r\n      perPageWidthOrHeight: 0, // 每页长度（或宽度）\r\n      paginationSize: [0, 0], // 分页控件大小\r\n      groupSize: [0, 0], // legends 容器大小\r\n    }\r\n    this.twiceRender = false\r\n    this.animationSwitch = false\r\n    this.posFrom = [0, 0]\r\n    this.currentPos = [0, 0]\r\n    this.legendStateArray = []\r\n  }\r\n  get renderAttrs() {\r\n    //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理\r\n    let attrs = super.renderAttrs\r\n    return attrs\r\n  }\r\n  defaultAttrs() {\r\n    return {\r\n      orient: \"horizontal\", // 布局方式， vertical | horizontal\r\n      align: [\"center\", \"bottom\"], // 水平方向布局，left | center | right, 垂直方向布局，top | center | bottom\r\n      formatter: (d) => d.value || d,\r\n      iconSize: [12, 12],\r\n      textSize: [40, 12],\r\n      outGap: 10,\r\n      innerGap: 4,\r\n      formatter: (d) => d.text || d,\r\n    }\r\n  }\r\n  get pos() {\r\n    const { clientRect, align } = this.renderAttrs\r\n    let groupSize = this.state.groupSize\r\n    let { width, height, top, left, right, bottom } = clientRect\r\n    let canvasWidth = width + left + right\r\n    let canvasHeight = height + top + bottom\r\n    this.state.paginationSize = this.isVertical ? [30, 60] : [70, 25]\r\n\r\n    const isValidLayout = (value, type) => {\r\n      if (type === \"horizontal\") {\r\n        // 水平布局\r\n        return [\"default\", \"left\", \"center\", \"right\"].indexOf(value) > -1\r\n      } else {\r\n        // 垂直布局\r\n        return [\"default\", \"top\", \"center\", \"bottom\"].indexOf(value) > -1\r\n      }\r\n    }\r\n\r\n    const hLocation = {\r\n      // 水平定位\r\n      default: 0,\r\n      left: 2,\r\n      center: (canvasWidth - groupSize[0]) / 2,\r\n      right: canvasWidth - groupSize[0] - 2,\r\n      numberOrPercent(num) {\r\n        // 输入 数字或百分比\r\n        if (typeof num === \"number\") {\r\n          return num\r\n        } else {\r\n          let val = 0\r\n          try {\r\n            val = parseFloat(num) / 100\r\n          } catch (e) {}\r\n          return (canvasWidth - groupSize[0]) * val\r\n        }\r\n      },\r\n    }\r\n\r\n    const vLocation = {\r\n      // 垂直定位\r\n      default: 0,\r\n      top: 2,\r\n      center: canvasHeight / 2 - groupSize[1] / 2,\r\n      bottom: canvasHeight - groupSize[1] - 2,\r\n      numberOrPercent(num) {\r\n        // 输入 数字或百分比\r\n        if (typeof num === \"number\") {\r\n          return num\r\n        } else {\r\n          let val = 0\r\n\r\n          try {\r\n            val = parseFloat(num) / 100\r\n          } catch (e) {}\r\n          return (canvasHeight - groupSize[1]) * val\r\n        }\r\n      },\r\n    }\r\n    let pos = [\r\n      isValidLayout(align[0], \"horizontal\")\r\n        ? hLocation[align[0]]\r\n        : hLocation.numberOrPercent(align[0]),\r\n      isValidLayout(align[1], \"vertical\")\r\n        ? vLocation[align[1]]\r\n        : vLocation.numberOrPercent(align[1]),\r\n    ]\r\n    let pagePos\r\n    let totalPageX = Math.ceil(this.state.groupSize[0] / canvasWidth)\r\n    let totalPageY = Math.ceil(this.state.groupSize[1] / canvasHeight)\r\n    let paginationSize = this.state.paginationSize\r\n    let pagePrev, pageText, pageNext\r\n    if (totalPageX > 1) {\r\n      this.state.totalPage = totalPageX\r\n      let pagePosY =\r\n        pos[1] + groupSize[1] + paginationSize[1] > canvasHeight\r\n          ? pos[1] - paginationSize[1]\r\n          : pos[1] + groupSize[1]\r\n      pagePos = [canvasWidth - paginationSize[0], pagePosY]\r\n      pagePrev = [0, 0]\r\n      pageText = [15, 0]\r\n      pageNext = [45, 0]\r\n      pos[0] = -(this.state.page - 1) * canvasWidth\r\n    } else if (totalPageY > 1) {\r\n      this.state.totalPage = totalPageY\r\n      let pagePosX =\r\n        pos[0] + groupSize[0] + paginationSize[0] > canvasWidth\r\n          ? pos[0] - paginationSize[0]\r\n          : pos[0] + groupSize[0]\r\n      pagePos = [pagePosX, canvasHeight - paginationSize[1]]\r\n      pagePrev = [5, 0]\r\n      pageText = [0, 20]\r\n      pageNext = [5, 40]\r\n      pos[1] = -(this.state.page - 1) * canvasHeight\r\n    } else {\r\n      this.state.page = 1\r\n      this.state.totalPage = 1\r\n    }\r\n    return {\r\n      pos: pos,\r\n      pagePos: { pos: pagePos, pagePrev, pageText, pageNext },\r\n    }\r\n  }\r\n\r\n  get isVertical() {\r\n    return this.renderAttrs.orient === \"vertical\"\r\n  }\r\n  beforeRender() {\r\n    if (this.twiceRender) {\r\n      this.reset()\r\n    } else {\r\n      this.arrLayout = this.getRenderData().arrLayout\r\n    }\r\n    return this.arrLayout\r\n  }\r\n\r\n  getRenderData() {\r\n    let { layoutBy, innerGap } = this.renderAttrs\r\n    let renderData = this.dataset[layoutBy].map((item, index) => {\r\n      this.legendStateArray.push(item.state)\r\n      return {\r\n        name: item.name,\r\n        state: item.state,\r\n      }\r\n    })\r\n    let arrLayout = renderData.map((item) => {\r\n      return {\r\n        textAttrs: {\r\n          text: item.name,\r\n          paddingLeft: innerGap,\r\n        },\r\n      }\r\n    })\r\n    this.arrLayout = arrLayout\r\n    return { arrLayout }\r\n  }\r\n  itemClick(e, el) {\r\n    const ind = el.attr(\"_index\")\r\n    let state = this.dataset[this.renderAttrs.layoutBy][ind].state\r\n    state = state !== \"disabled\" ? \"disabled\" : \"default\"\r\n    this.dataset[this.renderAttrs.layoutBy][ind].state = state\r\n  }\r\n  itemLeave(e, el) {\r\n    const ind = el.attr(\"_index\")\r\n    this.legendStateArray[ind] = \"default\"\r\n    this.update()\r\n  }\r\n  itemMove(e, el) {\r\n    const ind = el.attr(\"_index\")\r\n    if (this.legendStateArray[ind] === \"default\") {\r\n      this.legendStateArray[ind] = \"hover\"\r\n      this.update()\r\n    }\r\n  }\r\n  beforeUpdate(params) {\r\n    if (params && params.type === \"source\") {\r\n      this.animationSwitch = true\r\n      this.twiceRender = false\r\n      return this.beforeRender()\r\n    } else {\r\n      if (params && params.type === \"resize\") {\r\n        this.animationSwitch = true\r\n      }\r\n      return this.arrLayout\r\n    }\r\n  }\r\n\r\n  rendered() {\r\n    // console.log(\"rendered\");\r\n  }\r\n\r\n  afterrender(e, el) {\r\n    if (this.twiceRender) {\r\n      this.animationSwitch = false\r\n      return\r\n    }\r\n    this.twiceRender = true\r\n    this.reset()\r\n    this.update()\r\n  }\r\n  reset() {\r\n    let legendsSize = [0, 0]\r\n    let { outGap, innerGap, iconSize, textSize } = this.renderAttrs\r\n    let maxTextWidth = 0\r\n    let colors = this.theme.colors\r\n    this.arrLayout = this.arrLayout.map((item, index) => {\r\n      item.iconAttrs = {}\r\n      let iconEl = this.$refs[\"icon\" + index]\r\n      let iconRect = iconEl.getBoundingClientRect()\r\n      let textEl = this.$refs[\"text\" + index]\r\n      let textRect = textEl.getBoundingClientRect()\r\n      let iconAttrs = {\r\n        bgcolor: colors[index],\r\n        size: iconSize,\r\n        pos: this.isVertical\r\n          ? [0, legendsSize[1] + (textRect.height - iconSize[1]) / 2]\r\n          : [legendsSize[0], (textRect.height - iconSize[1]) / 2],\r\n      }\r\n      if (this.dataset[this.renderAttrs.layoutBy][index].state === \"disabled\") {\r\n        iconAttrs.bgcolor = \"#ccc\"\r\n        iconAttrs.fillColor = \"#ccc\"\r\n      }\r\n      let textAttrs = {\r\n        ...item.textAttrs,\r\n        pos: this.isVertical\r\n          ? [iconSize[0], legendsSize[1]]\r\n          : [iconSize[0] + legendsSize[0], 0],\r\n        text: item.textAttrs.text,\r\n      }\r\n      let size = [iconSize[0] + textRect.width, iconSize[1]]\r\n      if (size[0] + outGap > maxTextWidth) {\r\n        maxTextWidth = size[0] + outGap\r\n      }\r\n      legendsSize = this.isVertical\r\n        ? [maxTextWidth, legendsSize[1] + textRect.height + outGap]\r\n        : [legendsSize[0] + size[0] + outGap, textRect.height]\r\n      return { iconAttrs, textAttrs }\r\n    })\r\n    this.state.groupSize = legendsSize\r\n  }\r\n  changePage(e, el) {\r\n    if (el.name === \"prev\" && this.state.page > 1) {\r\n      this.state.page--\r\n      this.animationSwitch = true\r\n      this.update()\r\n    } else if (el.name === \"next\" && this.state.page < this.state.totalPage) {\r\n      this.state.page++\r\n      this.animationSwitch = true\r\n      this.update()\r\n    }\r\n  }\r\n  render(arr) {\r\n    this.posFrom = this.currentPos\r\n    const { pos, pagePos } = this.pos\r\n    this.posFrom = this.twiceRender && this.animationSwitch ? this.posFrom : pos\r\n    const { page, totalPage } = this.state\r\n    this.currentPos = pos\r\n    const styles = this.renderStyles\r\n    const isVertical = this.isVertical\r\n    if (this.twiceRender) {\r\n      pos[0] = pos[0] - 1\r\n    }\r\n    const { formatter } = this.renderAttrs\r\n    if (arr) {\r\n      return (\r\n        <Group size={[1, 1]} onAfterrender={this.afterrender}>\r\n          <Group\r\n            animation={{\r\n              from: { pos: this.posFrom },\r\n              to: { pos: pos },\r\n              duration:\r\n                this.twiceRender && this.animationSwitch\r\n                  ? this.renderAttrs.animation.duration\r\n                  : 0,\r\n            }}\r\n            // pos={pos}\r\n          >\r\n            {arr.map((attrs, ind) => {\r\n              let cell = this.dataset[this.renderAttrs.layoutBy][ind]\r\n              let hover = this.legendStateArray[ind] === \"hover\"\r\n              let disabled = cell.state === \"disabled\"\r\n              let style = getStyle(\r\n                this,\r\n                \"point\",\r\n                [{}, styles.point],\r\n                [cell, ind]\r\n              )\r\n\r\n              let hoverStyle = hover\r\n                ? getStyle(this, \"point:hover\", [{}], [cell, ind])\r\n                : {}\r\n\r\n              if (disabled && attrs.iconAttrs.bgcolor) {\r\n                hoverStyle.bgcolor = \"#ccc\"\r\n                hoverStyle.fillColor = \"#ccc\"\r\n              }\r\n              let textStyle = getStyle(\r\n                this,\r\n                \"text\",\r\n                [{}, styles.text],\r\n                [cell, ind]\r\n              )\r\n              let textHoverStyle = hover\r\n                ? getStyle(this, \"text:hover\", [{}], [cell, ind])\r\n                : {}\r\n\r\n              attrs.textAttrs.text = formatter(cell.name, cell.data, ind)\r\n              return (\r\n                <Group\r\n                  onClick={this.itemClick}\r\n                  onMouseleave={this.itemLeave}\r\n                  onMouseenter={this.itemMove}\r\n                  onMousemove={this.itemMove}\r\n                  {...{ _index: ind }}\r\n                >\r\n                  <Point\r\n                    {...{ ref: \"icon\" + ind }}\r\n                    {...attrs.iconAttrs}\r\n                    {...style}\r\n                    {...hoverStyle}\r\n                  />\r\n                  <Label\r\n                    {...{ ref: \"text\" + ind }}\r\n                    {...attrs.textAttrs}\r\n                    {...textStyle}\r\n                    {...textHoverStyle}\r\n                  />\r\n                </Group>\r\n              )\r\n            })}\r\n          </Group>\r\n\r\n          {totalPage <= 1 ? null : (\r\n            <Group pos={pagePos.pos}>\r\n              <Path\r\n                pos={pagePos.pagePrev}\r\n                {...(isVertical ? { marginLeft: 5 } : {})}\r\n                name={\"prev\"}\r\n                padding={[isVertical ? 2 : 1, 0, 0, 0]}\r\n                d={\r\n                  isVertical\r\n                    ? \"M 0 15 L 15 15 L7.5 0 Z\"\r\n                    : \"M 0 7.5 L 13 0 L13 15 Z\"\r\n                }\r\n                fillColor={page <= 1 ? \"#ccc\" : \"#324556\"}\r\n                onClick={this.changePage}\r\n              />\r\n              <Label\r\n                pos={pagePos.pageText}\r\n                ref=\"paginationText\"\r\n                fontSize=\"14px\"\r\n                text={page + \"/\" + totalPage + \"\"}\r\n                lineBreak=\"normal\"\r\n                padding={isVertical ? [0, 2] : [0, 2]}\r\n              />\r\n\r\n              <Path\r\n                pos={pagePos.pageNext}\r\n                {...(isVertical ? { marginLeft: 5 } : {})}\r\n                name={\"next\"}\r\n                padding={[isVertical ? 2 : 1, 0, 0, 0]}\r\n                d={\r\n                  isVertical\r\n                    ? \"M 0 0 L 15 0 L7.5 13 Z\"\r\n                    : \"M 13 7.5 L 0 0 L0 15 Z\"\r\n                }\r\n                fillColor={page >= totalPage ? \"#ccc\" : \"#324556\"}\r\n                onClick={this.changePage}\r\n              />\r\n            </Group>\r\n          )}\r\n        </Group>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default Legend\r\n","import Base from '../../base/BasePlugin'\r\nimport { throttle } from '@qcharts/utils'\r\nclass Tooltip extends Base {\r\n  constructor(attrs) {\r\n    super(attrs)\r\n    this.$el = null\r\n  }\r\n  get renderAttrs() {\r\n    //处理默认属性，变为渲染时的属性，比如高宽的百分比，通用属性到base中处理\r\n    let attrs = super.renderAttrs\r\n    return attrs\r\n  }\r\n  beforeRender() {}\r\n  beforeUpdate() {}\r\n  tipMousemove = throttle(\r\n    e => {\r\n      let maxLeft = window.innerWidth - this.$el.getBoundingClientRect().width - 5\r\n      let maxTop = window.innerHeight - this.$el.getBoundingClientRect().height - 5\r\n      let tarTop = e.y > maxTop ? maxTop : e.y\r\n      let tarLeft = e.x > maxLeft ? maxLeft : e.x\r\n      this.$el.style.left = tarLeft + 'px'\r\n      this.$el.style.top = tarTop + 'px'\r\n    },\r\n    100,\r\n    1\r\n  )\r\n  rendered() {\r\n    let { colors, sort, formatter } = this.renderAttrs\r\n    this.chart.dataset.on('change', data => {\r\n      let { option } = data\r\n      this.$el.innerHTML = ''\r\n      // let reverse = param => {\r\n      //   return typeof this.dataset.datasetReverse === 'function' ? this.dataset.datasetReverse(param) : param\r\n      // }\r\n      if (option.value === 'hover') {\r\n        let arr = [].concat(this.chart.dataset).filter(item => item.state === 'hover')\r\n        if (sort) {\r\n          arr.sort(sort)\r\n        }\r\n        if (arr.length) {\r\n          let innerHtml = ''\r\n          let $div = document.createElement('div')\r\n          $div.style.cssText = 'white-space:nowrap;padding:6px 10px;background-color:rgba(0,0,0,0.5);color:#fff;'\r\n          arr.forEach((item, ind) => {\r\n            let text = `${item.text}：${item.value}`\r\n            if (formatter) {\r\n              text = formatter(item.data) || text\r\n            }\r\n            let html = `<div class=\"tooltip-item\"><span class=\"icon\" style=\"margin-right:6px;display:inline-block;width:10px;height:10px;background-color:${colors[ind]}\"></span><span class=\"text\">${text}</span></div>`\r\n            innerHtml += html\r\n          })\r\n          $div.innerHTML = innerHtml\r\n          this.$el.appendChild($div)\r\n        }\r\n      } else if (option.name === 'reset') {\r\n        this.$el.innerHTML = ''\r\n      }\r\n    })\r\n    document.body.addEventListener('mousemove', this.tipMousemove)\r\n  }\r\n  render() {\r\n    if (!this.$el) {\r\n      this.$el = document.createElement('div')\r\n      this.$el.className = 'qcharts-tooltip'\r\n      this.$el.style.cssText = 'transition:top 300ms ease-out,left 300ms ease-out;position:absolute;pointEvents:none;pointer-events:none;font-size:14px;'\r\n    }\r\n    document.body.appendChild(this.$el)\r\n  }\r\n}\r\nexport default Tooltip\r\n","import Base from './base/Base'\r\nimport { jsType, emptyObject, throttle } from '@qcharts/utils'\r\nimport { getGlobal, isWeiXin } from './base/platform'\r\nimport BaseVisual from './base/BaseVisual'\r\nimport BasePlugin from './base/BasePlugin'\r\nimport { Scene } from 'spritejs'\r\nimport { Wave, Gauge } from './index'\r\nclass Chart extends Base {\r\n  constructor(attr) {\r\n    super()\r\n    let { container } = attr\r\n    if (jsType(container) === 'string') {\r\n      container = document.querySelector(container)\r\n    }\r\n    this.$el = container\r\n    this.visuals = []\r\n    this.plugins = []\r\n    this.children = []\r\n    if (isWeiXin()) {\r\n      const { pixelUnit='rpx', size, contextType } = attr\r\n      let displayRatio = 1\r\n      if (pixelUnit === 'rpx') {\r\n        const { windowWidth } = wx.getSystemInfoSync()\r\n        displayRatio = windowWidth / 750\r\n      }\r\n      this.scene = new Scene({\r\n        width: size[0] / displayRatio,\r\n        height: size[1] / displayRatio,\r\n        extra: this,\r\n        contextType,\r\n        displayRatio\r\n      })\r\n    } else {\r\n      this.scene = new Scene({ container, displayRatio: getGlobal().devicePixelRatio })\r\n    }\r\n    this.scene.addEventListener('resize', (_) => {\r\n      //舞台变化的时候\r\n      this.checkUpdate({ type: 'resize' })\r\n    })\r\n    this.checkUpdate = throttle((args) => {\r\n      this.children.forEach((node) => {\r\n        node.update(args)\r\n      })\r\n    }, 300)\r\n    this.checkRender = throttle((_) => {\r\n      this.children.forEach((child) => {\r\n        child.created()\r\n        this.dataset.addDep(child)\r\n      })\r\n      this.__store.__isCreated__ = true\r\n      this.dispatchEvent('updated', emptyObject())\r\n    })\r\n  }\r\n  update(args) {\r\n    //图表发生更新，触发图表内组件更新\r\n    this.checkUpdate(args)\r\n  }\r\n  append(node) {\r\n    const notNeedDataSetList = [Wave, Gauge]\r\n    if (notNeedDataSetList.some((Target) => node instanceof Target)) {\r\n      //补齐dataset，wave中不用dataset\r\n      this.source([], {})\r\n    } else if (!this.dataset) {\r\n      console.error('Chart should set data before append some graphs')\r\n      return\r\n    }\r\n    if (jsType(node) === 'array') {\r\n      node.forEach((item) => {\r\n        this.append(item)\r\n      })\r\n      return\r\n    } else if (node instanceof BaseVisual) {\r\n      this.visuals.push(node)\r\n    } else if (node instanceof BasePlugin) {\r\n      this.plugins.push(node)\r\n    }\r\n    this.children.push(node)\r\n    node.chart = this\r\n    node.scene = this.scene\r\n    this.checkRender()\r\n  }\r\n  getDataURL() {\r\n    return this.scene.snapshot().toDataURL()\r\n  }\r\n}\r\n\r\nexport default Chart\r\n","import { h, easing } from '@qcharts/vnode'\r\nimport Dataset from '@qcharts/dataset'\r\nimport Line from './visuals/Line/index'\r\nimport Pie from './visuals/Pie/index'\r\nimport Area from './visuals/Area/index'\r\nimport Radar from './visuals/Radar/index'\r\nimport Bar from './visuals/Bar/index'\r\nimport PolarBar from './visuals/PolarBar/index'\r\nimport Funnel from './visuals/Funnel/index'\r\nimport Scatter from './visuals/Scatter/index'\r\nimport Wave from './visuals/Wave/index'\r\nimport Gauge from './visuals/Gauge'\r\nimport RadialBar from './visuals/RadialBar'\r\nimport Axis from './plugins/Axis/index'\r\nimport Legend from './plugins/Legend/index'\r\nimport Tooltip from './plugins/Tooltip/index'\r\nimport {getGlobal} from './base/platform'\r\nimport Chart from './Chart'\r\nimport theme from './theme/default'\r\nconst qcharts = {\r\n  version: '1.0.0',\r\n  Line,\r\n  Pie,\r\n  Area,\r\n  Radar,\r\n  Bar,\r\n  PolarBar,\r\n  Funnel,\r\n  Scatter,\r\n  Gauge,\r\n  RadialBar,\r\n  Legend,\r\n  Axis,\r\n  Wave,\r\n  Tooltip,\r\n  h,\r\n  theme,\r\n  Chart,\r\n  easing\r\n}\r\n\r\nconst global = getGlobal()\r\nglobal.qcharts = qcharts\r\n\r\nexport { Dataset, Line, Pie, Area, Wave, Radar, Tooltip, Bar, PolarBar, Funnel, Scatter, Gauge, RadialBar, Axis, Legend, Chart, h, theme, easing }\r\n\r\nexport default qcharts\r\n"],"sourceRoot":""}