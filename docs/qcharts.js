!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("spritejs")):"function"==typeof define&&define.amd?define(["spritejs"],e):"object"==typeof exports?exports.qcharts=e(require("spritejs")):t.qcharts=e(t.spritejs)}(window,(function(t){return function(t){var e={};function __webpack_require__(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,__webpack_require__),s.l=!0,s.exports}return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,a){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)__webpack_require__.d(a,s,function(e){return t[e]}.bind(null,s));return a},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=73)}({0:function(e,a){e.exports=t},2:function(t,e,a){window,t.exports=function(t){var e={};function n(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,a){"use strict";function r(...t){let e=t[0];if(t.length>1)for(let a=1;a<t.length;a++)n(e,t[a]);return e;function n(t,e){for(var a in e)t[a]=t[a]&&"[object Object]"===t[a].toString()?r(t[a],e[a]):t[a]=e[a];return t}}function o(){return Object.create(null)}function u(t){const e=typeof t;return"object"===e?null===t?null:Object.prototype.toString.call(t).slice(8,-1).toLowerCase():e}function i(t,e=16,a=!1){let s=null,l=a;return function(...a){if(l)return t.apply(this,a),l=!1;s||(s=setTimeout(()=>{clearTimeout(s),s=null,t.apply(this,a)},e))}}function c(t,e){return"string"===u(t)&&t.match(/%$/)?Number(t.substring(0,t.indexOf("%")))/100*e:t}a.r(e),a.d(e,"deepObjectMerge",(function(){return r})),a.d(e,"emptyObject",(function(){return o})),a.d(e,"jsType",(function(){return u})),a.d(e,"throttle",(function(){return i})),a.d(e,"getDistancePx",(function(){return c}))}])},3:function(t,e,a){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function filterClone(t,e,a){var s=t;if("object"==_typeof(t))if("array"===getType(t)){s=[];for(var l=0,f=t.length;l<f;l++)s.push(filterClone(t[l],e,a))}else if(null!==t)for(var p in s=Object.create(null),t)e&&"array"===getType(e)&&e.length?-1!=e.indexOf(p)&&(s[p]=filterClone(t[p],e,a)):e&&"regexp"===getType(e)?e.test(p)&&(s[p]=filterClone(t[p],e,a)):e&&"function"===getType(e)?e(p,t[p])&&(s[p]=filterClone(t[p],e,a)):a&&"array"===getType(a)&&a.length?-1===a.indexOf(p)&&(s[p]=filterClone(t[p],e,a)):a&&"regexp"===getType(a)?a.test(p)||(s[p]=filterClone(t[p],e,a)):a&&"function"===getType(a)&&a(p,t[p])||(s[p]=filterClone(t[p],e,a));return s;function getType(t){var e=_typeof(t);return"object"===e?null===t?null:Object.prototype.toString.call(t).slice(8,-1).toLowerCase():e}};e.default=s},73:function(t,e,a){"use strict";a.r(e),a.d(e,"qcharts",(function(){return H})),a.d(e,"version",(function(){return K})),a.d(e,"Dataset",(function(){return m})),a.d(e,"Line",(function(){return E})),a.d(e,"Pie",(function(){return T})),a.d(e,"Area",(function(){return B})),a.d(e,"Wave",(function(){return z})),a.d(e,"Radar",(function(){return L})),a.d(e,"LineTest",(function(){return D})),a.d(e,"Tooltip",(function(){return F})),a.d(e,"Bar",(function(){return I})),a.d(e,"PolarBar",(function(){return q})),a.d(e,"Scatter",(function(){return W})),a.d(e,"Axis",(function(){return G})),a.d(e,"Legend",(function(){return $})),a.d(e,"Chart",(function(){return V})),a.d(e,"h",(function(){return h})),a.d(e,"theme",(function(){return M}));const VNode=function(){};function h(t,e,...a){const s=new VNode;var l;return s.tagName=t,s.attrs=e||{},s.children=(l=a,[].concat.apply([],l)).filter(Boolean),s}const isNull=t=>null==t,diffVNodeChildren=(t,e)=>{const a=[],s=Math.max(t.children.length,e.children.length);for(let l=0;l<s;l++)a[l]=diff(t.children[l],e.children[l]);return a},diffVNodeAttrs=(t,e)=>{let a=[];const s=t.attrs,l=e.attrs;return a=Object.assign({},s,l),a};function diff(t,e){return isNull(t)?{type:"CREATE",newVNode:e}:isNull(e)?{type:"REMOVE"}:((t,e)=>"object"!=typeof t&&t!==e||"object"!=typeof e&&t!==e||t.tagName!==e.tagName)(t,e)?{type:"REPLACE",newVNode:e}:e.tagName?{type:"UPDATE",children:diffVNodeChildren(t,e),attrs:diffVNodeAttrs(t,e)}:void 0}function createElement(t){if(!t)return;let{tagName:e,attrs:a,children:s}=t;const l=new e;return patchAttrs(this,l,a),l.appendChild&&s.map(createElement.bind(this)).filter(Boolean).forEach(l.appendChild.bind(l)),l}const s={linear:function(t){return t},quadIn:t=>t*t,quadOut:t=>t*(2-t),quadInOut:t=>((t*=2)<=1?t*t:--t*(2-t)+1)/2,cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,a=.1;return 0===t?0:1===t?1:(!a||a<1?(a=1,e=.1):e=.4*Math.asin(1/a)/(2*Math.PI),-a*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,a=.1;return 0===t?0:1===t?1:(!a||a<1?(a=1,e=.1):e=.4*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,a=.1,s=.4;return 0===t?0:1===t?1:(!a||a<1?(a=1,e=.1):e=s*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?a*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/s)*-.5:a*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/s)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-s.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*s.bounceIn(2*t):.5*s.bounceOut(2*t-1)+.5}};var l=s,f=a(2);const number=(t,e)=>a=>t+(e-t)*a,array=(t,e)=>{const a=e?e.length:0,s=t?Math.min(a,t.length):0,l=new Array(s),f=new Array(a);let p;for(p=0;p<s;++p)l[p]=interpolate(t[p],e[p]);for(;p<a;++p)f[p]=e[p];return t=>{for(p=0;p<s;++p)f[p]=l[p](t);return f}},object=(t,e)=>{let a,s={},l={};for(a in t&&"object"!==!Object(f.jsType)(t)||(t={}),e&&"object"!==!Object(f.jsType)(e)||(e={}),e)a in t?s[a]=interpolate(t[a],e[a]):l[a]=e[a];return t=>{for(a in s)l[a]=s[a](t);return l}};function interpolate(t,e){let a=typeof e;return null===e||"string"===a||"boolean"===a?(s=e,()=>s):("number"===a?number:"array"===Object(f.jsType)(e)?array:object)(t,e);var s}function now(){return"undefined"!=typeof performance?performance.now():Date.now()}let p=window.requestAnimationFrame,d=window.cancelAnimationFrame;if(!p){const t=now();p=e=>setTimeout(()=>{e(now()-t)},16),d=t=>clearTimeout(t)}function Tween(t="linear"){return this._start=null,this._end=null,this._delay=0,this._canceled=!1,this._duration=1,this._easing=l[t]?l[t]:l.linear,this._onUpdate=()=>{},this._onStart=()=>{},this}Tween.prototype={from(t){return this._start=t,this},to(t){return this._end=t,this},duration(t){if("number"!=typeof t)throw new Error("Duration time must be a number");return this._duration=t,this},delay(t){return this._delay=t,this},easing(t){if("function"!=typeof t)throw new Error("easing function must be a function");return this._easing=t,this},onStart(t){if("function"!=typeof t)throw new Error("start callback must be a function");return this._onStart=t,this},onUpdate(t){if("function"!=typeof t)throw new Error("update callback must be a function");return this._onUpdate=t,this},onComplete(t){if("function"!=typeof t)throw new Error("complete callback must be a function");return this._onComplete=t,this},start(){const t=this._easing,e=interpolate(this._start,this._end),a=this._onUpdate;let s=0,l=this._duration,f=null,y=this._delay,b=0;return new Promise(g=>{const step=()=>{s=now()-b;const y=t(Math.min(1,s/l));s>=l?(a(e(1)),g(this),d(f)):(a(e(y)),f=p(step))},start=()=>{b=now(),this._onStart(this._start,this._end),f=p(step)};var _;this.cancel=()=>{d(f)},y&&y>0?(_=y,new Promise(t=>setTimeout(()=>{t()},_))).then(start):start()})}};var y=Tween,b=a(3),g=a.n(b);function patchAttrs(t,e,a){e&&Object.keys(a).length&&(function(t,e,a){const s=a.ref;if(delete a.ref,s&&e)try{t.addRef(s,e)}catch(t){console.error(t)}}(t,e,a),function(t,e,a={}){Object.keys(a).forEach(s=>{if(!/^on/.test(s))return;const l=s.split("on")[1].toLowerCase(),f=a[s]||(()=>{});e.removeAllListeners(l),e.addEventListener(l,a=>f.call(t,a,e)),delete a[s]})}(t,e,a),function(t,e,a={}){let s=a.states,l=a.state;if(s&&l){let p=e.attr("state");if(l!==p){let d=e.attr("states")||Object(f.emptyObject)(),y=Object(f.deepObjectMerge)(Object(f.emptyObject)(),a,d[p]),b=Object(f.deepObjectMerge)(Object(f.emptyObject)(),a,s[l]);e.attr(y);let{duration:g}=Object(f.deepObjectMerge)(Object(f.emptyObject)(),t.renderAttrs.animation,s.animation);e.transition(g/1e3).attr(b)}}else e.attr(a)}(t,e,a),function(t,e,a){if(!e||!a.animation)return;const s=Object(f.deepObjectMerge)(t.renderAttrs.animation,a.animation),{from:l,middle:p,use:d,to:b,delay:_,duration:v,useTween:m,formatter:O=(t=>t)}=s;if(!l||!b||!d)return;l&&e.attr(l);let P=g()(s,null,["from","to","formatter","use"]);(()=>{if(m)(new y).from(l).to(b).delay(_).duration(v).onUpdate(t=>{e.attr(O(t))}).start();else{let t=null;t=p?[l,p,b]:[l,b],e.animate(t,{fill:"both",...P}).finished.then(()=>{delete b.offset,e.attr(b)})}})()}(t,e,a))}function patch(t,e,a=0){let s=this;if(t||e)switch(e.type){case"CREATE":{const{newVNode:l}=e,f=createElement.bind(s)(l);f&&(a&&(s.$el=f),t.appendChild(f));break}case"REPLACE":{const{newVNode:a}=e,l=createElement.bind(s)(a);t.parent.replaceChild(l,t);break}case"REMOVE":t.remove();break;case"UPDATE":{const{attrs:a,children:l}=e;if(patchAttrs(s,t,a),t.children&&l.length){t.children.forEach((t,e)=>{t._ind=e}),l.forEach((t,e)=>{t._ind=e});let e=l.length>t.children.length?l.length:t.children.length;for(let a=0;a<e;a++){let e=t.children.filter(t=>t._ind===a)[0],f=l.filter(t=>t._ind===a)[0];f&&"CREATE"===f.type?patch.bind(s)(t,f):patch.bind(s)(e,f)}}break}}}var _={default:"default",hide:"hide",hover:"hover",active:"active",disabled:"disabled",mixed:"mixed"};function mixinEvent(t){if(t.__store){t.__store.events=[];let e=t.__store.events;t.on=function(a,s){return e.push({type:a,cb:s}),t},t.off=function(a,s){for(let t=0;t<e.length;t++)if(void 0===s)e=[];else{let l=e[t];l.type===a&&l.cb===s&&(e.splice(t,1),t--)}return t},t.once=function(e,a){return t.on(e,(function(...s){fn.apply(t,s),self.off(e,a)}))},t.dispatchEvent=function(a,s){return e.forEach(e=>{e.type===a&&e.cb.call(t,{type:a,option:s})}),t}}}var v=class extends Object{constructor(t,e,a){super(),this.__store=Object.create(null),this.__store.state=_.default,this.__store.row=void 0,this.__store.col=void 0,this.__store.option=e,this.__store.data=t,this.__store.datasets=[a],mixinEvent(this)}get datasets(){return this.__store.datasets}get data(){return this.__store.data}get value(){return this.__store.data[this.__store.option.value]}get text(){return this.__store.data[this.__store.option.text]}set row(t){void 0===this.__store.row&&(this.__store.row=t)}get row(){return this.__store.row}set col(t){void 0===this.__store.col&&(this.__store.col=t)}get col(){return this.__store.col}get option(){return this.__store.option}get state(){return this.__store.state}set state(t){_[t]&&this.__store.state!==_[t]&&(this.dispatchEvent("change",{name:"cell",value:_[t],data:this}),this.datasets.forEach(e=>{e.dispatchEvent("change",{name:"cell",value:_[t],data:this})})),this.__store.state=_[t]}};class Row_List extends Array{constructor(t,e){super(),this.__store=Object.create(null),this.__store.__name=t,this.__store.__option=e,this.__store.dataset=null,mixinEvent(this)}get data(){let t=[];return this.forEach(e=>{t.push(e.data)}),t}set dataset(t){this.__store.dataset=t}get dataset(){return this.__store.dataset}get name(){return this.__store.__name}get option(){return this.__store.__option}get state(){let t=this[0].state;for(let e=1;e<this.length;e++)if(this[e].state!==t){t="mixed";break}return t}set state(t){if(_[t]&&this.state!==_[t]){this.forEach(e=>{"disabled"===e.state&&"default"!==t||(e.state=_[t])});let e=null;this instanceof Row?e={name:"row",value:_[t],data:this}:this instanceof Col&&(e={name:"col",value:_[t],data:this}),this.dispatchEvent("change",e),this.dataset&&this.dataset.dispatchEvent("change",e)}}}class Row extends Row_List{}class Col extends Row_List{}class Dataset_Dataset extends Array{constructor(t,e){super(),t.forEach((t,a)=>{let s=t;t instanceof v?s.datasets.push(this):s=new v(t,e,this),this[a]=s}),this.__store=Object.create(null);let a=this.__store;a.__option=e,a.__deps=[],a.__rows=[],a.__rows=function(t=[],e){let{row:a,col:s}=e,l=[];if("*"===a){let a=new Row("*",e);t.forEach(t=>{a.push(t)}),l.push(a.sort(keySort))}else{let s=Object.create(null);t.forEach(t=>{let l=t.__store.data;s[l[a]]||(s[l[a]]=new Row(l[a],e)),s[l[a]].push(t)});for(let t in s){let e=s[t].sort(keySort);l.push(e)}}return l.forEach((e,a)=>{e.dataset=t,e.forEach((t,e)=>{t.row=a,t.col=e})}),l;function keySort(t,e){if(s)return t.data[s]>e.data[s]?1:-1}}(this,e),mixinEvent(this)}get option(){return this.__store.__option}get cols(){let t=[],e=0;this.__store.__rows.forEach(t=>{t.length>e&&(e=t.length)});for(let a=0;a<e;a++){let e=new Col;e.dataset=this,this.__store.__rows.forEach(t=>{e.push(t[a])}),t.push(e)}return t}get rows(){return this.__store.__rows}resetState(t="default"){let e=[];this.forEach(a=>{a.state!==t&&"disabled"!==a.state&&(e.push(a),a.state=t)}),this.dispatchEvent("change",{name:"reset",data:e})}selectRows(t){let e=this.option.row,a=[];return this.forEach(s=>{-1!==t.indexOf(s.data[e])&&a.push(s)}),new Dataset_Dataset(a,this.option)}addDep(t){this.__store.__deps.push(t)}}var m=Dataset_Dataset,O=a(0),P="beforeCreate",w="created",j="beforeRender",A="rendered",S="beforeUpdate",x="updated";function deepObjectMerge(...t){let e=t[0];if(t.length>1)for(let a=1;a<t.length;a++)objectMerge(e,t[a]);return e;function objectMerge(t,e){for(var a in e)t[a]&&"[object Object]"===t[a].toString()&&"[object Object]"===e[a].toString()?deepObjectMerge(t[a],e[a]):t[a]&&"array"===jsType(t[a])&&"array"===jsType(e[a])?t[a].splice(0,t[a].length,...e[a]):t[a]=e[a];return t}}function emptyObject(){return Object.create(null)}function jsType(t){const e=typeof t;return"object"===e?null===t?null:Object.prototype.toString.call(t).slice(8,-1).toLowerCase():e}function throttle(t,e=16,a=!1){let s=null,l=a;return function(...a){if(l)return t.apply(this,a),l=!1;s||(s=setTimeout(()=>{clearTimeout(s),s=null,t.apply(this,a)},e))}}function getDistancePx(t,e){return"string"===jsType(t)&&t.match(/%$/)?Number(t.substring(0,t.indexOf("%")))/100*e:t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R=function(t){function Base(t){var e,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Base),(e=function(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}(this,_getPrototypeOf(Base).call(this))).dispatchEvent(P),(a=_assertThisInitialized(e)).on=a.addEventListener,a.off=a.removeEventListener,a.once=function(t,e){var a=this;return this.on(t,(function listener(){for(var s=arguments.length,l=new Array(s),f=0;f<s;f++)l[f]=arguments[f];e.apply(a,l),a.off(t,listener)}))},e.__store=emptyObject();var s=e.__store;return s.__attrs=emptyObject(),s.__vnode__=null,s.__isCreated__=!1,s.__refs=emptyObject(),s.dataset=null,e.attr(t),e.__update=throttle((function(t){s.__isCreated__&&e.update()})),e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}(Base,t),e=Base,(a=[{key:"source",value:function(t,e){var a=this.__store;if(t instanceof m)a.dataset=t;else{var s=e;a.dataset&&(s=deepObjectMerge({},a.dataset.option,e)),a.dataset=new m(t,s)}return a.dataset&&a.__isCreated__&&this.__update(),this}},{key:"created",value:function(){var t=this.__store;this.dispatchEvent(w),t.__vnode__=this.render(this.beforeRender());var e=diff(null,t.__vnode__);this.dispatchEvent(j),patch.bind(this)(this.$el||this.layer,e,1),this.dispatchEvent(A),this.rendered(),t.__isCreated__=!0,this.dataset.on("change",this.__update)}},{key:"beforeRender",value:function(){return this.renderAttrs}},{key:"render",value:function(){console.warn("this function must be rewrited")}},{key:"beforeUpdate",value:function(){return this.renderAttrs}},{key:"update",value:function(){var t=this.__store;this.dispatchEvent(S);var e=this.render(this.beforeUpdate()),a=diff(t.__vnode__,e);patch.bind(this)(this.$el||this.layer,a),t.__vnode__=e,this.dispatchEvent(x),this.updated()}},{key:"updated",value:function(){}},{key:"dispatchEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:emptyObject();_get(_getPrototypeOf(Base.prototype),"dispatchEvent",this).call(this,t,e)}},{key:"defaultAttrs",value:function(){return emptyObject()}},{key:"defaultStyles",value:function(){return emptyObject()}},{key:"baseAttrs",value:function(){return{animation:{use:!0,duration:300,useTween:!0,easing:"linear"},clientRect:{left:"10%",top:"10%",right:"10%",bottom:"10%",width:void 0,height:void 0},opacity:1,layer:"default",layoutBy:"rows"}}},{key:"attr",value:function(t,e){var a=this.__store;if("object"===jsType(t))for(var s in t)this.attr(s,t[s]);else{if(void 0===t){var l=emptyObject();for(var f in a.__attrs)0!==f.indexOf("style@")&&(l[f]=a.__attrs[f]);return l}if(void 0===e)return a.__attrs[t];void 0!==t&&(a.__attrs[t]=e,a.__isCreated__&&this.__update())}}},{key:"addRef",value:function(t,e){this.__store.__refs[t]=e}},{key:"style",value:function(t,e){var a=this;if("object"===jsType(t))for(var s in t)this.style(s,t[s]);else{if(void 0!==t&&void 0===e){var l=this.attr("style@"+t);return function(){if("function"===jsType(l)){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return l.apply(a,e)}return l}}if(void 0!==t&&void 0!==e)return this.attr("style@"+t,e),this;if(void 0===t&&void 0===e){var f=emptyObject(),p=this.__store.__attrs;for(var d in p)if(0===d.indexOf("style@")){var y=d.substr(6);f[y]=this.style(y)}return f}}}},{key:"store",get:function(){return this.__store}},{key:"layer",get:function(){var t=deepObjectMerge({},this.baseAttrs(),this.defaultAttrs(),this.theme.attrs,this.attr()).layer;return this.scene.layer(t)}},{key:"$refs",get:function(){return this.__store.__refs}},{key:"renderStyles",get:function(){return deepObjectMerge({},this.defaultStyles(),this.theme.styles)}},{key:"renderAttrs",get:function(){var t=deepObjectMerge({},this.baseAttrs(),this.defaultAttrs(),this.theme.attrs,this.attr()),e=t.animation,a=t.clientRect;"boolean"===jsType(e)&&(e={use:!!e});var s=this.layer.canvas.getBoundingClientRect(),l=s.width,f=s.height;for(var p in a)-1!==["left","right","width"].indexOf(p)?a[p]=getDistancePx(a[p],l):-1!==["top","bottom","height"].indexOf(p)&&(a[p]=getDistancePx(a[p],f));return void 0===a.width?a.width=l-a.left-a.right:a.right=l-a.left-a.width,void 0===a.height?a.height=f-a.top-a.bottom:a.bottom=f-a.top-a.height,t.colors=this.theme.colors,t}},{key:"dataset",get:function(){return this.__store.dataset||this.chart&&this.chart.dataset}}])&&_defineProperties(e.prototype,a),s&&_defineProperties(e,s),Base}(O.Node),k={colors:["#47A1FF","#6CD3FF","#A2E5FF","#4DCCCB","#3FDDC7","#84E0BE","#59CB74","#ADDF84","#FBD54A","#FFB952","#F79452","#E37474","#FC6980","#ED8CCE","#DA65CC","#9861E5","#9F8CF1","#6367EC","#5982F6","#659AEC"]};k.visuals={Line:{colors:k.colors,styles:{line:{lineWidth:1},guideline:{strokeColor:"#ddd"}},attrs:{statck:!1}},LineTest:{colors:k.colors,styles:{line:{lineWidth:1}},attrs:{statck:!1}},Pie:{colors:k.colors,styles:{sector:{lineWidth:1,strokeColor:"#fff"}},attrs:{}},Area:{colors:k.colors,styles:{area:{opacity:.5},guideline:{strokeColor:"#ddd"}},attrs:{}},Radar:{colors:k.colors,styles:{area:{opacity:.5}},attrs:{}},Bar:{colors:k.colors,styles:{bar:{},groupBar:{opacity:.1}},attrs:{statck:!1}},PolarBar:{colors:k.colors,styles:{bar:{}},attrs:{statck:!1}},Scatter:{colors:k.colors,styles:{point:{}},attrs:{showGuideLine:!1}},Wave:{colors:k.colors,styles:{wave:{fillColor:"#37c",strokeColor:"#37c",lineWidth:0},text:{fillColor:"#333",fontSize:24},shape:{fillColor:"#e6f3ff",lineWidth:3,strokeColor:"#156cbd"}},attrs:{}}},k.plugins={Tooltip:{colors:k.colors,styles:{},attrs:{}},Legend:{colors:k.colors,styles:{},attrs:{}},Axis:{colors:k.colors,styles:{axis:{strokeColor:"#ccc",lineWidth:1},scale:{bgcolor:"#ccc"},label:{fontSize:12,fillColor:"#666"}},attrs:{orient:"bottom"}}},k.set=function(t){deepObjectMerge(k,t)};var M=k;function BaseVisual_typeof(t){return(BaseVisual_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BaseVisual_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function BaseVisual_possibleConstructorReturn(t,e){return!e||"object"!==BaseVisual_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function BaseVisual_getPrototypeOf(t){return(BaseVisual_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function BaseVisual_setPrototypeOf(t,e){return(BaseVisual_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function BaseVisual(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BaseVisual),(e=BaseVisual_possibleConstructorReturn(this,BaseVisual_getPrototypeOf(BaseVisual).call(this,t))).theme=M.visuals[e.constructor.name],e.theme.set=function(t){e.theme===M.visuals[e.constructor.name]&&(e.theme=g()(e.theme)),e.theme=deepObjectMerge(e.theme,t)},e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BaseVisual_setPrototypeOf(t,e)}(BaseVisual,t),e=BaseVisual,(a=[{key:"componentType",get:function(){return"visual"}}])&&BaseVisual_defineProperties(e.prototype,a),s&&BaseVisual_defineProperties(e,s),BaseVisual}(R);function _toConsumableArray(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function getStyle(t,e,a,s){var l=a,f=s;"array"===jsType(a)&&(l=deepObjectMerge.apply(this,a)),"array"!==jsType(s)&&(f=[s]);var p=t.style(e)(l,_toConsumableArray(f));return!1!==p&&deepObjectMerge({},l,p)}function scaleLinear(){var t=[0,1],e=[0,1];function scale(a){var s=t[1]-t[0],l=e[1]-e[0],f=(a-t[0])/s||0;return e[0]+l*f}return scale.domain=function(e){return t=e,this},scale.range=function(t){return e=t,this},scale}function axis_axis(t){if(!Array.isArray(t.dataSet)&&!t.hasOwnProperty("section"))return[];if(void 0!==t.section)return function(t){if(t&&Array.isArray(t)){var e=t[1]-t[0],a=[],s=4;a.push(t[0]);for(var l=4;l<8;l++)if(e%l==0){s=l;break}for(var f=1;f<=s;f++)a.push((t[0]+e*f/s).toFixed(2));return a}return[]}(t.section);var e=function(t){var e=t.stack||!1,a=t.dataSet||[],s=[];if(e&&0!==a.length&&a[0].length)for(var l=0,f=a[0].length;l<f;l++){for(var p=0,d=0,y=0,b=a.length;y<b;y++){var g=a[y][l].value;!0!==a[y][l].disabled&&void 0!==g&&(g<0?d+=g:p+=g)}p&&s.push(p),d&&s.push(d)}else for(var _=0;_<a.length;_++)for(var v=0;v<a[_].length;v++){var m=a[_][v].value;!0!==a[_][v].disabled&&void 0!==m&&s.push(m)}return s}(t),a=[],s=[],l=!0,f=!1,p=void 0;try{for(var d,y=e[Symbol.iterator]();!(l=(d=y.next()).done);l=!0){var b=d.value;b<0?s.push(Math.abs(b)):a.push(b)}}catch(t){f=!0,p=t}finally{try{l||null==y.return||y.return()}finally{if(f)throw p}}var g=5,_=a.sort((function(t,e){return t-e})),v=s.sort((function(t,e){return t-e})),m=_.length&&Math.ceil(_.pop()/.95),O=v.length&&Math.ceil(v.pop()/.95),P=m-O>=0?m:O,w=4,j=7;O&&m&&(w=3,j=5),t.splitNumber&&(j=(w=t.splitNumber)+1);var A=!1,S=P.toString().length,x=S<3?Math.ceil(P/Math.pow(10,S-1)):Math.ceil(P/Math.pow(10,S-2));do{for(var R=w;R<j;R++)if(x%R==0){g=R,P=S<3?x*Math.pow(10,S-1):x*Math.pow(10,S-2),A=!0;break}x++}while(!A);var k=new Array(g+1);k[0]=0;for(var M=1;M<g+1;M++)k[M]=m>=O?Math.round(P/g*M):-1*Math.round(P/g*M);if(O<=1&&O>0||m<=1&&m>0||0===m&&0===O){(k=new Array(6))[0]=0,P=1;for(var C=1;C<6;C++)k[C]=m>=O?2*P*C/10:-2*P*C/10}if(m<O&&k.reverse(),0===O.length||0===m.length)return k;if(m>=O)for(var E=10*k[1],T=1,D=Math.ceil((k.length-1)*O/m);T<D+1;T++)k.unshift(-1*E*T/10);else for(var B=10*k[k.length-2],L=1,I=Math.ceil((k.length-1)*m/O);L<I+1;L++)k.push(-1*B*L/10);return t.needReverse&&(k=k.map((function(t){return Global.datasetReverse?Math.round(Global.datasetReverse(t)):t}))),k}function layout(t,e){var a=this.type,s=[],l=e.stack,f=e.splitNumber,p=e.clientRect,d=p.width,y=p.height,b=axis_axis({dataSet:t,stack:l,splitNumber:f}),g=Math.max.apply(this,b),_=Math.min.apply(this,b),v=scaleLinear().domain([_,g]).range([0,y]),m=null;if(t.forEach((function(t){var e={points:[],areaPoints:[],smoothRange:[],state:t.state};t.forEach((function(a,s){var f=a.value;if(void 0!==a.value){var p=d/(t.length-1),b=[p*s,y-v(f)];l&&m&&(b=[p*s,y-v(f+m[s].value)]),e.points.push(b)}})),e.axisPoints=[[e.points[0][0],y-v(0)],[e.points[e.points.length-1][0],y-v(0)]],"disabled"!==e.state&&(m=t),s.push(e)})),"area"===a){var O=null;s.forEach((function(t,a){var l=[].concat(t.points).reverse().map((function(t){return[t[0],y]}));O&&e.stack&&(l=[].concat(s[a-1].points).reverse());var f=function(t,e){var a={areaPoints:[],smoothRange:[]};return a.areaPoints=[].concat([t[0]]).concat(t).concat([t[t.length-1]]).concat([e[0]]).concat(e).concat([e[e.length-1]]),a.smoothRange=[1,t.length,t.length+3,t.length+e.length+2],a}(t.points,l);t.areaPoints=f.areaPoints,t.smoothRange=f.smoothRange,"disabled"!==t.state&&(O=t)}))}return s}function Line_typeof(t){return(Line_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t}).apply(this,arguments)}function _slicedToArray(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var a=[],s=!0,l=!1,f=void 0;try{for(var p,d=t[Symbol.iterator]();!(s=(p=d.next()).done)&&(a.push(p.value),!e||a.length!==e);s=!0);}catch(t){l=!0,f=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw f}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Line_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Line_possibleConstructorReturn(t,e){return!e||"object"!==Line_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Line_get(t,e,a){return(Line_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Line_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Line_getPrototypeOf(t){return(Line_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Line_setPrototypeOf(t,e){return(Line_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var E=function(t){function Line(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Line),(e=Line_possibleConstructorReturn(this,Line_getPrototypeOf(Line).call(this,t))).renderLines=[],e.type="line",e.hoverIndex=-1,e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Line_setPrototypeOf(t,e)}(Line,t),e=Line,(a=[{key:"beforeRender",value:function(){var t=this.getRenderData(),e=t.arrLayout,a=t.maxLen;return e.map((function(t){return{smoothRange:t.smoothRange,areaFrom:{points:t.areaPoints},areaTo:{points:t.areaPoints},from:{points:t.points,lineDash:[1,a]},to:{points:t.points,lineDash:[a,a]}}}))}},{key:"beforeUpdate",value:function(){var t=this.getRenderData(),e=t.arrLayout,a=t.maxLen,s=this.renderLines;return e.map((function(t,e){var l={points:t.points};return s[e]&&(l={points:s[e].to.points}),s[e]&&"disabled"!==s[e].state||(l.lineDash=[4,a]),{state:t.state,smoothRange:t.smoothRange,areaFrom:s[e]&&s[e].areaTo||t.areaPoints,areaTo:{points:t.areaPoints},from:l,to:{points:t.points,lineDash:[a,a]}}}))}},{key:"getRenderData",value:function(){var t=this.renderAttrs,e=this.dataset[t.layoutBy],a=layout.call(this,e,t),s=t.clientRect,l=s.height,f=s.width;return{width:f,height:l,arrLayout:a,maxLen:5*Math.sqrt(Math.pow(l,2),Math.pow(f,2))}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){return{guidePoints:[],layer:"line"}}},{key:"defaultStyles",value:function(){return{smooth:!1}}},{key:"guidelineleave",value:function(t,e){this.attr("guidePoints",[]),this.dataset.resetState()}},{key:"guidelinemove",value:function(t,e){if(this.renderLines.length){for(var a=this.renderLines[0].to.points.map((function(t){return t[0]})),s=_slicedToArray(e.getOffsetPosition(t.x,t.y),1)[0],l=0,f=0;f<a.length;f++)if(s>a[f]&&s<a[f+1]){l=Math.abs(s-a[f])<Math.abs(s-a[f+1])?f:f+1;break}if(this.hoverIndex!==l){this.dataset.resetState(),this.dataset.cols[l].state="hover";var p=this.renderAttrs.clientRect,d=a[l];this.hoverIndex=l,this.attr({guidePoints:[[d,0],[d,p.height]],lineState:"default"})}}}},{key:"render",value:function(t){var e,a=this,s=this.renderAttrs,l=s.clientRect,f=s.smooth,p=s.guidePoints,d=this.renderStyles,y=this.theme.colors;return this.renderLines=t,qcharts.h(O.Group,{zIndex:1,class:"container",pos:[l.left,l.top],onMouseleave:this.guidelineleave,onMouseenter:this.guidelinemove,onMousemove:this.guidelinemove,size:[l.width,l.height]},qcharts.h(O.Group,{class:"lines-group"},t.map((function(t,e){var s=getStyle(a,"line",[{strokeColor:y[e],smooth:f},d.line],[a.dataset.rows[e],e]);return"disabled"===t.state||!1===s?qcharts.h(O.Node,null):qcharts.h(O.Polyline,_extends({onClick:a.lineClick},s,{animation:{from:t.from,to:t.to}}))}))),qcharts.h(O.Group,{class:"areas-group"},"area"!==this.type?null:t.map((function(t,e){var s=getStyle(a,"area",[{fillColor:y[e],smooth:f},d.area],[a.dataset.rows[e],e]);return"disabled"===t.state||!1===s?qcharts.h(O.Node,null):qcharts.h(O.Polyline,_extends({smoothRange:t.smoothRange},s,{animation:{from:t.areaFrom,to:t.areaTo}}))}))),qcharts.h(O.Group,{class:"guide-line-group"},p.length?!1===(e=getStyle(a,"guideline",d.guideline,d.guideline))?qcharts.h(O.Node,null):qcharts.h(O.Polyline,_extends({points:p},e)):qcharts.h(O.Node,null)))}},{key:"renderAttrs",get:function(){return Line_get(Line_getPrototypeOf(Line.prototype),"renderAttrs",this)}}])&&Line_defineProperties(e.prototype,a),s&&Line_defineProperties(e,s),Line}(C);function layout_layout(t,e){var a=[],s=t.map((function(t){return t.reduce((function(e,a){return"disabled"!==t.state?e+a.value:e}),0)})),l=s.reduce((function(t,e){return t+e}),0)||1,f=e.startAngle,p=e.endAngle,d=e.activeOffset,y=Math.min(f,p),b=Math.max(f,p);b>y+360&&(b=y+360);var g=b-y;return s.forEach((function(e,s){var f=e/l*g,p=[0,0],b={startAngle:y,endAngle:y+f,offsetPos:p};if(0!==s){var _=a[s-1];b={startAngle:_.endAngle,endAngle:_.endAngle+f,offsetPos:p}}var v=(b.startAngle+b.endAngle)/2%360;b.bisectorAngle=v,b.bisectorRadian=transRadius(v),"hover"===t[s].state&&(b.offsetPos=[d*Math.cos(b.bisectorRadian),d*Math.sin(b.bisectorRadian)]),a.push(b)})),a}function transRadius(t){return t/180*Math.PI}function computeLinePos(t,e,a,s,l){var f=[],p=transRadius((t+e)/2%360),d=[s*Math.cos(p),s*Math.sin(p)],y=[(s+l)*Math.cos(p),(s+l)*Math.sin(p)],b=[(s+l)*Math.cos(p),(s+l+5)*Math.sin(p)];return b=[a[0]+b[0],a[1]+b[1]],f.push([a[0]+d[0],a[1]+d[1]]),f.push([a[0]+y[0],a[1]+y[1]]),{points:f,labelAnchor:[Math.sin(p/2),1-Math.cos(p/4)],labelPos:b}}function Pie_typeof(t){return(Pie_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pie_extends(){return(Pie_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t}).apply(this,arguments)}function ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach((function(e){_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Pie_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Pie_possibleConstructorReturn(t,e){return!e||"object"!==Pie_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pie_get(t,e,a){return(Pie_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pie_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Pie_getPrototypeOf(t){return(Pie_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pie_setPrototypeOf(t,e){return(Pie_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var T=function(t){function Pie(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Pie),(e=Pie_possibleConstructorReturn(this,Pie_getPrototypeOf(Pie).call(this,t))).renderRings=[],e.hoverIndex=-1,e.activeIndex=-1,e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pie_setPrototypeOf(t,e)}(Pie,t),e=Pie,(a=[{key:"beforeRender",value:function(){var t=this.getRenderData().rings,e=this.renderAttrs.center,a=t.map((function(a,s){if(0===s)return{from:{startAngle:0,endAngle:0,pos:e},to:_objectSpread({},a,{pos:e})};var l=t[s-1].endAngle;return{from:{startAngle:l,endAngle:l,pos:e},to:_objectSpread({},a,{pos:e})}}));return this.computeLine(a),a}},{key:"beforeUpdate",value:function(){var t=this,e=this.getRenderData().rings,a=this.renderAttrs.center,s=this.renderRings,l=e.map((function(e,l){var f=[a[0]+e.offsetPos[0],a[1]+e.offsetPos[1]],p=g()(e,["startAngle","endAngle"]);return t.hoverIndex,{from:_objectSpread({},s[l].to),to:_objectSpread({},p,{pos:f})}}));return this.computeLine(l),l}},{key:"computeLine",value:function(t){var e=this.renderAttrs.radiusPx;t.forEach((function(t){var a=computeLinePos(t.from.startAngle,t.from.endAngle,t.from.pos,e+1,15),s=a.points,l=a.labelAnchor,f=a.labelPos,p=computeLinePos(t.to.startAngle,t.to.endAngle,t.to.pos,e+1,15),d=p.points,y=p.labelAnchor,b=p.labelPos;t.line={from:{points:s},to:{points:d}},t.label={from:{pos:f,anchor:l},to:{pos:b,anchor:y}}}))}},{key:"getRenderData",value:function(){var t=this.renderAttrs,e=this.renderData();return{rings:layout_layout.call(this,e,t)}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){return{layer:"pie",radius:1,innerRadius:0,startAngle:0,endAngle:360,lineWidth:1,activeOffset:10,labelOffset:20}}},{key:"defaultStyles",value:function(){}},{key:"mousemove",value:function(t,e){var a=this.renderData(),s=e.attr("_index");if(s!==this.hoverIndex){var l=a[s];a.forEach((function(t){"hover"===t.state&&(t.state="default")})),l.state="hover",this.hoverIndex=s}}},{key:"mouseleave",value:function(){this.renderData().forEach((function(t){"hover"===t.state&&(t.state="default")})),this.hoverIndex=-1}},{key:"renderData",value:function(){var t=this.renderAttrs;return this.dataset[t.layoutBy]}},{key:"render",value:function(t){var e=this,a=this.renderAttrs,s=a.clientRect,l=a.innerRadiusPx,f=a.radiusPx,p=this.renderStyles,d=this.theme.colors;return this.renderRings=t,qcharts.h(O.Group,{zIndex:1,class:"container",pos:[s.left,s.top],size:[s.width,s.height]},qcharts.h(O.Group,{class:"rings-group",onMouseleave:this.mouseleave},t.map((function(t,a){var s=getStyle(e,"sector",[{strokeColor:d[a]},p.sector],[e.dataset.rows[a],a]),y={fillColor:d[a],innerRadius:l,outerRadius:f,_index:a};return"disabled"===t.state||!1===s?qcharts.h(O.Node,null):qcharts.h(O.Ring,Pie_extends({onMousemove:e.mousemove},y,s,{animation:{from:t.from,to:t.to}}))}))),qcharts.h(O.Group,{class:"line-group"},t.map((function(t,a){var s=getStyle(e,"guideline",[{strokeColor:d[a]},p.guideline],[e.dataset.rows[a],a]),l=!1;return t.to.startAngle!==t.to.endAngle&&"disable"!==t.state&&!1!==s||(l=!0),l||!1===s?qcharts.h(O.Node,null):qcharts.h(O.Polyline,Pie_extends({},s,{animation:{from:t.line.from,to:t.line.to}}))}))),qcharts.h(O.Group,{class:"label-group"},t.map((function(t,a){var s=e.dataset.rows[a].name,l=getStyle(e,"guideText",[{fillColor:"#666",fontSize:12},p.guideline],[e.dataset.rows[a],a]),f=!1;return t.to.startAngle!==t.to.endAngle&&"disable"!==t.state&&!1!==l||(f=!0),f||!1===l?qcharts.h(O.Node,null):qcharts.h(O.Label,Pie_extends({text:s},l,{pos:t.label.from.pos,animation:{from:t.label.from,to:t.label.to}}))}))))}},{key:"renderAttrs",get:function(){var t=Pie_get(Pie_getPrototypeOf(Pie.prototype),"renderAttrs",this),e=t.radius,a=t.innerRadius,s=t.clientRect,l=s.width,f=s.height;return t.center=[l/2,f/2],t.radiusPx=Math.min(l,f)*e/2,t.innerRadiusPx=Math.min(l,f)*a/2,t}}])&&Pie_defineProperties(e.prototype,a),s&&Pie_defineProperties(e,s),Pie}(C);function index_test_typeof(t){return(index_test_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function index_test_extends(){return(index_test_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t}).apply(this,arguments)}function index_test_slicedToArray(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var a=[],s=!0,l=!1,f=void 0;try{for(var p,d=t[Symbol.iterator]();!(s=(p=d.next()).done)&&(a.push(p.value),!e||a.length!==e);s=!0);}catch(t){l=!0,f=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw f}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function index_test_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function index_test_possibleConstructorReturn(t,e){return!e||"object"!==index_test_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function index_test_get(t,e,a){return(index_test_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=index_test_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function index_test_getPrototypeOf(t){return(index_test_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function index_test_setPrototypeOf(t,e){return(index_test_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var D=function(t){function LineTest(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LineTest),(e=index_test_possibleConstructorReturn(this,index_test_getPrototypeOf(LineTest).call(this,t))).renderLines=[],e.type="line",e.guidePoints=[],e.hoverIndex=-1,e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&index_test_setPrototypeOf(t,e)}(LineTest,t),e=LineTest,(a=[{key:"beforeRender",value:function(){var t=this.getRenderData(),e=t.arrLayout,a=t.maxLen;return e.map((function(t){return{smoothRange:t.smoothRange,areaFrom:{points:t.areaPoints},areaTo:{points:t.areaPoints},from:{points:t.points,lineDash:[1,a]},to:{points:t.points,lineDash:[a,a]}}}))}},{key:"beforeUpdate",value:function(){var t=this.getRenderData(),e=t.arrLayout,a=t.maxLen,s=this.renderLines;return e.map((function(t,e){var l={points:t.points};return s[e]&&(l={points:s[e].to.points}),s[e]&&"disabled"!==s[e].state||(l.lineDash=[4,a]),{state:t.state,smoothRange:t.smoothRange,areaFrom:s[e].areaTo,areaTo:{points:t.areaPoints},from:l,to:{points:t.points,lineDash:[a,a]}}}))}},{key:"getRenderData",value:function(){var t=this.renderAttrs,e=this.dataset[t.layoutBy],a=layout.call(this,e,t),s=t.clientRect,l=s.height,f=s.width;return{width:f,height:l,arrLayout:a,maxLen:2*Math.sqrt(Math.pow(l,2),Math.pow(f,2))}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){return{guidePoints:[],lineState:"default",states:{line:{default:{strokeColor:"#0ff"},hover:{strokeColor:"#f00"}}},layer:"line"}}},{key:"defaultStyles",value:function(){return{smooth:!1}}},{key:"guidelineleave",value:function(t,e){this.attr("guidePoints",[]),this.dataset.resetState()}},{key:"guidelinemove",value:function(t,e){if(this.renderLines.length){for(var a=this.renderLines[0].to.points.map((function(t){return t[0]})),s=index_test_slicedToArray(e.getOffsetPosition(t.x,t.y),1)[0],l=0,f=0;f<a.length;f++)if(s>a[f]&&s<a[f+1]){l=Math.abs(s-a[f])<Math.abs(s-a[f+1])?f:f+1;break}if(this.hoverIndex!==l){this.dataset.resetState(),this.dataset.cols[l].state="hover";var p=this.renderAttrs.clientRect,d=a[l];this.hoverIndex=l,this.attr({guidePoints:[[d,0],[d,p.height]],lineState:"default"})}}}},{key:"myclick",value:function(){this.attr("lineState","hover")}},{key:"render",value:function(t){var e=this,a=this.renderAttrs,s=a.clientRect,l=a.smooth,f=a.states,p=a.lineState,d=a.guidePoints,y=this.renderStyles,b=this.theme.colors;return this.renderLines=t,qcharts.h(O.Group,{class:"container",pos:[s.left,s.top],onMouseleave:this.guidelineleave,onMousemove:this.guidelinemove,size:[s.width,s.height],onClick:this.myclick},qcharts.h(O.Group,{ref:"lines",class:"lines-group"},t.map((function(t,a){var s=deepObjectMerge({strokeColor:b[a],smooth:l},y.line),d=e.style("line")(s,e.dataset.rows[a],a),g=deepObjectMerge(s,d);return"disabled"===t.state||!1===d?null:qcharts.h(O.Polyline,index_test_extends({state:p,states:f.line,onClick:e.lineClick},g,{animation:{from:t.from,to:t.to}}))}))),qcharts.h(O.Group,{ref:"areas",class:"areas-group"},"area"!==this.type?null:t.map((function(t,a){var s=deepObjectMerge({fillColor:b[a],smooth:l},y.area),f=e.style("area")(s,e.dataset.rows[a],a),p=deepObjectMerge(s,f);return"disabled"===t.state||!1===f?null:qcharts.h(O.Polyline,index_test_extends({smoothRange:t.smoothRange},p,{animation:{from:t.areaFrom,to:t.areaTo}}))}))),qcharts.h(O.Group,{class:"guide-line-group"},d.length?qcharts.h(O.Polyline,{points:d,strokeColor:"#f00"}):null))}},{key:"renderAttrs",get:function(){return index_test_get(index_test_getPrototypeOf(LineTest.prototype),"renderAttrs",this)}}])&&index_test_defineProperties(e.prototype,a),s&&index_test_defineProperties(e,s),LineTest}(C);function Area_typeof(t){return(Area_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Area_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Area_possibleConstructorReturn(t,e){return!e||"object"!==Area_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Area_get(t,e,a){return(Area_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Area_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Area_getPrototypeOf(t){return(Area_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Area_setPrototypeOf(t,e){return(Area_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var B=function(t){function Area(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Area),(e=Area_possibleConstructorReturn(this,Area_getPrototypeOf(Area).call(this,t))).type="area",e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Area_setPrototypeOf(t,e)}(Area,t),e=Area,(a=[{key:"defaultAttrs",value:function(){return deepObjectMerge({},Area_get(Area_getPrototypeOf(Area.prototype),"defaultAttrs",this).call(this),{stack:!0,layer:"area"})}}])&&Area_defineProperties(e.prototype,a),s&&Area_defineProperties(e,s),Area}(E);function layout_toConsumableArray(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var getPointCoordinate=function(t,e){return[Math.cos(t)*e,Math.sin(t)*e]};function Radar_layout_layout(t,e,a,s,l){var f=[],p=[],d=[],y=[];if(t.some((function(t){return 0===t.length})))return{sectionAttrs:y,axisAttrs:d,gridAttrs:p};for(var b=function(t,e){var a=Math.max.apply(Math,layout_toConsumableArray(t));return a<10*e?Math.ceil(a/e)*e:10*Math.ceil(a/10/e)*e}(t.reduce((function(t,e){return t.concat(e.map((function(t){return t.value})))}),[]),a),g=t[0].length,_=2*Math.PI/g,v=Math.PI/180*s,m=0;m<g;m++){var O=m*_+v,P=getPointCoordinate(O,e);f.push({point:P,radian:O});var w=getPointCoordinate(O,e+l),j=t[0][m].text;d.push({points:[[0,0],P],lineWidth:1,lineDash:[3,2],strokeColor:"#DDE0E5",label:j,labelPos:w,radian:O,maxScale:b,splitNumber:a})}t.forEach((function(t,a){var s=t.map((function(t,a){var s=t.value,l=f[a].radian;return getPointCoordinate(l,s/b*e)}));y.push({index:a,name:t.name,dataOrigin:t.data,lineWidth:1,points:s,state:t.state,close:!0})}));for(var A=f.map((function(t){return t.point})),S=0;S<a;S++){var x=1-S/a;p.push({scale:x,radius:e,points:A,index:S,close:!0,lineWidth:1,strokeColor:"#DDE0E5",anchor:[.5,.5]})}return{sectionAttrs:y,axisAttrs:d,gridAttrs:p}}function Radar_typeof(t){return(Radar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Radar_slicedToArray(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var a=[],s=!0,l=!1,f=void 0;try{for(var p,d=t[Symbol.iterator]();!(s=(p=d.next()).done)&&(a.push(p.value),!e||a.length!==e);s=!0);}catch(t){l=!0,f=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw f}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Radar_extends(){return(Radar_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t}).apply(this,arguments)}function Radar_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Radar_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Radar_ownKeys(Object(a),!0).forEach((function(e){Radar_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Radar_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _objectWithoutProperties(t,e){if(null==t)return{};var a,s,l=function(t,e){if(null==t)return{};var a,s,l={},f=Object.keys(t);for(s=0;s<f.length;s++)a=f[s],e.indexOf(a)>=0||(l[a]=t[a]);return l}(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(s=0;s<f.length;s++)a=f[s],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(l[a]=t[a])}return l}function Radar_toConsumableArray(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Radar_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Radar_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Radar_get(t,e,a){return(Radar_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Radar_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Radar_getPrototypeOf(t){return(Radar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Radar_setPrototypeOf(t,e){return(Radar_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Radar_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var L=function(t){function Radar(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Radar),e=function(t,e){return!e||"object"!==Radar_typeof(e)&&"function"!=typeof e?Radar_assertThisInitialized(t):e}(this,Radar_getPrototypeOf(Radar).call(this,t)),Radar_defineProperty(Radar_assertThisInitialized(e),"onMouseenter",throttle((function(t,a){e.dataset.resetState();var s=a.attributes.name;e.dataset.rows.filter((function(t){return"disabled"!==t.state})).forEach((function(t){t.state=t.name===s?"hover":"default"}))}),16,!0)),e.type="radar",e.sectionData=[],e.scaleEl=[],e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Radar_setPrototypeOf(t,e)}(Radar,t),e=Radar,(a=[{key:"defaultAttrs",value:function(){return{gridType:"polygon",splitNumber:4,startAngle:270,radius:.6,labelOffset:7}}},{key:"getRenderData",value:function(){var t=this.dataset,e=this.renderAttrs,a=e.len,s=e.splitNumber,l=e.startAngle,f=e.labelOffset,p=Radar_layout_layout(Radar_toConsumableArray(t.rows),a,s,l,f),d=p.sectionAttrs,y=p.axisAttrs,b=p.gridAttrs,g=this.theme.colors;return d.forEach((function(t,e){t.strokeColor=g[e],t.fillColor=g[e]})),{sectionAttrs:d,axisAttrs:y,gridAttrs:b}}},{key:"_processData",value:function(){var t=this,e=this.getRenderData(),a=e.sectionAttrs,s=_objectWithoutProperties(e,["sectionAttrs"]),l=a.filter((function(t){return"disabled"!==t.state})).map((function(e,a){var s=e.points,l=_objectWithoutProperties(e,["points"]),f=t._getPolylineAnimation(s,a),p=t._getStyle("section",e,Radar_objectSpread({},e.dataOrigin),a),d=p.style,y=p.hoverStyle;!1===d&&(e.display="none");var b={lineWidth:e.lineWidth,display:"block"};return"hover"===e.state&&(b=Radar_objectSpread({},y,{lineWidth:e.lineWidth+1})),deepObjectMerge(l,{points:f.from.points},{animation:f},d,b)}));return Radar_objectSpread({},s,{sectionAttrs:l})}},{key:"beforeUpdate",value:function(){Radar_get(Radar_getPrototypeOf(Radar.prototype),"beforeUpdate",this).call(this);var t=this._processData();if(t.sectionAttrs)for(var e=Math.max(this.sectionData.length,t.sectionAttrs.length),a=0;a<e;a++)this.sectionData[a]=t.sectionAttrs[a];return this.sectionData=Radar_toConsumableArray(t.sectionAttrs),t}},{key:"beforeRender",value:function(){Radar_get(Radar_getPrototypeOf(Radar.prototype),"beforeRender",this).call(this);var t=this._processData();return this.sectionData=Radar_toConsumableArray(t.sectionAttrs),t}},{key:"rendered",value:function(){}},{key:"_getScaleAnimation",value:function(t){return{from:{scale:0},to:{scale:t}}}},{key:"_getStyle",value:function(t,e,a,s){return{style:this.style(t)(e,a,s)||{},hoverStyle:this.style("".concat(t,":hover"))(e,a,s)||{}}}},{key:"_isSamePoints",value:function(t,e){return t.toString()===e.toString()}},{key:"_getPolylineAnimation",value:function(t,e){var a=this.sectionData[e];return a||(a={animation:{to:{points:new Array(t.length).fill([0,0])}}}),{from:{points:a.animation.to.points},to:{points:t}}}},{key:"renderGrid",value:function(t){var e=this,a=this.renderAttrs.gridType,s="circle"===a?O.Arc:O.Polyline;return t.map((function(t,l){var f=e.scaleEl.length>0?{}:e._getScaleAnimation(t.scale),p=e._getStyle("grid",t,null,l),d=p.style,y=_objectWithoutProperties(p,["style"]);if(!1!==d){var b=Radar_objectSpread({},t);return"circle"===a&&(b={lineWidth:t.lineWidth,strokeColor:t.strokeColor,radius:t.radius,scale:t.scale}),qcharts.h(s,Radar_extends({},b,d,y,{animation:f}))}}))}},{key:"_renderAxisLabel",value:function(t,e){var a=t.label,s=t.labelPos,l=t.radian,f={text:a,pos:s,color:"#67728C",radian:l,anchor:function(t){return[.5-Math.cos(t),.5-Math.sin(t)]}(l),fontSize:12},p=this.scaleEl.length>0?{}:this._getScaleAnimation(1),d=this._getStyle("label",f,{text:f.label,radian:l},e),y=d.style,b=_objectWithoutProperties(d,["style"]);if(!1!==y){var g=deepObjectMerge(f,y,b);return qcharts.h(O.Label,Radar_extends({},g,{animation:p}))}}},{key:"_renderAxisScale",value:function(t,e){for(var a=function(t){var e=t.points,a=t.splitNumber,s=t.maxScale,l=Radar_slicedToArray(e[1],2);return[[l[0]/a,l[1]/a],s/a]}(t),s=Radar_slicedToArray(a,2),l=Radar_slicedToArray(s[0],2),f=l[0],p=l[1],d=s[1],y=[],b={fontSize:12,anchor:[1,.5],translate:[-5,0],display:0===e?"block":"none"},g=0;g<t.splitNumber+1;g++){var _=[f*g,p*g],v=d*g,m=Radar_objectSpread({text:v,color:"#67728C",pos:_},b),P=this._getStyle("scale",m,{text:v,index:e},g),w=P.style,j=_objectWithoutProperties(P,["style"]);if(!1===w)return;if("none"!==m.display){var A={},S=e*t.splitNumber+g,x=this.scaleEl[S];if(x){var R=x.text;R!==v&&(A={from:{text:R},to:{text:v},formatter:function(t){return t.text=t.text.toFixed(0),t}})}else A={from:{pos:[0,0]},to:{pos:_}};this.scaleEl[g]={text:Number(v.toFixed(0))},y.push(qcharts.h(O.Label,Radar_extends({},m,w,j,{animation:A})))}}return y}},{key:"renderAxis",value:function(t){var e=this,a=this.scaleEl.length>0?{}:this._getScaleAnimation(1);return t.map((function(t,s){var l=e._getStyle("axis",t,{text:t.label},s),f=l.style,p=_objectWithoutProperties(l,["style"]);if(!1!==f){var d=deepObjectMerge(t,f,p);return qcharts.h(O.Group,{clipOverflow:!1,size:[1,1]},qcharts.h(O.Polyline,Radar_extends({},d,{animation:a})),e._renderAxisLabel(t,s),e._renderAxisScale(t,s))}}))}},{key:"renderPoints",value:function(t){var e=this;return t.map((function(t,a){var s=t.animation,l=t.dataOrigin,f=t.strokeColor,p=s&&s.from&&s.from.points;return(s&&s.to&&s.to.points).map((function(t,a){var s={pos:t,fillColor:f,startAngle:0,endAngle:360,radius:2,dataOrigin:l[a],anchor:[.5,.5]},d={from:{pos:[0,0]},to:{pos:t}};p&&p[a]&&(e._isSamePoints(p[a],t)?d={}:(d.from.pos=p[a],s.pos=p[a]));var y=e.style("point")(s,Radar_objectSpread({},s.dataOrigin),a);if(!1!==y)return qcharts.h(O.Arc,Radar_extends({},s,y,{animation:d}))}))})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"renderSection",value:function(t){var e=this;return t.map((function(t,a){var s=t.animation,l=_objectWithoutProperties(t,["animation"]);return qcharts.h(O.Polyline,Radar_extends({zIndex:9+a,animation:s},l,{onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave}))}))}},{key:"onMouseleave",value:function(){this.dataset.resetState(),this.dataset.rows.filter((function(t){return"disabled"!==t.state})).forEach((function(t){return"default"===t.state}))}},{key:"render",value:function(t){var e=t.sectionAttrs,a=t.axisAttrs,s=t.gridAttrs,l=this.renderAttrs,f=l.center,p=l.clientRect;return qcharts.h(O.Group,{pos:[p.left,p.top],size:[p.width,p.height]},qcharts.h(O.Group,{pos:f},this.renderGrid(s),this.renderAxis(a),this.renderSection(e),this.renderPoints(e)))}},{key:"renderAttrs",get:function(){var t=Radar_get(Radar_getPrototypeOf(Radar.prototype),"renderAttrs",this),e=t.clientRect,a=e.height,s=[e.width/2,a/2],l=t.radius;return Radar_objectSpread({},t,{center:s,len:Math.min.apply(Math,s)*l})}}])&&Radar_defineProperties(e.prototype,a),s&&Radar_defineProperties(e,s),Radar}(C);function layout_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function layout_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?layout_ownKeys(Object(a),!0).forEach((function(e){layout_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):layout_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function layout_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Bar_typeof(t){return(Bar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bar_extends(){return(Bar_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t}).apply(this,arguments)}function Bar_slicedToArray(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var a=[],s=!0,l=!1,f=void 0;try{for(var p,d=t[Symbol.iterator]();!(s=(p=d.next()).done)&&(a.push(p.value),!e||a.length!==e);s=!0);}catch(t){l=!0,f=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw f}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Bar_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Bar_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bar_get(t,e,a){return(Bar_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bar_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Bar_getPrototypeOf(t){return(Bar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bar_setPrototypeOf(t,e){return(Bar_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bar_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var I=function(t){function Bar(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Bar),e=function(t,e){return!e||"object"!==Bar_typeof(e)&&"function"!=typeof e?Bar_assertThisInitialized(t):e}(this,Bar_getPrototypeOf(Bar).call(this,t)),Bar_defineProperty(Bar_assertThisInitialized(e),"onMousemove",throttle((function(t,a){if(e.groups.length&&!isNaN(t.x)&&!isNaN(t.y)){var s=0,l=Bar_slicedToArray(a.getOffsetPosition(t.x,t.y),2),f=l[0],p=l[1];if(e.renderAttrs.transpose){var d=e.groups[0].size[1];s=Math.floor(p/d)}else{var y=e.groups[0].size[0];s=Math.floor(f/y)}if(s<1?s=0:s>e.groups.length-1&&(s=e.groups.length-1),e.hoverIndex!==s){var b=e.renderAttrs.bgpillarState;b[s]="hover",b[e.hoverIndex]="defualt",e.attr("bgpillarState",b),e.dataset.resetState(),e.dataset.cols[s].state="hover",e.hoverIndex=s}}}),16,!0)),Bar_defineProperty(Bar_assertThisInitialized(e),"myClick",(function(){console.log("myclick")})),e.type="bar",e.pillars=null,e.groups=null,e.fromTos=null,e.hoverIndex=-1,e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bar_setPrototypeOf(t,e)}(Bar,t),e=Bar,(a=[{key:"beforeRender",value:function(){var t=this,e=this.getRenderData().arrLayout,a=e.barData.map((function(e){return{attrs:e,from:{size:t.renderAttrs.transpose?[0,e.size[1]]:[e.size[0],0]},to:{size:e.size}}}));return this.pillars=a,this.groups=e.groupData,{barData:a,groupData:e.groupData}}},{key:"beforeUpdate",value:function(){var t=this,e=this.pillars,a=this.getRenderData().arrLayout,s=a.barData.map((function(s,l){var f=e[l]?e[l]:a.barData[l-1];return f||(f={size:[0,0],pos:s.pos,labelAttrs:null}),{attrs:s,from:{size:f.attrs.disable?t.attr("transpose")?[0,f.attrs.size[1]]:[f.attrs.size[0],0]:f.attrs.size,pos:f.attrs.pos},to:{size:s.size,pos:s.pos}}}));return this.pillars=s,this.groups=a.groupData,{barData:s,groupData:a.groupData}}},{key:"getRenderData",value:function(){var t=this,e=this.renderAttrs,a=this.dataset[e.layoutBy],s=a.length>1?a.length:a[0].length,l=function(t,e){var a=t,s=e.stack,l=e.splitNumber,f=e.clientRect,p=[f.width,f.height],d=e.transpose||!1,y=e.groupGap||0,b=e.stackGap||0,g=e.barWidth||0,_=[],v=[],m={opacity:0,bgcolor:"#000"},O=axis_axis({dataSet:a,stack:s,splitNumber:l});if(!O||!O.length)return{barData:_,groupData:v};var P=d?{label:p[1],value:p[0]}:{label:p[0],value:p[1]},w=Math.max.apply(this,O),j=Math.min.apply(this,O),A=w/(w-j),S=function(t){for(var e=0,a=0,s=t.length;a<s;a++)!0!==t[a][0].disabled&&e++;return e||1}(a),x=a[0].length,R=0;0===g?(g=s?.5*P.label/x:.5*P.label/(x*S),R=s?g:g*S):R=s?(P.label-g*x)/x:(P.label-g*S*x-y*(S-1)*x)/x;var k=P.value/(w-j);if(s)for(var M=0,C=x;M<C;M++){for(var E=0,T=0,D=0,B={rects:[]},L=0,I=a.length;L<I;L++){var q=b;!0!==a[L][M].disabled&&(a[L][M].disabled=!1),D=a[L][M].value;var W=k*Math.abs(D);0===W&&(q=0);var z=D<0?P.value*(1-A)-T:P.value*(1-A)+E,N=D<0?P.value*A+T+W:P.value*A-E,G=layout_objectSpread({anchor:[d&&D<0?1:0,d||D<0?0:1],size:d?[W-q,g]:[g,W-q],pos:d?[z,R/2+(g+R)*M]:[R/2+(g+R)*M,D<0?P.value*A+T:P.value*A-E],index:L,labelAttrs:{opacity:a[L][M].disabled?0:1,text:D,anchor:d?D<0?[1,.5]:[0,.5]:[.5,1],pos:d?[z,+(R+g)/2+(g+R)*M]:[(R+g)/2+(g+R)*M,N]}},a[L][M]);G.disabled?G.size=d?[0,G.size[1]]:[G.size[0],0]:(D<0?T+=W:E+=W,B.rects.push(G)),_.push(G)}B=Object.assign(B,layout_objectSpread({pos:d?[0,(R+g)*M]:[(R+g)*M,0],size:d?[P.value,g+R]:[g+R,P.value]},m)),v.push(B)}else for(var $=0,F=x;$<F;$++){for(var U=0,V=0,K={rects:[]},H=0,J=a.length;H<J;H++){!0!==a[H][$].disabled&&(a[H][$].disabled=!1),V=a[H][$].value;var Q=k*Math.abs(V),X=layout_objectSpread({anchor:[d&&V<0?1:0,d||V<0?0:1],size:d?[Q,g-1]:[g-1,Q],pos:d?[P.value*(1-A),R/2+(g+y)*(H-U)+(g*S+y*(S-1)+R)*$]:[R/2+(g+y)*(H-U)+(g*S+y*(S-1)+R)*$,P.value*A],labelAttrs:{opacity:a[H][$].disabled?0:1,text:V,anchor:[d&&V<0?1:0,.5],pos:d?[P.value*(1-A),R/2+(g+y)*(H-U)+(g*S+y*(S-1)+R)*$+.5*g]:[R/2+(g+y)*(H-U)+(g*S+y*(S-1)+R)*$+.5*g,P.value*A],rotate:d?0:V<0?90:270}},a[H][$]);X.disabled?(X.size=d?[0,X.size[1]]:[X.size[0],0],U++):K.rects.push(X),_.push(X)}K=Object.assign(K,layout_objectSpread({pos:d?[0,(R+g*S+y*(S-1))*$]:[(R+g*S+y*(S-1))*$,0],size:d?[P.value,g*S+y*(S-1)+R]:[g*S+y*(S-1)+R,P.value]},m)),v.push(K)}return{barData:_,groupData:v}}(a,e),f=this.theme.colors,p=this.renderStyles;return l.barData=l.barData.map((function(e,a){var l=t.style("pillar")(e.attrs,t.dataset.rows[a],a),d=deepObjectMerge({bgcolor:e.bgcolor||f[a%s]},p.bar,l);return e=deepObjectMerge(e,d)})),{arrLayout:l}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){var t=this.dataset.rows;return{layer:"bar",bgpillarState:Array.from({length:t[0].length},(function(){return"defalut"})),states:{bgpillar:{animation:{duration:20},default:{opacity:.01},hover:{opacity:.1}}}}}},{key:"defaultStyles",value:function(){return{}}},{key:"onMouseleave",value:function(t,e){this.dataset.resetState();var a=this.renderAttrs.bgpillarState;a[this.hoverIndex]="defualt",this.attr("bgpillarState",a),this.hoverIndex=-1}},{key:"render",value:function(t){var e=this.renderAttrs,a=e.clientRect,s=e.bgpillarState,l=e.states;return qcharts.h(O.Group,{class:"container",ref:"wrap",pos:[a.left,a.top],size:[a.width,a.height],onMouseleave:this.onMouseleave,onMouseenter:this.onMousemove,onMousemove:this.onMousemove,onClick:this.myClick},qcharts.h(O.Group,{ref:"pillars",class:"pillars-group"},t.barData.map((function(t,e){return qcharts.h(O.Sprite,Bar_extends({},t.attrs,t.from,{animation:{from:t.from,to:t.to}}))}))),qcharts.h(O.Group,{ref:"bgpillar",class:"bgpillars-group"},t.groupData.map((function(t,e){return qcharts.h(O.Sprite,Bar_extends({state:s[e],states:l.bgpillar},t))}))))}},{key:"renderAttrs",get:function(){return Bar_get(Bar_getPrototypeOf(Bar.prototype),"renderAttrs",this)}}])&&Bar_defineProperties(e.prototype,a),s&&Bar_defineProperties(e,s),Bar}(C);function PolarBar_layout_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function PolarBar_layout_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?PolarBar_layout_ownKeys(Object(a),!0).forEach((function(e){PolarBar_layout_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):PolarBar_layout_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function PolarBar_layout_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function PolarBar_typeof(t){return(PolarBar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PolarBar_extends(){return(PolarBar_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t}).apply(this,arguments)}function PolarBar_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function PolarBar_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PolarBar_get(t,e,a){return(PolarBar_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PolarBar_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function PolarBar_getPrototypeOf(t){return(PolarBar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function PolarBar_setPrototypeOf(t,e){return(PolarBar_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function PolarBar_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var q=function(t){function PolarBar(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PolarBar),e=function(t,e){return!e||"object"!==PolarBar_typeof(e)&&"function"!=typeof e?PolarBar_assertThisInitialized(t):e}(this,PolarBar_getPrototypeOf(PolarBar).call(this,t)),PolarBar_defineProperty(PolarBar_assertThisInitialized(e),"onClick",(function(t,a,s,l){if(!e.renderAttrs.stack&&l.hasOwnProperty("startAngle")&&l.hasOwnProperty("endAngle")){var f=e.renderAttrs.clientRect,p=f.width,d=f.height,y=a.isTranslated,b=Math.max(20,.1*Math.min(p/2,d/2)),g=l.startAngle,_=l.endAngle,v=Math.PI*(g+_)/360,m=[b*Math.cos(v),b*Math.sin(v)],O=a;if(y)O.transition(.3).attr("translate",[0,0]),a.isTranslated=!1;else{O.transition(.3).attr("translate",m),a.isTranslated=!0;for(var P=0,w=e.pillars.length;P<w;P++)a.id!==e.$refs["pillar"+P].id&&!0===e.$refs["pillar"+P].isTranslated&&(e.$refs["pillar"+P].transition(.3).attr("translate",[0,0]),e.$refs["pillar"+P].isTranslated=!1)}}})),PolarBar_defineProperty(PolarBar_assertThisInitialized(e),"onMousemove",throttle((function(t){console.log(t)}),16,!0)),e.type="polarbar",e.groups=[],e.pillars=[],e.$pillars=[],e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&PolarBar_setPrototypeOf(t,e)}(PolarBar,t),e=PolarBar,(a=[{key:"beforeRender",value:function(){var t=this.getRenderData().arrLayout;return this.pillars=t.barData,this.groups=t.groupData,{barData:t.barData.map((function(t){return{attrs:t,from:{endAngle:t.startAngle},to:{endAngle:t.endAngle}}})),groupData:this.groups}}},{key:"beforeUpdate",value:function(){var t=this,e=this.pillars,a=this.getRenderData().arrLayout,s=a.barData.map((function(s,l){var f=e[l]?e[l]:a.barData[l-1];return f||(f={size:[0,0],pos:s.pos,labelAttrs:null}),{attrs:s,from:{size:f.disable?t.attr("transpose")?[0,f.size[1]]:[f.size[0],0]:f.size,pos:f.pos},to:{size:s.size,pos:s.pos}}}));return this.pillars=a.barData,this.groups=a.groupData,{barData:s,groupData:a.groupData}}},{key:"getRenderData",value:function(){var t=this,e=this.renderAttrs,a=this.dataset[e.layoutBy];if(!a||0===a.length)return{barData:[],groupData:[]};var s=a.length>1?a.length:a[0].length;this.legendArr=Array.from({length:a.length},(function(){return 1}));var l=function(t,e){var a=t,s=e.stack,l=e.splitNumber,f=e.clientRect,p=e.groupPadAngle,d=[f.width,f.height],y=p||0,b=e.stackGap||0,g=e.radius||1,_=e.innerRadius||0,v=(e.padAngle,[]),m=[],O={opacity:.01,fillColor:"#FF0000"},P=axis_axis({dataSet:a,stack:s,splitNumber:l});if(!P||!P.length)return{barData:v,groupData:m};var w=Math.min(d[0],d[1]),j=Math.max.apply(this,P),A=Math.min.apply(this,P),S=j/(j-A),x=function(t){for(var e=0,a=0,s=t.length;a<s;a++)!0!==t[a][0].disabled&&e++;return e||1}(a),R=a[0].length,k=.5*g*w,M=k/(j-A);if(s)for(var C=0,E=R;C<E;C++){for(var T=0,D=0,B=0,L={rects:[]},I=(2*Math.PI-R*y)/R,q=0,W=a.length;q<W;q++){!0!==a[q][C].disabled&&(a[q][C].disabled=!1);var z=(I+y)*C-.5*Math.PI,N=M*(B=a[q][C].value),G=B<0?k*(1-S)-D:k*(1-S)+T,$=PolarBar_layout_objectSpread({innerRadius:G+=_*w*.5,outerRadius:G+N-b,startAngle:180*z/Math.PI,endAngle:180*(z+I)/Math.PI},a[q][C]);$.disabled?$.opacity=0:($.opacity=1,B<0?D-=N:T+=N,L.rects.push($)),v.push($)}L=Object.assign(L,PolarBar_layout_objectSpread({innerRadius:.5*_*w,outerRadius:.5*(_+g)*w,startAngle:180*((y+I)*C-.5*Math.PI)/Math.PI,endAngle:180*((y+I)*C+I-.5*Math.PI)/Math.PI},O)),m.push(L)}else for(var F=0,U=R;F<U;F++){for(var V=0,K={rects:[]},H=(2*Math.PI-R*y)/R,J=0,Q=a.length;J<Q;J++){!0!==a[J][F].disabled&&(a[J][F].disabled=!1);var X=H/x,Y=(H+y)*F+X*(J-V)-.5*Math.PI,Z=k*(1-S)+_*w*.5,tt=PolarBar_layout_objectSpread({innerRadius:Z,outerRadius:Z+M*a[J][F].value,startAngle:180*Y/Math.PI,endAngle:180*(Y+X)/Math.PI},a[J][F],{id:F*Q+J});tt.disabled?(tt.endAngle=tt.startAngle,tt.radius=0,tt.opacity=0,V++):(tt.opacity=1,K.rects.push(tt)),R<2&&(delete tt.startAngle,delete tt.endAngle),v.push(tt)}K=Object.assign(K,PolarBar_layout_objectSpread({innerRadius:.5*_*w,outerRadius:.5*(_+g)*w,startAngle:180*((y+H)*F-.5*Math.PI)/Math.PI,endAngle:180*((y+H)*F+H-.5*Math.PI)/Math.PI},O)),R<2&&(delete K.startAngle,delete K.endAngle),m.push(K)}return{barData:v,groupData:m}}(a,e),f=this.theme.colors,p=this.renderStyles;return l.groupData.forEach((function(e,a){e.pos=t.pos})),l.barData.forEach((function(a,l){var d=t.style("pillar")(a.attrs,t.dataset.rows[l],l);a.fillColor=a.fillColor||f[l%s],a.strokeColor=e.strokeColor||"#FFF",a.pos=t.pos,a.hasOwnProperty("startAngle")&&a.hasOwnProperty("endAngle")?a.lineWidth=1:a.lineWidth=0;var y=deepObjectMerge({bgcolor:a.bgcolor||f[l%s]},p.bar,d);a=deepObjectMerge(a,y)})),{arrLayout:l}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){return{layer:"bar"}}},{key:"defaultStyles",value:function(){return{}}},{key:"onMouseenter",value:function(t,e){e.attr({opacity:.1})}},{key:"onMouseleave",value:function(t,e){e.attr({opacity:.01})}},{key:"onMouseleave",value:function(t){}},{key:"render",value:function(t){var e=this;return this.renderAttrs.clientRect,qcharts.h(O.Group,{class:"container",ref:"wrap"},qcharts.h(O.Group,null,t.barData.map((function(t,a){return qcharts.h(O.Ring,PolarBar_extends({ref:"pillar"+a},t.attrs,{onClick:function(s,l){e.onClick(s,l,a,t.attrs)}}))}))))}},{key:"renderAttrs",get:function(){return PolarBar_get(PolarBar_getPrototypeOf(PolarBar.prototype),"renderAttrs",this)}},{key:"pos",get:function(){var t=this.renderAttrs.clientRect,e=t.height,a=t.width,s=t.top;return[t.left+a/2,s+e/2]}}])&&PolarBar_defineProperties(e.prototype,a),s&&PolarBar_defineProperties(e,s),PolarBar}(C);function Scatter_layout_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Scatter_layout_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Scatter_layout_ownKeys(Object(a),!0).forEach((function(e){Scatter_layout_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Scatter_layout_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Scatter_layout_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function layout_slicedToArray(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var a=[],s=!0,l=!1,f=void 0;try{for(var p,d=t[Symbol.iterator]();!(s=(p=d.next()).done)&&(a.push(p.value),!e||a.length!==e);s=!0);}catch(t){l=!0,f=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw f}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Scatter_layout_toConsumableArray(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var getDataRange=function(t){return 0===t.length?[0,1]:[Math.min.apply(Math,Scatter_layout_toConsumableArray(t)),Math.max.apply(Math,Scatter_layout_toConsumableArray(t))]},getBigRange=function(t){if(0===t.length)return[0,1];var e=layout_slicedToArray(getDataRange(t),2),a=e[0],s=e[1];return[10*(Math.round(a/10)-1),10*(Math.round(s/10)+1)]},layout_updateSectionVal=function(t,e){var a=e.min,s=e.max;"number"===jsType(a)&&(t[0]=a),"number"===jsType(s)&&(t[1]=s)};function Scatter_layout_layout(t,e,a){var s=layout_slicedToArray(e,2),l=s[0],f=s[1],p=t.option,d=p.text,y=p.value,b=Scatter_layout_toConsumableArray(t).filter((function(t){return"disabled"!==t.state})),g=getDataRange(t.rows.map((function(t){return t.length})))[1],_=[0,g-1],v=[0,g-1],m=b.some((function(t){return"string"===jsType(t.text)}));if(!m){v=getBigRange(b.map((function(t){return t.text})));var O=axis_axis({dataSet:data,stack:!1,field:d,section:v});_=getDataRange(O)}if(b.some((function(t){return"string"===jsType(t.value)})))throw new Error("Scatter's value category data should be Number!");var P=getBigRange(b.map((function(t){return t.value}))),w=axis_axis({dataSet:data,stack:!1,field:y,section:P}),j=getDataRange(w);a&&(a[d]&&layout_updateSectionVal(v,a[d]),a[y]&&layout_updateSectionVal(P,a[y]));var A={};A[d]={min:v[0],max:v[1]},A[y]={min:P[0],max:P[1]};var S=scaleLinear().domain(_).range([0,l]),x=scaleLinear().domain(j).range([0,f]);return{data:t.rows.map((function(t){var e=t.map((function(e,a){var s=m?a:e.text,l=e.value;return{pos:[S(s),f-x(l)],radius:5,anchor:[1,1],dataOrigin:Scatter_layout_objectSpread({},e.data),state:e.state,name:t.name,col:e.col,row:e.row}}));return{name:t.name,state:t.state,attrs:e}})),layoutWay:A}}function Scatter_typeof(t){return(Scatter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Scatter_extends(){return(Scatter_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t}).apply(this,arguments)}function Scatter_objectWithoutProperties(t,e){if(null==t)return{};var a,s,l=function(t,e){if(null==t)return{};var a,s,l={},f=Object.keys(t);for(s=0;s<f.length;s++)a=f[s],e.indexOf(a)>=0||(l[a]=t[a]);return l}(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(s=0;s<f.length;s++)a=f[s],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(l[a]=t[a])}return l}function Scatter_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Scatter_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Scatter_ownKeys(Object(a),!0).forEach((function(e){Scatter_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Scatter_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Scatter_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Scatter_toConsumableArray(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Scatter_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Scatter_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Scatter_possibleConstructorReturn(t,e){return!e||"object"!==Scatter_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Scatter_get(t,e,a){return(Scatter_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Scatter_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Scatter_getPrototypeOf(t){return(Scatter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Scatter_setPrototypeOf(t,e){return(Scatter_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var W=function(t){function Scatter(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Scatter_classCallCheck(this,Scatter),(t=Scatter_possibleConstructorReturn(this,Scatter_getPrototypeOf(Scatter).call(this,e))).type="scatter",t.scatterData=[],t.guideLineData=[],t}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Scatter_setPrototypeOf(t,e)}(Scatter,t),e=Scatter,(a=[{key:"defaultAttrs",value:function(){return{labelField:null,areaField:null,areaRange:null,showGuideLine:!1,layoutWay:null}}},{key:"_processData",value:function(){var t=this,e=this.dataset,a=this.renderAttrs,s=a.layoutWay,l=a.clientRect,f=Scatter_layout_layout(e,[l.width,l.height],s),p=f.data,d=f.layoutWay;return deepObjectMerge(this.renderAttrs.layoutWay||{},d),p.forEach((function(e,a){var s=t.theme.colors[a],l=function(t,e){if(/^rgba\(.+\)$/.test(t))return t;var a;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return 3===(a=t.substring(1).split("")).length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]),"rgba("+[(a="0x"+a.join(""))>>16&255,a>>8&255,255&a].join(",")+","+e+")";throw new Error("Bad Hex")}(s,.3);e.attrs.forEach((function(t){t.strokeColor=s,t.fillColor=l}))})),p}},{key:"beforeUpdate",value:function(){var t=this;Scatter_get(Scatter_getPrototypeOf(Scatter.prototype),"beforeUpdate",this).call(this);var e=this._processData(),a=e.map((function(t){return deepObjectMerge({},t)}));return e.forEach((function(e,a){var s=t.scatterData[a];e.attrs.forEach((function(t,e){if(s&&s.attrs[e]){var a=s.attrs[e],l=Scatter_toConsumableArray(t.pos),f=a.animation.to&&a.animation.to.pos?Scatter_toConsumableArray(a.animation.to.pos):Scatter_toConsumableArray(a.pos);t.scale=1,l.toString()===f.toString()?t.animation={}:(t.pos=Scatter_toConsumableArray(f),t.animation={from:{pos:f},to:{pos:l}})}else t.scale=0,t.animation={from:{scale:0},to:{scale:1}}}))})),this.scatterData=a.map((function(t){return deepObjectMerge({},t)})),e}},{key:"beforeRender",value:function(){Scatter_get(Scatter_getPrototypeOf(Scatter.prototype),"beforeRender",this).call(this);var t=this._processData();return this.scatterData=t.map((function(t){return deepObjectMerge({},t)})),t.forEach((function(t){t.attrs.forEach((function(t){t.scale=0,t.animation={from:{scale:0},to:{scale:1}}}))})),t}},{key:"rendered",value:function(){}},{key:"getRealRadius",value:function(t){var e=this.renderAttrs,a=e.areaRange,s=e.areaField,l=t.radius,f=t.dataOrigin;if(!s||!f.hasOwnProperty(s))return l;if(!a)return f[s];var p=Scatter_toConsumableArray(this.dataset).filter((function(t){return"disabled"!==t.state})).sort((function(t,e){return t-e}));return scaleLinear().domain([p[0],p[p.length-1]]).range(a)(f[s])}},{key:"onMouseenter",value:function(t,e){this.dataset.resetState();var a=e.attributes,s=a.row,l=a.col;if(this.dataset.forEach((function(t){t.state=t.row===s&&t.col===l?"hover":"default"})),this.renderAttrs.showGuideLine){var f=e.attr("pos"),p=this.renderAttrs.clientRect,d=p.height,y=p.width;this.guideLineData=[[[0,f[1]],[y,f[1]]],[[f[0],0],[f[0],d]]]}}},{key:"onMouseleave",value:function(){this.dataset.resetState(),this.guideLineData=[]}},{key:"renderGuideLine",value:function(){if(this.guideLineData.length>0)return this.guideLineData.map((function(t){return qcharts.h(O.Polyline,{points:t,strokeColor:"#ddd",lineWidth:1,translate:[.5,.5]})}))}},{key:"renderLabel",value:function(t){var e=this,a=this.renderAttrs.labelField;if(a)return t.map((function(t){return t.attrs.map((function(t,s){var l=e.style("label")(t,Scatter_objectSpread({},t.dataOrigin),s);if(!1!==l){var f=t.dataOrigin;if(f.hasOwnProperty(a)){var p=t.strokeColor,d=deepObjectMerge(Scatter_objectWithoutProperties(t,["strokeColor"]),{fillColor:p,text:f[a],anchor:[.5,.5],fontSize:"12px"},l);return qcharts.h(O.Label,d)}}}))})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"renderScatter",value:function(t){var e=this;return t.map((function(t){return t.attrs.map((function(t,a){var s=e.getRealRadius(Scatter_objectSpread({},t)),l=e.style("point")(t,Scatter_objectSpread({},t.dataOrigin),a);if(!1!==l){var f=e.style("point:hover")(t,t.dataOrigin,a)||{radius:s+1};return l="hover"===t.state?deepObjectMerge(l||{},f):deepObjectMerge(l||{},{radius:s}),qcharts.h(O.Group,{clipOverflow:!1},qcharts.h(O.Arc,Scatter_extends({},t,l,{onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave})))}}))})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"render",value:function(t){var e=this.renderAttrs.clientRect,a=e.height,s=e.width,l=e.left,f=e.top;return qcharts.h(O.Group,{size:[s,a],pos:[l,f],zIndex:100,clipOverflow:!1},this.renderScatter(t),this.renderLabel(t),this.renderGuideLine())}},{key:"renderAttrs",get:function(){return Scatter_objectSpread({},Scatter_get(Scatter_getPrototypeOf(Scatter.prototype),"renderAttrs",this))}}])&&Scatter_defineProperties(e.prototype,a),s&&Scatter_defineProperties(e,s),Scatter}(C);var utils_ellipse2path=function(t,e,a,s){if(!isNaN(t-e+a-s))return"M"+(t-a)+" "+e+"a"+a+" "+s+" 0 1 0 "+2*a+" 0a"+a+" "+s+" 0 1 0 "+-2*a+" 0z"};function Wave_typeof(t){return(Wave_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wave_extends(){return(Wave_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t}).apply(this,arguments)}function Wave_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Wave_possibleConstructorReturn(t,e){return!e||"object"!==Wave_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wave_get(t,e,a){return(Wave_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wave_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Wave_getPrototypeOf(t){return(Wave_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wave_setPrototypeOf(t,e){return(Wave_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=function(t){function Wave(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Wave),(e=Wave_possibleConstructorReturn(this,Wave_getPrototypeOf(Wave).call(this,t))).offsetR=50,e.tickId="",e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wave_setPrototypeOf(t,e)}(Wave,t),e=Wave,(a=[{key:"beforeRender",value:function(){return[]}},{key:"beforeUpdate",value:function(){return[]}},{key:"getRenderData",value:function(){}},{key:"rendered",value:function(){this.wave()}},{key:"defaultAttrs",value:function(){return{amplitude:8,wavelength:300,radius:150,percent:.65,formatter:function(t){return 100*t+"%"}}}},{key:"wave",value:function(){var t=this,e=0,a=this.$refs.clipWave,s=this.$refs.clipPath||a,l=s.originalContentRect[3],f=this.renderAttrs,p=f.percent,d=f.wavelength,y=f.amplitude,b=f.clientRect,g=f.animation,_=f.shape,v=24/g.duration,m=0-b.left,P=l*(1-p)+s.originalContentRect[1];this.tickId=Object(O.requestAnimationFrame)((function(s){t.offsetR+=v;var f=[[m,P+l]];for(f.push([m,P+y*Math.sin(e+t.offsetR)]);m<b.width+b.left+b.right;)f.push([m,P+y*Math.sin(e+t.offsetR)]),m+=d/8,e+=Math.PI/4;var p=y*Math.sin(e+t.offsetR);f.push([m,P+p]),f.push([m,P+p]),f.push([m,P+l]),a.attr({points:f,clipPath:" "+_}),t.offsetR>=2*Math.PI&&(t.offsetR=t.offsetR%(2*Math.PI)),t.wave()}))}},{key:"render",value:function(){var t=this.renderAttrs,e=t.clientRect,a=t.shape,s=t.center,l=t.formatter,f=t.percent,p=this.renderStyles,d=getStyle(this,"wave",p.wave),y=getStyle(this,"shape",p.shape),b=getStyle(this,"text",p.text);return qcharts.h(O.Group,{zIndex:1,class:"container",pos:[e.left,e.top],size:[e.width,e.height]},qcharts.h(O.Path,{ref:"clipPath1",d:a,fillColor:y.fillColor}),qcharts.h(O.Polyline,Wave_extends({ref:"clipWave"},d,{clipPath:a,smooth:!0})),qcharts.h(O.Path,{ref:"clipPath",d:a,strokeColor:y.strokeColor,lineWidth:y.lineWidth}),!1===b?qcharts.h(O.Node,null):qcharts.h(O.Label,Wave_extends({text:l(f)},b,{pos:s,anchor:[.5]})))}},{key:"renderAttrs",get:function(){var t=Wave_get(Wave_getPrototypeOf(Wave.prototype),"renderAttrs",this),e=t.clientRect,a=Math.floor(e.width),s=Math.floor(e.height);return t.center=[a/2,s/2],t.shape||(t.shape=utils_ellipse2path(t.center[0],t.center[1],t.radius,t.radius)),t}}])&&Wave_defineProperties(e.prototype,a),s&&Wave_defineProperties(e,s),Wave}(C);function BasePlugin_typeof(t){return(BasePlugin_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BasePlugin_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function BasePlugin_possibleConstructorReturn(t,e){return!e||"object"!==BasePlugin_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function BasePlugin_getPrototypeOf(t){return(BasePlugin_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function BasePlugin_setPrototypeOf(t,e){return(BasePlugin_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var N=function(t){function BasePlugin(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BasePlugin),(e=BasePlugin_possibleConstructorReturn(this,BasePlugin_getPrototypeOf(BasePlugin).call(this,t))).theme=M.plugins[e.constructor.name],e.theme.set=function(t){e.theme===M.visuals[e.constructor.name]&&(e.theme=g()(e.theme)),e.theme=deepObjectMerge(e.theme,t)},e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BasePlugin_setPrototypeOf(t,e)}(BasePlugin,t),e=BasePlugin,(a=[{key:"componentType",get:function(){return"plugin"}}])&&BasePlugin_defineProperties(e.prototype,a),s&&BasePlugin_defineProperties(e,s),BasePlugin}(R);function Axis_layout_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Axis_layout_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Axis_layout_ownKeys(Object(a),!0).forEach((function(e){Axis_layout_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Axis_layout_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Axis_layout_defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function getItemAttrs(t,e,a,s,l,f,p){var d=emptyObject(),y=f.width,b=f.height,g=f.left,_=p?s+.5:s;if("left"===e||"right"===e){var v="left"===e?0:y;d.scaleAttr=Axis_layout_objectSpread({},t[e].scale,{pos:[v,b-l(s)]}),d.labelAttr=Axis_layout_objectSpread({},t[e].label,{width:g,text:""+a.text,pos:[v,b-l(_)]})}else if("top"===e||"bottom"===e){var m="top"===e?0:b;d.scaleAttr=Axis_layout_objectSpread({},t[e].scale,{pos:[l(s),m]}),d.labelAttr=Axis_layout_objectSpread({},t[e].label,{width:g,text:""+a.text,pos:[l(_),m]})}return d}function Axis_typeof(t){return(Axis_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Axis_extends(){return(Axis_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t}).apply(this,arguments)}function Axis_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Axis_possibleConstructorReturn(t,e){return!e||"object"!==Axis_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Axis_get(t,e,a){return(Axis_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Axis_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Axis_getPrototypeOf(t){return(Axis_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Axis_setPrototypeOf(t,e){return(Axis_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G=function(t){function Axis(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Axis),(e=Axis_possibleConstructorReturn(this,Axis_getPrototypeOf(Axis).call(this,t))).renderAxis=emptyObject(),e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Axis_setPrototypeOf(t,e)}(Axis,t),e=Axis,(a=[{key:"beforeRender",value:function(){return this.getRenderData().axis}},{key:"beforeUpdate",value:function(){return this.getRenderData().axis}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){return{layer:"axis",formatter:function(t){return t}}}},{key:"getRenderData",value:function(){var t=this.renderAttrs;return{axis:function(t,e){var a={scales:[],labels:[],axisPoints:[],orient:e.orient},s={top:{label:{anchor:[.5,1],padding:[0,0,6,0],textAlign:"center"},scale:{anchor:[.5,1],width:1,height:4},type:"category"},bottom:{scale:{anchor:[.5,0],width:1,height:4},label:{anchor:[.5,0],padding:[6,0,0,0],textAlign:"center"},type:"category"},left:{label:{padding:[0,8,0,0],anchor:[1,.5],textAlign:"right"},scale:{anchor:[1,.5],width:4,height:1},type:"value"},right:{label:{anchor:[0,.5],padding:[0,0,0,8]},scale:{anchor:[0,.5],width:4,height:1},type:"value"}},l=e.stack,f=e.splitNumber,p=e.clientRect,d=e.orient,y=e.axisGap;e.transpose&&["top","bottom","right","left"].forEach((function(t){s[t].type="value"===s[t].type?"category":"value"}));var b=p.width,g=p.height,_=axis_axis({dataSet:t,stack:l,splitNumber:f}),v=Math.max.apply(this,_),m=Math.min.apply(this,_),O=e.type||s[d].type,P="left"===d||"right"===d?g:b;if("value"===O){var w=scaleLinear().domain([m,v]).range([0,P]);_.forEach((function(t){var e=getItemAttrs(s,d,{text:""+t},t,w,p),l=e.scaleAttr,f=e.labelAttr;a.scales.push(l),a.labels.push(f)}))}else if("category"===O){var j=t[0],A=y?j.length:j.length-1,S=scaleLinear().domain([0,A]).range([0,P]);if(j.forEach((function(t,e){var l=getItemAttrs(s,d,t,e,S,p,y),f=l.scaleAttr,b=l.labelAttr;a.scales.push(f),a.labels.push(b)})),y){var x=getItemAttrs(s,d,{},j.length,S,p,y).scaleAttr;a.scales.push(x)}}if("left"===d||"right"===d){var R="left"===d?0:b;a.axisPoints=[[R,g],[R,0]]}else if("bottom"===d||"top"===d){var k="bottom"===d?g:0;a.axisPoints=[[0,k],[b,k]]}return a}(this.dataset[t.layoutBy],t)}}},{key:"render",value:function(t){var e=this,a=this.renderAxis||emptyObject();this.renderAxis=t;var s=this.renderAttrs,l=s.clientRect,f=s.formatter,p=this.renderStyles,d=p.scale,y=p.label,b=p.axis,_=this.style("axis")(b);return _=deepObjectMerge({},b,_),qcharts.h(O.Group,{ref:"wrap",pos:[l.left,l.top]},qcharts.h(O.Polyline,Axis_extends({},_,{animation:{from:{points:a.axisPoints},to:{points:t.axisPoints}}})),qcharts.h(O.Group,null,t.scales.map((function(t,s){var l={from:{pos:a.scales&&a.scales[s]&&a.scales[s].pos||t.pos},to:{pos:t.pos}},f=e.style("scale")(d,t,s),p=deepObjectMerge({},d,f);return qcharts.h(O.Group,Axis_extends({},g()(t,[],["pos"]),p,{animation:l}))})),t.labels.map((function(t,s){var l=a.labels&&a.labels[s]&&a.labels[s].pos||t.pos,p=e.style("label")(y,t,s),d=deepObjectMerge({},y,p),b={from:{pos:l},to:{pos:t.pos}};return qcharts.h(O.Label,Axis_extends({},g()(t,[],["pos","text"]),{text:f(t.text)},d,{animation:b}))}))))}},{key:"renderAttrs",get:function(){var t=Axis_get(Axis_getPrototypeOf(Axis.prototype),"renderAttrs",this),e=this.chart.visuals[0];return void 0===t.axisGap&&e&&"Bar"===e.constructor.name&&(t.axisGap=!0),void 0===t.transpose&&e&&(t.transpose=e.renderAttrs.transpose),t}}])&&Axis_defineProperties(e.prototype,a),s&&Axis_defineProperties(e,s),Axis}(N);function Legend_typeof(t){return(Legend_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Legend_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Legend_possibleConstructorReturn(t,e){return!e||"object"!==Legend_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Legend_get(t,e,a){return(Legend_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Legend_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Legend_getPrototypeOf(t){return(Legend_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Legend_setPrototypeOf(t,e){return(Legend_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $=function(t){function Legend(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Legend),(e=Legend_possibleConstructorReturn(this,Legend_getPrototypeOf(Legend).call(this,t))).$el=null,e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Legend_setPrototypeOf(t,e)}(Legend,t),e=Legend,(a=[{key:"defaultAttrs",value:function(){return{}}},{key:"beforeRender",value:function(){return this.dataset.rows}},{key:"itemClick",value:function(){console.log(click)}},{key:"beforeUpdate",value:function(){}},{key:"rendered",value:function(){var t=this;if(!1!==this.renderAttrs.clickAble){this.$el.querySelectorAll(".legend-item").forEach((function(t){t.style.cursor="pointer"}));var e=this.dataset,a=this.$el;a.addEventListener("click",(function(s){var l=s.target,f=function getParent(t,e,a){var s=t.querySelectorAll(a);return e===t?void 0:-1!==[].indexOf.call(s,e)?e:getParent(t,e.parentNode,a)}(a,l,".legend-item");if(f){var p=f.getAttribute("data-id"),d=e.rows[p].state;e.rows[p].state="disabled"===d?"default":"disabled"}t.render(e.rows)}),!1)}}},{key:"render",value:function(t){var e=this;if(t){var a=this.renderAttrs,s=a.colors,l=a.clientRect,f=l.left,p=l.top,d=l.width,y=l.height,b=l.right,g=l.bottom;this.$el||(this.$el=document.createElement("div"),this.$el.className="qcharts-legend",this.$el.style.cssText="text-align:center;position:absolute;font-size:12px;left:".concat(f,";top:").concat(p,";width:").concat(d,";height:").concat(y,";right:").concat(b,";bottom:").concat(g),this.chart.$el.appendChild(this.$el));var _="";t.forEach((function(t,a){var l="disabled"!==e.dataset.rows[a].state?s[a]:"#ddd";_+='<div style="display:inline-block;padding:0 4px;cursor:pointer" class="legend-item" data-id="'.concat(a,'"><span class="icon" style="margin-right:6px;display:inline-block;width:10px;height:10px;background-color:').concat(l,'"></span><span class="text" style="color:#666">').concat(t.name,"</span></div>")})),this.$el.innerHTML=_}}},{key:"renderAttrs",get:function(){var t=Legend_get(Legend_getPrototypeOf(Legend.prototype),"renderAttrs",this);return t.clientRect={bottom:0,width:"100%",left:0,right:""},t}}])&&Legend_defineProperties(e.prototype,a),s&&Legend_defineProperties(e,s),Legend}(N);function Tooltip_typeof(t){return(Tooltip_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tooltip_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Tooltip_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tooltip_get(t,e,a){return(Tooltip_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tooltip_getPrototypeOf(t)););return t}(t,e);if(s){var l=Object.getOwnPropertyDescriptor(s,e);return l.get?l.get.call(a):l.value}})(t,e,a||t)}function Tooltip_getPrototypeOf(t){return(Tooltip_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tooltip_setPrototypeOf(t,e){return(Tooltip_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var F=function(t){function Tooltip(t){var e,a,s,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Tooltip),e=function(t,e){return!e||"object"!==Tooltip_typeof(e)&&"function"!=typeof e?Tooltip_assertThisInitialized(t):e}(this,Tooltip_getPrototypeOf(Tooltip).call(this,t)),a=Tooltip_assertThisInitialized(e),s="tipMousemove",l=function(t,e=16,a=!1){let s=null;return function(){let l=arguments,f=this;s?(clearTimeout(s),s=setTimeout((function(){t.apply(f,l)}),e)):(a&&t.apply(f,l),s=setTimeout((function(){t.apply(f,l)}),e))}}((function(t){var a=window.innerWidth-e.$el.getBoundingClientRect().width-5,s=window.innerWidth-e.$el.getBoundingClientRect().height-5,l=t.y>s?s:t.y,f=t.x>a?a:t.x;e.$el.style.left=f+"px",e.$el.style.top=l+"px"}),100,1),s in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,e.$el=null,e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tooltip_setPrototypeOf(t,e)}(Tooltip,t),e=Tooltip,(a=[{key:"beforeRender",value:function(){}},{key:"beforeUpdate",value:function(){}},{key:"rendered",value:function(){var t=this,e=this.chart.visuals[0],a=this.renderAttrs,s=a.colors,l=a.sort,f=a.formatter;e.dataset.on("change",(function(a){var p=a.option;if(t.$el.innerHTML="","hover"===p.value){var d=[];if(e.dataset.forEach((function(t){"hover"===t.state&&d.push(t)})),l&&d.sort(l),d.length){var y="",b=document.createElement("div");b.style.cssText="white-space:nowrap;padding:6px 10px;background-color:rgba(0,0,0,0.5);color:#fff;",d.forEach((function(t,e){var a="".concat(t.text,"").concat(t.value);f&&(a=f(t.data)||a);var l='<div class="tooltip-item"><span class="icon" style="margin-right:6px;display:inline-block;width:10px;height:10px;background-color:'.concat(s[e],'"></span><span class="text">').concat(t.text,"").concat(t.value,"</span></div>");y+=l})),b.innerHTML=y,t.$el.appendChild(b)}}else"reset"===p.name&&(t.$el.innerHTML="")})),document.body.addEventListener("mousemove",this.tipMousemove)}},{key:"render",value:function(){this.$el||(this.$el=document.createElement("div"),this.$el.className="qcharts-tooltip",this.$el.style.cssText="transition:top 300ms ease-out,left 300ms ease-out;position:absolute;pointEvents:none;pointer-events:none;font-size:14px;"),document.body.appendChild(this.$el)}},{key:"renderAttrs",get:function(){return Tooltip_get(Tooltip_getPrototypeOf(Tooltip.prototype),"renderAttrs",this)}}])&&Tooltip_defineProperties(e.prototype,a),s&&Tooltip_defineProperties(e,s),Tooltip}(N),U=window;function Chart_typeof(t){return(Chart_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Chart_defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Chart_possibleConstructorReturn(t,e){return!e||"object"!==Chart_typeof(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Chart_getPrototypeOf(t){return(Chart_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Chart_setPrototypeOf(t,e){return(Chart_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var V=function(t){function Chart(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Chart),e=Chart_possibleConstructorReturn(this,Chart_getPrototypeOf(Chart).call(this));var a=t.container;return"string"===jsType(a)&&(a=document.querySelector(a)),e.$el=a,e.visuals=[],e.plugins=[],e.scene=new O.Scene({container:a,displayRatio:U.devicePixelRatio}),e.scene.addEventListener("resize",(function(t){e.checkUpdate()})),e.checkUpdate=throttle((function(t){[].concat(e.plugins).concat(e.visuals).forEach((function(t){t.update()}))}),300),e.checkRender=throttle((function(t){[].concat(e.visuals).concat(e.plugins).forEach((function(t){t.created(),e.dataset.addDep(t)})),e.__store.__isCreated__=!0,e.dispatchEvent("updated",emptyObject())})),e}var e,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Chart_setPrototypeOf(t,e)}(Chart,t),e=Chart,(a=[{key:"update",value:function(){this.checkUpdate()}},{key:"append",value:function(t){var e=this;if(t instanceof z)this.source([],{});else if(!this.dataset)return void console.error("Chart should set data before append some graphs");"array"!==jsType(t)?(t instanceof C?this.visuals.push(t):t instanceof N&&this.plugins.push(t),t.chart=this,t.scene=this.scene,this.checkRender()):t.forEach((function(t){e.append(t)}))}},{key:"renderChild",value:function(){}}])&&Chart_defineProperties(e.prototype,a),s&&Chart_defineProperties(e,s),Chart}(R),K="1.0.0",H={version:K,Line:E,Pie:T,Area:B,Radar:L,Bar:I,PolarBar:q,Scatter:W,Legend:$,Axis:G,Wave:z,LineTest:D,Tooltip:F,h:h,theme:M,Chart:V};e.default=H}})}));
//# sourceMappingURL=qcharts.js.map