!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("spritejs")):"function"==typeof define&&define.amd?define(["spritejs"],e):"object"==typeof exports?exports.qcharts=e(require("spritejs")):t.qcharts=e(t.spritejs)}(window,(function(t){return function(t){var e={};function __webpack_require__(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,__webpack_require__),s.l=!0,s.exports}return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,a){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)__webpack_require__.d(a,s,function(e){return t[e]}.bind(null,s));return a},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=94)}({0:function(e,a){e.exports=t},1:function(t,e){function _getPrototypeOf(e){return t.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(e)}t.exports=_getPrototypeOf},10:function(t,e,a){var s=a(53),l=a(54),p=a(55);t.exports=function(t,e){return s(t)||l(t,e)||p()}},11:function(t,e,a){var s=a(58),l=a(59),p=a(60);t.exports=function(t){return s(t)||l(t)||p()}},12:function(t,e,a){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function filterClone(t,e,a){var s=t;if("object"==_typeof(t))if("array"===getType(t)){s=[];for(var l=0,p=t.length;l<p;l++)s.push(filterClone(t[l],e,a))}else if(null!==t)for(var f in s=Object.create(null),t)e&&"array"===getType(e)&&e.length?-1!=e.indexOf(f)&&(s[f]=filterClone(t[f],e,a)):e&&"regexp"===getType(e)?e.test(f)&&(s[f]=filterClone(t[f],e,a)):e&&"function"===getType(e)?e(f,t[f])&&(s[f]=filterClone(t[f],e,a)):a&&"array"===getType(a)&&a.length?-1===a.indexOf(f)&&(s[f]=filterClone(t[f],e,a)):a&&"regexp"===getType(a)?a.test(f)||(s[f]=filterClone(t[f],e,a)):a&&"function"===getType(a)&&a(f,t[f])||(s[f]=filterClone(t[f],e,a));return s;function getType(t){var e=_typeof(t);return"object"===e?null===t?null:Object.prototype.toString.call(t).slice(8,-1).toLowerCase():e}};e.default=s},13:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},14:function(t,e,a){window,t.exports=function(t){var e={};function n(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,a){"use strict";function r(...t){let e=t[0];if(t.length>1)for(let a=1;a<t.length;a++)n(e,t[a]);return e;function n(t,e){for(var a in e)t[a]=t[a]&&"[object Object]"===t[a].toString()?r(t[a],e[a]):t[a]=e[a];return t}}function o(){return Object.create(null)}function u(t){const e=typeof t;return"object"===e?null===t?null:Object.prototype.toString.call(t).slice(8,-1).toLowerCase():e}function i(t,e=16,a=!1){let s=null,l=a;return function(...a){if(l)return t.apply(this,a),l=!1;s||(s=setTimeout(()=>{clearTimeout(s),s=null,t.apply(this,a)},e))}}function c(t,e){return"string"===u(t)&&t.match(/%$/)?Number(t.substring(0,t.indexOf("%")))/100*e:t}a.r(e),a.d(e,"deepObjectMerge",(function(){return r})),a.d(e,"emptyObject",(function(){return o})),a.d(e,"jsType",(function(){return u})),a.d(e,"throttle",(function(){return i})),a.d(e,"getDistancePx",(function(){return c}))}])},17:function(t,e,a){var s=a(61);t.exports=function(t,e){if(null==t)return{};var a,l,p=s(t,e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(l=0;l<f.length;l++)a=f[l],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(p[a]=t[a])}return p}},28:function(t,e){function _typeof(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=_typeof=function(t){return typeof t}:t.exports=_typeof=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}t.exports=_typeof},3:function(t,e){function _extends(){return t.exports=_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},_extends.apply(this,arguments)}t.exports=_extends},4:function(t,e,a){var s=a(56);function _get(e,a,l){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=_get=Reflect.get:t.exports=_get=function(t,e,a){var l=s(t,e);if(l){var p=Object.getOwnPropertyDescriptor(l,e);return p.get?p.get.call(a):p.value}},_get(e,a,l||e)}t.exports=_get},5:function(t,e){t.exports=function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},53:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},54:function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],s=!0,l=!1,p=void 0;try{for(var f,d=t[Symbol.iterator]();!(s=(f=d.next()).done)&&(a.push(f.value),!e||a.length!==e);s=!0);}catch(t){l=!0,p=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw p}}return a}}},55:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},56:function(t,e,a){var s=a(1);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}},57:function(t,e){function _setPrototypeOf(e,a){return t.exports=_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_setPrototypeOf(e,a)}t.exports=_setPrototypeOf},58:function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}},59:function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},6:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},60:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},61:function(t,e){t.exports=function(t,e){if(null==t)return{};var a,s,l={},p=Object.keys(t);for(s=0;s<p.length;s++)a=p[s],e.indexOf(a)>=0||(l[a]=t[a]);return l}},7:function(t,e,a){var s=a(28),l=a(13);t.exports=function(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?l(t):e}},8:function(t,e,a){var s=a(57);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}},9:function(t,e){function _defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}t.exports=function(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}},94:function(t,e,a){"use strict";a.r(e),a.d(e,"Dataset",(function(){return _})),a.d(e,"Line",(function(){return it})),a.d(e,"Pie",(function(){return st})),a.d(e,"Area",(function(){return lt})),a.d(e,"Wave",(function(){return dt})),a.d(e,"Radar",(function(){return ut})),a.d(e,"Tooltip",(function(){return At})),a.d(e,"Bar",(function(){return ct})),a.d(e,"PolarBar",(function(){return ht})),a.d(e,"Funnel",(function(){return pt})),a.d(e,"Scatter",(function(){return ft})),a.d(e,"Gauge",(function(){return yt})),a.d(e,"RadialBar",(function(){return gt})),a.d(e,"Axis",(function(){return _t})),a.d(e,"Legend",(function(){return Ot})),a.d(e,"Chart",(function(){return xt})),a.d(e,"h",(function(){return h})),a.d(e,"theme",(function(){return X})),a.d(e,"easing",(function(){return l}));const VNode=function(){};function h(t,e,...a){const s=new VNode;var l;return s.tagName=t,s.attrs=e||{},s.children=(l=a,[].concat.apply([],l)).filter(Boolean),s}const isNull=t=>null==t,diffVNodeChildren=(t,e)=>{const a=[],s=Math.max(t.children.length,e.children.length);for(let l=0;l<s;l++)a[l]=diff(t.children[l],e.children[l]);return a},diffVNodeAttrs=(t,e)=>{let a=[];const s=t.attrs,l=e.attrs;return a=Object.assign({},s,l),a};function diff(t,e){return isNull(t)?{type:"CREATE",newVNode:e}:isNull(e)?{type:"REMOVE"}:((t,e)=>"object"!=typeof t&&t!==e||"object"!=typeof e&&t!==e||t.tagName!==e.tagName)(t,e)?{type:"REPLACE",newVNode:e}:e.tagName?{type:"UPDATE",children:diffVNodeChildren(t,e),attrs:diffVNodeAttrs(t,e)}:void 0}function createElement(t){if(!t)return;let{tagName:e,attrs:a,children:s}=t;const l=new e(a);return patchAttrs(this,l,a),l.appendChild&&s.map(createElement.bind(this)).filter(Boolean).forEach(l.appendChild.bind(l)),l}const s={linear:function(t){return t},quadIn:t=>t*t,quadOut:t=>t*(2-t),quadInOut:t=>((t*=2)<=1?t*t:--t*(2-t)+1)/2,cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,a=.1;return 0===t?0:1===t?1:(!a||a<1?(a=1,e=.1):e=.4*Math.asin(1/a)/(2*Math.PI),-a*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,a=.1;return 0===t?0:1===t?1:(!a||a<1?(a=1,e=.1):e=.4*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,a=.1;return 0===t?0:1===t?1:(!a||a<1?(a=1,e=.1):e=.4*Math.asin(1/a)/(2*Math.PI),(t*=2)<1?a*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:a*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-s.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*s.bounceIn(2*t):.5*s.bounceOut(2*t-1)+.5}};var l=s,p=a(14);const number=(t,e)=>a=>t+(e-t)*a,array=(t,e)=>{const a=e?e.length:0,s=t?Math.min(a,t.length):0,l=new Array(s),p=new Array(a);let f;for(f=0;f<s;++f)l[f]=interpolate(t[f],e[f]);for(;f<a;++f)p[f]=e[f];return t=>{for(f=0;f<s;++f)p[f]=l[f](t);return p}},object=(t,e)=>{let a,s={},l={};for(a in t&&"object"!==!Object(p.jsType)(t)||(t={}),e&&"object"!==!Object(p.jsType)(e)||(e={}),e)a in t?s[a]=interpolate(t[a],e[a]):l[a]=e[a];return t=>{for(a in s)l[a]=s[a](t);return l}};function interpolate(t,e){let a=typeof e;return null===e||"string"===a||"boolean"===a?(s=e,()=>s):("number"===a?number:"array"===Object(p.jsType)(e)?array:object)(t,e);var s}function now(){return"undefined"!=typeof performance?performance.now():Date.now()}let f=window.requestAnimationFrame,d=window.cancelAnimationFrame;if(!f){const t=now();f=e=>setTimeout(()=>{e(now()-t)},16),d=t=>clearTimeout(t)}function Tween(t="linear"){return this._start=null,this._end=null,this._delay=0,this._canceled=!1,this._duration=1,this._easing=l[t]?l[t]:l.linear,this._onUpdate=()=>{},this._onStart=()=>{},this}Tween.prototype={from(t){return this._start=t,this},to(t){return this._end=t,this},duration(t){if("number"!=typeof t)throw new Error("Duration time must be a number");return this._duration=t,this},delay(t){return this._delay=t,this},easing(t){if("function"!=typeof t)throw new Error("easing function must be a function");return this._easing=t,this},onStart(t){if("function"!=typeof t)throw new Error("start callback must be a function");return this._onStart=t,this},onUpdate(t){if("function"!=typeof t)throw new Error("update callback must be a function");return this._onUpdate=t,this},onComplete(t){if("function"!=typeof t)throw new Error("complete callback must be a function");return this._onComplete=t,this},start(){const t=this._easing,e=interpolate(this._start,this._end),a=this._onUpdate;let s=0,l=this._duration,p=null,y=this._delay,g=0;return new Promise(v=>{const step=()=>{s=now()-g;const y=t(Math.min(1,s/l));s>=l?(a(e(1)),v(this),d(p)):(a(e(y)),p=f(step))},start=()=>{g=now(),this._onStart(this._start,this._end),p=f(step)};var b;this.cancel=()=>{d(p)},y&&y>0?(b=y,new Promise(t=>setTimeout(()=>{t()},b))).then(start):start()})}};var y=Tween,g=a(12),v=a.n(g);function patchAttrs(t,e,a){e&&Object.keys(a).length&&(function(t,e,a){const s=a.ref;if(delete a.ref,s&&e)try{t.addRef(s,e)}catch(t){console.error(t)}}(t,e,a),function(t,e,a={}){Object.keys(a).forEach(s=>{if(!/^on/.test(s))return;const l=s.split("on")[1].toLowerCase(),p=a[s]||(()=>{});e.removeAllListeners(l),e.addEventListener(l,a=>p.call(t,a,e)),delete a[s]})}(t,e,a),function(t,e,a={}){let s=a.states,l=a.state;if(s&&l){let f=e.attr("state");if(l!==f){let d=e.attr("states")||Object(p.emptyObject)(),y=Object(p.deepObjectMerge)(Object(p.emptyObject)(),a,d[f]),g=Object(p.deepObjectMerge)(Object(p.emptyObject)(),a,s[l]);e.attr(y);let{duration:v}=Object(p.deepObjectMerge)(Object(p.emptyObject)(),t.renderAttrs.animation,s.animation);e.transition(v/1e3).attr(g)}}else e.attr(a)}(t,e,a),function(t,e,a){if(!e||!a.animation)return;const s=Object(p.deepObjectMerge)(t.renderAttrs.animation,a.animation),{from:l,middle:f,use:d,to:g,delay:b,duration:m,useTween:_,easing:O,formatter:A=(t=>t)}=s;if(!l||!g||!d)return;l&&e.attr(l);let w=v()(s,null,["from","to","formatter","use"]);(()=>{if(_)new y(O).from(l).to(g).delay(b).duration(m).onUpdate(t=>{e.attr(A(t))}).start();else{let t=null;t=f?[l,f,g]:[l,g],e.animate(t,{fill:"both",...w}).finished.then(()=>{delete g.offset,e.attr(g)})}})()}(t,e,a))}function patch(t,e,a=0){let s=this;if(t||e)switch(e.type){case"CREATE":{const{newVNode:l}=e,p=createElement.bind(s)(l);p&&(a&&(s.$el=p),t.appendChild(p));break}case"REPLACE":{const{newVNode:a}=e,l=createElement.bind(s)(a);t.parent.replaceChild(l,t);break}case"REMOVE":t.remove();break;case"UPDATE":{const{attrs:a,children:l}=e;if(patchAttrs(s,t,a),t.children&&l.length){t.children.forEach((t,e)=>{t._ind=e}),l.forEach((t,e)=>{t._ind=e});let e=l.length>t.children.length?l.length:t.children.length;for(let a=0;a<e;a++){let e=t.children.filter(t=>t._ind===a)[0],p=l.filter(t=>t._ind===a)[0];p&&"CREATE"===p.type?patch.bind(s)(t,p):patch.bind(s)(e,p)}}break}}}var b={default:"default",hide:"hide",hover:"hover",active:"active",disabled:"disabled",mixed:"mixed"};function mixinEvent(t){if(t.__store){t.__store.events=[];let e=t.__store.events;t.on=function(a,s){return e.push({type:a,cb:s}),t},t.off=function(a,s){for(let t=0;t<e.length;t++)if(void 0===s)e=[];else{let l=e[t];l.type===a&&l.cb===s&&(e.splice(t,1),t--)}return t},t.once=function(e,a){return t.on(e,(function(...s){fn.apply(t,s),self.off(e,a)}))},t.dispatchEvent=function(a,s){return e.forEach(e=>{e.type===a&&e.cb.call(t,{type:a,option:s})}),t}}}var m=class extends Object{constructor(t,e,a){super(),this.__store=Object.create(null),this.__store.state=b.default,this.__store.row=void 0,this.__store.col=void 0,this.__store.option=e,this.__store.data=t,this.__store.datasets=[a],this._layoutScaleFunc=a.layoutScaleFunc,mixinEvent(this)}get datasets(){return this.__store.datasets}get data(){return this.__store.data}get value(){return this.__store.data[this.__store.option.value]}get layoutScaleValue(){return"function"==typeof this._layoutScaleFunc?this._layoutScaleFunc(this.__store.data[this.__store.option.value]):this.__store.data[this.__store.option.value]}get text(){return this.__store.data[this.__store.option.text]}set row(t){void 0===this.__store.row&&(this.__store.row=t)}get row(){return this.__store.row}set col(t){void 0===this.__store.col&&(this.__store.col=t)}get col(){return this.__store.col}get option(){return this.__store.option}get state(){return this.__store.state}set state(t){b[t]&&this.__store.state!==b[t]&&(this.__store.state=b[t],this.dispatchEvent("change",{name:"cell",value:b[t],data:this}),this.datasets.forEach(e=>{e.dispatchEvent("change",{name:"cell",value:b[t],data:this})}))}};class Row_List extends Array{constructor(t,e){super(),this.__store=Object.create(null),this.__store.__name=t,this.__store.__option=e,this.__store.dataset=null,mixinEvent(this)}get data(){let t=[];return this.forEach(e=>{t.push(e.data)}),t}set dataset(t){this.__store.dataset=t}get dataset(){return this.__store.dataset}get name(){return this.__store.__name}get option(){return this.__store.__option}get state(){let t=this[0].state;for(let e=1;e<this.length;e++)if(this[e].state!==t){t="mixed";break}return t}set state(t){if(b[t]&&this.state!==b[t]){this.forEach(e=>{"disabled"===e.state&&"default"!==t||(e.state=b[t])});let e=null;this instanceof Row?e={name:"row",value:b[t],data:this}:this instanceof Col&&(e={name:"col",value:b[t],data:this}),this.dispatchEvent("change",e),this.dataset&&this.dataset.dispatchEvent("change",e)}}}class Row extends Row_List{}class Col extends Row_List{}class Dataset_Dataset extends Array{constructor(t,e){super(),this.layoutScaleFunc=this.handleLayoutScale(e.layoutScale),t.forEach((t,a)=>{let s=t;t instanceof m?s.datasets.push(this):s=new m(t,e,this),this[a]=s}),this.__store=Object.create(null);let a=this.__store;a.__option=e,a.__deps=[],a.__rows=[],a.__rows=function(t=[],e){let{row:a,sort:s}=e,l=[];if("*"===a){let a=new Row("*",e);t.forEach(t=>{a.push(t)}),s&&a.sort((t,e)=>s(t.data,e.data)),l.push(a)}else{let p=Object.create(null);t.forEach(t=>{let s=t.__store.data;p[s[a]]||(p[s[a]]=new Row(s[a],e)),p[s[a]].push(t)});for(let t in p){let e=p[t];s&&e.sort((t,e)=>s(t.data,e.data)),l.push(e)}}return l.forEach((e,a)=>{e.dataset=t,e.forEach((t,e)=>{t.row=a,t.col=e})}),l}(this,e),mixinEvent(this)}get option(){return this.__store.__option}get cols(){let t=[],e=0;this.__store.__rows.forEach(t=>{t.length>e&&(e=t.length)});for(let a=0;a<e;a++){let e=new Col;e.dataset=this,this.__store.__rows.forEach(t=>{e.push(t[a])}),t.push(e)}return t}get rows(){return this.__store.__rows}resetState(t="default"){let e=[];this.forEach(a=>{a.state!==t&&"disabled"!==a.state&&(e.push(a),a.state=t)}),this.dispatchEvent("change",{name:"reset",data:e})}selectRows(t){let e=this.option.row,a=[];return this.forEach(s=>{-1!==t.indexOf(s.data[e])&&a.push(s)}),new Dataset_Dataset(a,this.option)}addDep(t){this.__store.__deps.push(t)}handleLayoutScale(t){if("string"==typeof t){let e=t.replace(/\d+$/,""),a=2;if("sqrt"!==e&&"pow"!==e&&"log"!==e)return console.warn("layoutScale type error"),function(t){return t};let s=t.replace(/^[a-z]+/,"");if(s){if(!/^[-+]?\d*$/.test(s))return console.warn("layoutScale type error"),function(t){return t};a=Number(s)}switch(e){case"sqrt":return this.datasetReverse=function(t){return Math.pow(t,a)},function(t){return Math.pow(t,1/a)};case"pow":return this.datasetReverse=function(t){return Math.pow(t,1/a)},function(t){return Math.pow(t,a)};case"log":return 2!==a&&10!==a?(console.warn("layoutScale type error"),function(t){return t}):(this.datasetReverse=function(t){return Math.pow(a,t)},function(t){return Math["log"+a](t)});default:return console.warn("layoutScale type error"),function(t){return t}}}return t}}var _=Dataset_Dataset,O=a(3),A=a.n(O),w=a(10),x=a.n(w),j=a(6),P=a.n(j),S=a(9),k=a.n(S),M=a(7),R=a.n(M),D=a(1),E=a.n(D),C=a(4),q=a.n(C),L=a(8),B=a.n(L),T=a(13),I=a.n(T),z=a(0),G="beforeCreate",F="created",N="beforeRender",W="rendered",K="beforeUpdate",$="updated";function deepObjectMerge(...t){let e=t[0];if(t.length>1)for(let a=1;a<t.length;a++)objectMerge(e,t[a]);return e;function objectMerge(t,e){for(var a in e)t[a]&&"object"===jsType(t[a])&&"object"===jsType(e[a])?deepObjectMerge(t[a],e[a]):t[a]&&"array"===jsType(t[a])&&"array"===jsType(e[a])?t[a].splice(0,t[a].length,...e[a]):t[a]=e[a];return t}}function emptyObject(){return Object.create(null)}function jsType(t){const e=typeof t;return"object"===e?null===t?null:Object.prototype.toString.call(t).slice(8,-1).toLowerCase():e}function throttle(t,e=16,a=!1){let s=null,l=a;return function(...a){if(l)return t.apply(this,a),l=!1;s||(s=setTimeout(()=>{clearTimeout(s),s=null,t.apply(this,a)},e))}}function getDistancePx(t,e){return"string"===jsType(t)&&t.match(/%$/)?Number(t.substring(0,t.indexOf("%")))/100*e:t}for(var U=function(t){function Base(t){var e,a;P()(this,Base),(e=R()(this,E()(Base).call(this))).dispatchEvent(G),(a=I()(e)).on=a.addEventListener,a.off=a.removeEventListener,a.once=function(t,e){var a=this;return this.on(t,(function listener(){for(var s=arguments.length,l=new Array(s),p=0;p<s;p++)l[p]=arguments[p];e.apply(a,l),a.off(t,listener)}))},e.__store=emptyObject();var s=e.__store;return s.__attrs=emptyObject(),s.__vnode__=null,s.__isCreated__=!1,s.__refs=emptyObject(),s.dataset=null,e.attr(t),e.__update=throttle((function(t){s.__isCreated__&&e.update(t)})),e}return B()(Base,t),k()(Base,[{key:"source",value:function(t,e){var a=this,s=this.__store;if(t instanceof _)s.dataset=t;else{var l=e;s.dataset&&(l=deepObjectMerge({},s.dataset.option,e)),s.dataset=new _(t,l)}return s.dataset&&s.__isCreated__&&(s.dataset.on("change",(function(t){a.__update({type:"state"})})),this.__update({type:"source"})),this}},{key:"created",value:function(){var t=this,e=this.__store;this.dispatchEvent(F),e.__vnode__=this.render(this.beforeRender({type:"create"}));var a=diff(null,e.__vnode__);this.dispatchEvent(N),patch.bind(this)(this.$el||this.layer,a,1),this.dispatchEvent(W),this.rendered(),e.__isCreated__=!0,this.dataset.on("change",(function(e){t.__update({type:"state"})}))}},{key:"beforeRender",value:function(){return this.renderAttrs}},{key:"render",value:function(){console.warn("this function must be rewrited")}},{key:"beforeUpdate",value:function(){return this.renderAttrs}},{key:"update",value:function(t){var e=this.__store;this.dispatchEvent(K);var a=this.render(this.beforeUpdate(t)),s=diff(e.__vnode__,a);patch.bind(this)(this.$el||this.layer,s),e.__vnode__=a,this.dispatchEvent($),this.updated()}},{key:"updated",value:function(){}},{key:"dispatchEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:emptyObject();q()(E()(Base.prototype),"dispatchEvent",this).call(this,t,e)}},{key:"defaultAttrs",value:function(){return emptyObject()}},{key:"defaultStyles",value:function(){return emptyObject()}},{key:"baseAttrs",value:function(){return{animation:{use:!0,duration:700,useTween:!0,easing:"bounceOut"},clientRect:{left:"10%",top:"10%",right:"10%",bottom:"10%",width:void 0,height:void 0},opacity:1,layer:"default",layoutBy:"rows"}}},{key:"attr",value:function(t,e){var a=this.__store;if("object"===jsType(t))for(var s in t)this.attr(s,t[s]);else{if(void 0===t){var l=emptyObject();for(var p in a.__attrs)0!==p.indexOf("style@")&&(l[p]=a.__attrs[p]);return l}if(void 0===e)return a.__attrs[t];void 0!==t&&(a.__attrs[t]=e,a.__isCreated__&&this.__update({type:"attr"}))}}},{key:"addRef",value:function(t,e){this.__store.__refs[t]=e}},{key:"style",value:function(t,e){var a=this;if("object"===jsType(t))for(var s in t)this.style(s,t[s]);else{if(void 0!==t&&void 0===e){var l=this.attr("style@"+t);return function(){if("function"===jsType(l)){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return l.apply(a,e)}return l}}if(void 0!==t&&void 0!==e)return this.attr("style@"+t,e),this;if(void 0===t&&void 0===e){var p=emptyObject(),f=this.__store.__attrs;for(var d in f)if(0===d.indexOf("style@")){var y=d.substr(6);p[y]=this.style(y)}return p}}}},{key:"store",get:function(){return this.__store}},{key:"layer",get:function(){var t=deepObjectMerge({},this.baseAttrs(),this.defaultAttrs(),this.theme.attrs,this.attr()),e=t.layer,a=t.zIndex,s=void 0===a?0:a;return this.scene.layer(e).attr({zIndex:s})}},{key:"$refs",get:function(){return this.__store.__refs}},{key:"renderStyles",get:function(){return deepObjectMerge({},this.defaultStyles(),this.theme.styles)}},{key:"renderAttrs",get:function(){var t=deepObjectMerge({},this.baseAttrs(),this.defaultAttrs(),this.theme.attrs,this.attr()),e=t.animation,a=t.clientRect;"boolean"===jsType(e)&&(e={use:!!e});var s=this.layer.canvas.getBoundingClientRect(),l=s.width,p=s.height;for(var f in a)-1!==["left","right","width"].indexOf(f)?a[f]=getDistancePx(a[f],l):-1!==["top","bottom","height"].indexOf(f)&&(a[f]=getDistancePx(a[f],p));return void 0===a.width?a.width=l-a.left-a.right:a.right=l-a.left-a.width,void 0===a.height?a.height=p-a.top-a.bottom:a.bottom=p-a.top-a.height,t.colors=this.theme.colors,t}},{key:"dataset",get:function(){return this.__store.dataset||this.chart&&this.chart.dataset}}]),Base}(z.Node),V=["#47A1FF","#59CB74","#FFB952","#FC6980","#6367EC","#DA65CC","#FBD54A","#ADDF84","#6CD3FF","#659AEC","#9F8CF1","#ED8CCE","#A2E5FF","#4DCCCB","#F79452","#84E0BE","#5982F6","#E37474","#3FDDC7","#9861E5"],H=0;H<1004;H++)V.push("#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6));var Z={colors:V};Z.visuals={Line:{colors:Z.colors,styles:{line:{lineWidth:1},guideline:{strokeColor:"#ddd"},point:{pointType:"ellipse",radiusX:4,radiusY:4,strokeColor:"#fff",borderWidth:1}},attrs:{statck:!1}},Pie:{colors:Z.colors,styles:{sector:{lineWidth:1,strokeColor:"#fff"}},attrs:{}},Area:{colors:Z.colors,styles:{area:{opacity:.5},guideline:{strokeColor:"#ddd"},point:{pointType:"ellipse",radiusX:4,radiusY:4,strokeColor:"#fff",borderWidth:1}},attrs:{}},Radar:{colors:Z.colors,styles:{area:{opacity:.5}},attrs:{}},Bar:{colors:Z.colors,styles:{bar:{textureRepeat:!0},groupBar:{opacity:.1},text:!1},attrs:{statck:!1}},PolarBar:{colors:Z.colors,styles:{bar:{}},attrs:{statck:!1}},Funnel:{colors:Z.colors,styles:{funnel:{}},attrs:{statck:!1}},Scatter:{colors:Z.colors,styles:{point:{}},attrs:{showGuideLine:!1}},Wave:{colors:Z.colors,styles:{wave:{fillColor:"#37c",strokeColor:"#37c",lineWidth:0},text:{fillColor:"#333",fontSize:24},shape:{fillColor:"#e6f3ff",lineWidth:3,strokeColor:"#156cbd"}},attrs:{}},Gauge:{colors:Z.colors,attrs:{}},RadialBar:{colors:Z.colors,attrs:{}}},Z.plugins={Tooltip:{colors:Z.colors,styles:{},attrs:{}},Legend:{colors:Z.colors,styles:{point:{pointType:"sprite",iconSize:[12,12]},text:{fontSize:"12px",fillColor:"#666"}},attrs:{}},Axis:{colors:Z.colors,styles:{axis:{strokeColor:"#ccc",lineWidth:1},scale:{bgcolor:"#ccc"},label:{fontSize:12,fillColor:"#666"},grid:{strokeColor:"#ddd",lineDash:[3,3]},name:{fontSize:12,fillColor:"#666"}},attrs:{orient:"bottom"}}},Z.set=function(t){deepObjectMerge(Z,t)};var X=Z,Y=function(t){function BaseVisual(t){var e;return P()(this,BaseVisual),(e=R()(this,E()(BaseVisual).call(this,t))).theme=X.visuals[e.constructor.name],e.theme.set=function(t){e.theme===X.visuals[e.constructor.name]&&(e.theme=v()(e.theme)),e.theme=deepObjectMerge(e.theme,t)},e}return B()(BaseVisual,t),BaseVisual}(U),J=a(11),Q=a.n(J);function getStyle(t,e,a,s){var l=a,p=a,f=s;"array"===jsType(a)?l=deepObjectMerge.apply(this,a):p=[a],"array"!==jsType(s)&&(f=[s]);var d=t.style(e).apply(void 0,[l].concat(Q()(f)));if(!1===d)return!1;if(p.includes(!1)&&void 0===d)return!1;if(void 0!==d){var y=a;"array"!==jsType(a)&&(y=[a]),l=deepObjectMerge({},t.defaultStyles()[e],y.filter(Boolean),l)}return deepObjectMerge({},l,d)}function scaleLinear(){var t=[0,1],e=[0,1];function scale(a){var s=t[1]-t[0],l=e[1]-e[0],p=(a-t[0])/s||0;return e[0]+l*p}return scale.domain=function(e){return t=e,this},scale.range=function(t){return e=t,this},scale}function axis_axis(t){if(!Array.isArray(t.dataSet)&&!t.hasOwnProperty("section"))return[];if(void 0!==t.section)return function(t){if(t&&Array.isArray(t)){var e=t[1]-t[0],a=[],s=4;a.push(t[0]);for(var l=4;l<8;l++)if(e%l==0){s=l;break}for(var p=1;p<=s;p++)a.push((t[0]+e*p/s).toFixed(2));return a}return[]}(t.section);var e=function(t){var e=t.stack||!1,a=t.dataSet||[],s=[];if(e&&0!==a.length&&a[0].length)for(var l=0,p=a[0].length;l<p;l++){for(var f=0,d=0,y=0,g=a.length;y<g;y++){var v=a[y][l].layoutScaleValue;!0!==a[y][l].disabled&&void 0!==v&&(v<0?d+=v:f+=v)}f&&s.push(f),d&&s.push(d)}else for(var b=0;b<a.length;b++)for(var m=0;m<a[b].length;m++){var _=a[b][m].layoutScaleValue;!0!==a[b][m].disabled&&void 0!==_&&s.push(_)}return s}(t),a=[],s=[],l=!0,p=!1,f=void 0;try{for(var d,y=e[Symbol.iterator]();!(l=(d=y.next()).done);l=!0){var g=d.value;g<0?s.push(Math.abs(g)):a.push(g)}}catch(t){p=!0,f=t}finally{try{l||null==y.return||y.return()}finally{if(p)throw f}}var v=5,b=a.sort((function(t,e){return t-e})),m=s.sort((function(t,e){return t-e})),_=b.length&&Math.ceil(b.pop()/.95),O=m.length&&Math.ceil(m.pop()/.95),A=_-O>=0?_:O,w=4,x=7;O&&_&&(w=3,x=5),t.splitNumber&&(x=(w=t.splitNumber)+1);var j=!1,P=A.toString().length,S=P<3?Math.ceil(A/Math.pow(10,P-1)):Math.ceil(A/Math.pow(10,P-2));do{for(var k=w;k<x;k++)if(S%k==0){v=k,A=P<3?S*Math.pow(10,P-1):S*Math.pow(10,P-2),j=!0;break}S++}while(!j);var M=new Array(v+1);M[0]=0;for(var R=1;R<v+1;R++)M[R]=_>=O?Math.round(A/v*R):-1*Math.round(A/v*R);if(O<=1&&O>0||_<=1&&_>0||0===_&&0===O){(M=new Array(6))[0]=0,A=1;for(var D=1;D<6;D++)M[D]=_>=O?2*A*D/10:-2*A*D/10}if(_<O&&M.reverse(),0===O.length||0===_.length)return M;if(_>=O)for(var E=10*M[1],C=1,q=Math.ceil((M.length-1)*O/_);C<q+1;C++)M.unshift(-1*E*C/10);else for(var L=10*M[M.length-2],B=1,T=Math.ceil((M.length-1)*_/O);B<T+1;B++)M.push(-1*L*B/10);return M}function layout(t,e){var a=this.type,s=[],l=e.stack,p=e.splitNumber,f=e.clientRect,d=e.axisGap,y=f.width,g=f.height,v=axis_axis.call(this,{dataSet:t,stack:l,splitNumber:p}),b=Math.max.apply(this,v),m=Math.min.apply(this,v),_=scaleLinear().domain([m,b]).range([0,g]),O=null;if(t.forEach((function(t){var e={points:[],areaPoints:[],smoothRange:[],state:t.state};t.forEach((function(a,s){var p=a.layoutScaleValue;if(void 0!==a.value){var f=y/(t.length-1),v=0;d&&(v=(f=y/t.length)/2);var b=[f*s+v,g-_(p)];l&&O&&(b=[f*s+v,g-_(p+O[s].layoutScaleValue)]),e.points.push(b)}})),e.axisPoints=[[e.points[0][0],g-_(0)],[e.points[e.points.length-1][0],g-_(0)]],"disabled"!==e.state&&(O=t),s.push(e)})),"area"===a){var A=null;s.forEach((function(t,a){var l=[].concat(t.points).reverse().map((function(t){return[t[0],g]}));A&&e.stack&&(l=[].concat(s[a-1].points).reverse());var p=function(t,e){var a={areaPoints:[],smoothRange:[]};return a.areaPoints=[].concat([t[0]]).concat(t).concat([t[t.length-1]]).concat([e[0]]).concat(e).concat([e[e.length-1]]),a.smoothRange=[1,t.length,t.length+3,t.length+e.length+2],a}(t.points,l);t.areaPoints=p.areaPoints,t.smoothRange=p.smoothRange,"disabled"!==t.state&&(A=t)}))}return s}var tt=a(17),et=a.n(tt),rt=a(5),nt=a.n(rt);function ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var at={sprite:z.Sprite,path:z.Path,ellipse:z.Ellipse,rect:z.Rect,triangle:z.Triangle,parallel:z.Parallel,regular:z.Regular,star:z.Star},ot=function(t){function Point(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return P()(this,Point),(t=R()(this,E()(Point).call(this))).pointType=null,t.$sprite=null,t.attr(_objectSpread({pointType:"ellipse"},e)),t}return B()(Point,t),k()(Point,[{key:"attr",value:function(t,e){var a=t;"object"!==jsType(t)&&((a={})[t]=e),this.renderSymbol(a)}},{key:"renderSymbol",value:function(t){var e=t.pointType,a=t.pos,s=et()(t,["pointType","pos"]);if(e&&e!==this.pointType){if(!Object.keys(at).includes(e))throw new Error("pointType should be one of 'sprite','path','ellipse','rect','triangle','parallel','regular','star' but it is ".concat(e));this.$sprite&&this.$sprite.remove(),this.$sprite=new at[e](s),this.append(this.$sprite)}else this.$sprite.attr(s);a&&a.length&&q()(E()(Point.prototype),"attr",this).call(this,"pos",a),this.pointType=e}}]),Point}(z.Group),it=function(t){function Line(t){var e;return P()(this,Line),(e=R()(this,E()(Line).call(this,t))).renderLines=[],e.type="line",e.hoverIndex=-1,e}return B()(Line,t),k()(Line,[{key:"beforeRender",value:function(){var t=this.getRenderData(),e=t.arrLayout,a=t.maxLen;return e.map((function(t){return{smoothRange:t.smoothRange,areaFrom:{points:t.areaPoints},areaTo:{points:t.areaPoints},from:{points:t.points,lineDash:[1,a]},to:{points:t.points,lineDash:[a,a]}}}))}},{key:"beforeUpdate",value:function(){var t=this.getRenderData(),e=t.arrLayout,a=t.maxLen,s=this.renderLines;return e.map((function(t,e){var l={points:t.points};return s[e]&&(l={points:s[e].to.points}),s[e]&&"disabled"!==s[e].state||(l.lineDash=[4,a]),{state:t.state,smoothRange:t.smoothRange,areaFrom:s[e]&&s[e].areaTo||t.areaPoints,areaTo:{points:t.areaPoints},from:l,to:{points:t.points,lineDash:[a,a]}}}))}},{key:"getRenderData",value:function(){var t=this.renderAttrs,e=this.dataset[t.layoutBy],a=layout.call(this,e,t),s=t.clientRect,l=s.height,p=s.width;return{width:p,height:l,arrLayout:a,maxLen:5*Math.sqrt(Math.pow(l,2),Math.pow(p,2))}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){return{guidePoints:[],layer:"line"}}},{key:"defaultStyles",value:function(){return{}}},{key:"guidelineleave",value:function(t,e){this.attr("guidePoints",[]),this.dataset.resetState()}},{key:"guidelinemove",value:function(t,e){if(this.renderLines.length){for(var a=this.renderLines[0].to.points.map((function(t){return t[0]})),s=e.getOffsetPosition(t.x,t.y),l=x()(s,1)[0],p=0,f=0;f<a.length;f++)if(l>a[f]&&l<a[f+1]){p=Math.abs(l-a[f])<Math.abs(l-a[f+1])?f:f+1;break}if(this.hoverIndex!==p){this.dataset.resetState(),this.dataset.cols[p].state="hover";var d=this.renderAttrs.clientRect,y=a[p];this.hoverIndex=p,this.attr({guidePoints:[[y,0],[y,d.height]],lineState:"default"})}}}},{key:"render",value:function(t){var e,a=this,s=this.renderAttrs,l=s.clientRect,p=s.smooth,f=s.guidePoints,d=this.renderStyles,y=this.theme.colors;return this.renderLines=t,qcharts.h(z.Group,{zIndex:1,class:"container",pos:[l.left,l.top],onMouseleave:this.guidelineleave,onMouseenter:this.guidelinemove,onMousemove:this.guidelinemove,size:[l.width,l.height]},qcharts.h(z.Group,{class:"lines-group"},t.map((function(t,e){var s=getStyle(a,"line",[{strokeColor:y[e],smooth:p},d.line],[a.dataset.rows[e],e]);return"disabled"===t.state||!1===s?qcharts.h(z.Node,null):qcharts.h(z.Polyline,A()({onClick:a.lineClick},s,{animation:{from:t.from,to:t.to}}))}))),qcharts.h(z.Group,{class:"areas-group"},"area"!==this.type?null:t.map((function(t,e){var s=getStyle(a,"area",[{fillColor:y[e],smooth:p},d.area],[a.dataset.rows[e],e]);return"disabled"===t.state||!1===s?qcharts.h(z.Node,null):qcharts.h(z.Polyline,A()({smoothRange:t.smoothRange},s,{animation:{from:t.areaFrom,to:t.areaTo}}))}))),qcharts.h(z.Group,{class:"line-points"},t.map((function(t,e){return"disabled"===t.state?qcharts.h(z.Node,null):qcharts.h(z.Group,null,t.to.points.map((function(s,l){var p={from:{pos:t.from.points[l]},to:{pos:s}},f=getStyle(a,"point",[{fillColor:y[e]},d.point],[a.dataset.rows[e],e,l]),g=getStyle(a,"point:hover",[f,d["point:hover"]],[a.dataset.rows[e],e,l]);return"hover"===a.dataset.rows[e][l].state&&deepObjectMerge(f,g),qcharts.h(ot,A()({},f,{animation:p}))})))}))),qcharts.h(z.Group,{class:"guide-line-group"},f.length?!1===(e=getStyle(a,"guideline",d.guideline))?qcharts.h(z.Node,null):qcharts.h(z.Polyline,A()({points:f},e)):qcharts.h(z.Node,null)))}},{key:"renderAttrs",get:function(){return q()(E()(Line.prototype),"renderAttrs",this)}}]),Line}(Y);function layout_layout(t,e){var a=[],s=t.map((function(t){return t.reduce((function(e,a){return"disabled"!==t.state?e+a.value:e}),0)})),l=s.reduce((function(t,e){return t+e}),0)||1,p=e.startAngle,f=e.endAngle,d=e.activeOffset,y=Math.min(p,f),g=Math.max(p,f);g>y+360&&(g=y+360);var v=g-y;return s.forEach((function(e,s){var p=e/l*v,f=[0,0],g={startAngle:y,endAngle:y+p,offsetPos:f};if(0!==s){var b=a[s-1];g={startAngle:b.endAngle,endAngle:b.endAngle+p,offsetPos:f}}var m=(g.startAngle+g.endAngle)/2%360;g.bisectorAngle=m,g.bisectorRadian=transRadius(m),"hover"===t[s].state&&(g.offsetPos=[d*Math.cos(g.bisectorRadian),d*Math.sin(g.bisectorRadian)]),a.push(g)})),a}function transRadius(t){return t/180*Math.PI}function computeLinePos(t,e,a,s,l){var p=[],f=transRadius((t+e)/2%360),d=[s*Math.cos(f),s*Math.sin(f)],y=[(s+l)*Math.cos(f),(s+l)*Math.sin(f)],g=[(s+l)*Math.cos(f),(s+l+5)*Math.sin(f)];return g=[a[0]+g[0],a[1]+g[1]],p.push([a[0]+d[0],a[1]+d[1]]),p.push([a[0]+y[0],a[1]+y[1]]),{points:p,labelAnchor:[Math.sin(f/2),1-Math.cos(f/4)],labelPos:g}}function Pie_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Pie_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Pie_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Pie_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var st=function(t){function Pie(t){var e;return P()(this,Pie),(e=R()(this,E()(Pie).call(this,t))).renderRings=[],e.hoverIndex=-1,e.activeIndex=-1,e}return B()(Pie,t),k()(Pie,[{key:"beforeRender",value:function(){var t=this.getRenderData().rings,e=this.renderAttrs.center,a=t.map((function(a,s){if(0===s)return{from:{startAngle:0,endAngle:0,pos:e},to:Pie_objectSpread({},a,{pos:e})};var l=t[s-1].endAngle;return{from:{startAngle:l,endAngle:l,pos:e},to:Pie_objectSpread({},a,{pos:e})}}));return this.computeLine(a),a}},{key:"beforeUpdate",value:function(){var t=this,e=this.getRenderData().rings,a=this.renderAttrs.center,s=this.renderRings,l=e.map((function(e,l){var p=[a[0]+e.offsetPos[0],a[1]+e.offsetPos[1]],f=v()(e,["startAngle","endAngle"]);return t.hoverIndex,{from:Pie_objectSpread({},s[l].to),to:Pie_objectSpread({},f,{pos:p})}}));return this.computeLine(l),l}},{key:"computeLine",value:function(t){var e=this.renderAttrs.radiusPx;t.forEach((function(t){var a=computeLinePos(t.from.startAngle,t.from.endAngle,t.from.pos,e+1,15),s=a.points,l=a.labelAnchor,p=a.labelPos,f=computeLinePos(t.to.startAngle,t.to.endAngle,t.to.pos,e+1,15),d=f.points,y=f.labelAnchor,g=f.labelPos;t.line={from:{points:s},to:{points:d}},t.label={from:{pos:p,anchor:l},to:{pos:g,anchor:y}}}))}},{key:"getRenderData",value:function(){var t=this.renderAttrs,e=this.renderData();return{rings:layout_layout.call(this,e,t)}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){return{layer:"pie",radius:1,innerRadius:0,startAngle:0,endAngle:360,lineWidth:1,activeOffset:10}}},{key:"defaultStyles",value:function(){return{}}},{key:"mousemove",value:function(t,e){var a=this.renderData(),s=e.attr("_index");if(s!==this.hoverIndex){var l=a[s];a.forEach((function(t){"hover"===t.state&&(t.state="default")})),l.state="hover",this.hoverIndex=s}}},{key:"mouseleave",value:function(){this.renderData().forEach((function(t){"hover"===t.state&&(t.state="default")})),this.hoverIndex=-1}},{key:"renderData",value:function(){var t=this.renderAttrs;return this.dataset[t.layoutBy]}},{key:"render",value:function(t){var e=this,a=this.renderAttrs,s=a.clientRect,l=a.innerRadiusPx,p=a.radiusPx,f=this.renderStyles,d=this.theme.colors;return this.renderRings=t,qcharts.h(z.Group,{zIndex:1,class:"container",pos:[s.left,s.top],size:[s.width,s.height]},qcharts.h(z.Group,{class:"rings-group",onMouseleave:this.mouseleave},t.map((function(t,a){var s=getStyle(e,"sector",[{strokeColor:d[a],fillColor:d[a],innerRadius:l,outerRadius:p,_index:a},f.sector],[e.dataset.rows[a],a]);return"disabled"===t.state||!1===s?qcharts.h(z.Node,null):qcharts.h(z.Ring,A()({onMousemove:e.mousemove},s,{animation:{from:t.from,to:t.to}}))}))),qcharts.h(z.Group,{class:"line-group"},t.map((function(t,a){var s=getStyle(e,"guideline",[{strokeColor:d[a]},f.guideline],[e.dataset.rows[a],a]),l=!1;return t.to.startAngle!==t.to.endAngle&&"disable"!==t.state&&!1!==s||(l=!0),l||!1===s?qcharts.h(z.Node,null):qcharts.h(z.Polyline,A()({},s,{animation:{from:t.line.from,to:t.line.to}}))}))),qcharts.h(z.Group,{class:"label-group"},t.map((function(t,a){var s=e.dataset.rows[a].name,l=getStyle(e,"guideText",[{fillColor:"#666",fontSize:12},f.guideline],[e.dataset.rows[a],a]),p=!1;return t.to.startAngle!==t.to.endAngle&&"disable"!==t.state&&!1!==l||(p=!0),p||!1===l?qcharts.h(z.Node,null):qcharts.h(z.Label,A()({text:s},l,{pos:t.label.from.pos,animation:{from:t.label.from,to:t.label.to}}))}))))}},{key:"renderAttrs",get:function(){var t=q()(E()(Pie.prototype),"renderAttrs",this),e=t.radius,a=t.innerRadius,s=t.clientRect,l=s.width,p=s.height;return t.center=[l/2,p/2],t.radiusPx=Math.min(l,p)*e/2,t.innerRadiusPx=Math.min(l,p)*a/2,t}}]),Pie}(Y),lt=function(t){function Area(t){var e;return P()(this,Area),(e=R()(this,E()(Area).call(this,t))).type="area",e}return B()(Area,t),k()(Area,[{key:"defaultAttrs",value:function(){return deepObjectMerge({},q()(E()(Area.prototype),"defaultAttrs",this).call(this),{stack:!0,animation:{duration:700,easing:"bounceOut"},layer:"area"})}}]),Area}(it),getPointCoordinate=function(t,e){return[Math.cos(t)*e,Math.sin(t)*e]};function Radar_layout_layout(t,e,a,s,l,p){var f=[],d=[],y=[],g=[];if(t.some((function(t){return 0===t.length})))return{sectionAttrs:g,axisAttrs:y,gridAttrs:d};for(var v=function(t,e){var a=Math.max.apply(Math,Q()(t));return a<10*e?Math.ceil(a/e)*e:10*Math.ceil(a/10/e)*e}(t.reduce((function(t,e){return t.concat(e.map((function(t){return t.value})))}),[]),a),b=t[0].length,m=2*Math.PI/b,_=Math.PI/180*s,O=0;O<b;O++){var A=O*m+_,w=getPointCoordinate(A,e);f.push({point:w,radian:A});var x=getPointCoordinate(A,e+l),j=t[0][O].text;y.push({points:[[0,0],w],lineWidth:1,lineDash:[3,2],strokeColor:"#DDE0E5",label:j,labelPos:x,radian:A,maxScale:v,splitNumber:a})}t.forEach((function(t,a){var s=t.map((function(t,a){var s=t.value,l=f[a].radian;return getPointCoordinate(l,s/v*e)}));g.push({index:a,name:t.name,dataOrigin:t.data,lineWidth:1,points:s,state:t.state,close:!0,strokeColor:p[a],fillColor:p[a]})}));for(var P=f.map((function(t){return t.point})),S=0;S<a;S++){var k=1-S/a;d.push({scale:k,radius:e,points:P,index:S,close:!0,lineWidth:1,strokeColor:"#DDE0E5",anchor:[.5,.5]})}return{sectionAttrs:g,axisAttrs:y,gridAttrs:d}}function Radar_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Radar_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Radar_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Radar_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ut=function(t){function Radar(t){var e;return P()(this,Radar),e=R()(this,E()(Radar).call(this,t)),nt()(I()(e),"onMouseenter",throttle((function(t,a){e.dataset.resetState();var s=a.attributes.name;e.dataset.rows.filter((function(t){return"disabled"!==t.state})).forEach((function(t){t.state=t.name===s?"hover":"default"}))}),16,!0)),e.type="radar",e.sectionData=[],e.scaleEl=[],e.oldPos=null,e}return B()(Radar,t),k()(Radar,[{key:"defaultAttrs",value:function(){return{layer:"radar",gridType:"polygon",splitNumber:4,startAngle:270,radius:.6,labelOffset:7}}},{key:"getPolylineAnimation",value:function(t,e,a){var s=new Array(t.length).fill([0,0]),l={from:{points:(this.sectionData[a]||{animation:{to:{points:s}}}).animation.to.points},to:{points:t}};return"disabled"===e&&(l.to.points=s),l}},{key:"getRenderData",value:function(){var t=this.dataset,e=this.renderAttrs,a=e.len,s=e.splitNumber,l=e.startAngle,p=e.labelOffset,f=this.theme.colors,d=Radar_layout_layout(Q()(t.rows),a,s,l,p,f);return{sectionAttrs:d.sectionAttrs,axisAttrs:d.axisAttrs,gridAttrs:d.gridAttrs}}},{key:"processData",value:function(){var t=this,e=this.getRenderData(),a=e.sectionAttrs;return Radar_objectSpread({},et()(e,["sectionAttrs"]),{sectionAttrs:a.map((function(e,a){var s=e.points,l=e.state,p=et()(e,["points","state"]),f=t.getStyle("section",e,Q()(e.dataOrigin),a),d=f.style,y=f.hoverStyle,g="hover"===l?y:{};return deepObjectMerge(p,{state:l},{animation:t.getPolylineAnimation(s,l,a)},d,g)}))})}},{key:"beforeRender",value:function(){q()(E()(Radar.prototype),"beforeRender",this).call(this);var t=this.processData();return this.sectionData=Q()(t.sectionAttrs),t}},{key:"beforeUpdate",value:function(){q()(E()(Radar.prototype),"beforeUpdate",this).call(this);var t=this.processData();if(t.sectionAttrs)for(var e=Math.max(this.sectionData.length,t.sectionAttrs.length),a=0;a<e;a++)this.sectionData[a]=t.sectionAttrs[a];return this.sectionData=Q()(t.sectionAttrs),t}},{key:"rendered",value:function(){}},{key:"getScaleAnimation",value:function(t){return{from:{scale:0},to:{scale:t}}}},{key:"getStyle",value:function(t,e,a,s){return{style:this.style(t)(e,a,s)||{},hoverStyle:this.style("".concat(t,":hover"))(e,a,s)||{}}}},{key:"isSamePoints",value:function(t,e){return t.toString()===e.toString()}},{key:"renderGrid",value:function(t){var e=this,a="circle"===this.renderAttrs.gridType?z.Arc:z.Polyline;return t.map((function(t,s){var l=e.scaleEl.length>0?{}:e.getScaleAnimation(t.scale),p=e.getStyle("grid",t,null,s).style;if(!1!==p)return qcharts.h(a,A()({},t,p,{animation:l}))}))}},{key:"renderAxisLabel",value:function(t,e){var a=t.label,s=t.labelPos,l=t.radian,p={text:a,pos:s,color:"#67728C",radian:l,anchor:function(t){return[.5-Math.cos(t),.5-Math.sin(t)]}(l),fontSize:12},f=this.scaleEl.length>0?{}:this.getScaleAnimation(1),d=this.getStyle("label",p,{text:p.label,radian:l},e).style;if(!1!==d)return qcharts.h(z.Label,A()({},p,d,{animation:f}))}},{key:"renderAxisScale",value:function(t,e){for(var a=function(t){var e=t.points,a=t.splitNumber,s=t.maxScale,l=x()(e[1],2);return[[l[0]/a,l[1]/a],s/a]}(t),s=x()(a,2),l=x()(s[0],2),p=l[0],f=l[1],d=s[1],y=[],g={fontSize:12,anchor:[1,.5],translate:[-5,0],display:0===e?"block":"none"},v=0;v<t.splitNumber+1;v++){var b=[p*v,f*v],m=d*v,_=Radar_objectSpread({text:m,color:"#67728C",pos:b},g),O=this.getStyle("scale",_,{text:m,index:e},v).style;if(!1===O)return;if("none"!==_.display){var w={},j=e*t.splitNumber+v,P=this.scaleEl[j];P?P.text!==m&&(w={from:{text:P.text},to:{text:m},formatter:function(t){return t.text=t.text.toFixed(0),t}}):w={from:{pos:[0,0]},to:{pos:b}},this.scaleEl[v]={text:Number(m.toFixed(0))},y.push(qcharts.h(z.Label,A()({},_,O,{animation:w})))}}return y}},{key:"renderAxis",value:function(t){var e=this,a=this.scaleEl.length>0?{}:this.getScaleAnimation(1);return t.map((function(t,s){var l=e.getStyle("axis",t,{text:t.label},s).style;if(!1!==l)return qcharts.h(z.Group,null,qcharts.h(z.Polyline,A()({},t,l,{animation:a})),e.renderAxisLabel(t,s),e.renderAxisScale(t,s))}))}},{key:"renderPoints",value:function(t){var e=this;return t.map((function(t){var a=t.animation,s=t.dataOrigin,l=t.strokeColor,p=t.state,f=a&&a.from&&a.from.points;return(a&&a.to&&a.to.points).map((function(t,a){var d={pos:t,fillColor:l,radius:2,dataOrigin:s[a]},y=e.getStyle("point",d,Radar_objectSpread({},d.dataOrigin),a),g=y.style,v=y.hoverStyle;if(!1!==g){var b={from:{pos:[0,0],opacity:1},to:{pos:t,opacity:1}};f&&f[a]&&(e.isSamePoints(f[a],t)?b.from.pos=t:b.from.pos=f[a]),"disabled"===p&&(b.to.opacity=0);var m="hover"===p?v:{};return qcharts.h(ot,A()({},d,g,m,{animation:b,zIndex:99}))}}))})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"renderSection",value:function(t){var e=this;return t.map((function(t,a){var s=t.animation,l=et()(t,["animation"]);return qcharts.h(z.Polyline,A()({zIndex:9+a},l,{animation:s,onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave}))}))}},{key:"onMouseleave",value:function(){this.dataset.resetState(),this.dataset.rows.filter((function(t){return"disabled"!==t.state})).forEach((function(t){return"default"===t.state}))}},{key:"render",value:function(t){var e=t.sectionAttrs,a=t.axisAttrs,s=t.gridAttrs,l=this.renderAttrs,p=l.center,f=l.clientRect,d={from:{pos:this.oldPos?this.oldPos:p},to:{pos:p}};return this.oldPos=p,qcharts.h(z.Group,{pos:[f.left,f.top],size:[f.width,f.height]},qcharts.h(z.Group,{pos:p,animation:d},this.renderGrid(s),this.renderAxis(a),this.renderSection(e),this.renderPoints(e)))}},{key:"renderAttrs",get:function(){var t=q()(E()(Radar.prototype),"renderAttrs",this),e=t.clientRect,a=e.height,s=[e.width/2,a/2];return Radar_objectSpread({},t,{center:s,len:Math.min.apply(Math,s)*t.radius})}}]),Radar}(Y);function layout_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function layout_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?layout_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):layout_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Bar_layout_layout(t,e){var a=t,s=e.stack,l=e.splitNumber,p=e.clientRect,f=[p.width,p.height],d=e.transpose||!1,y=e.groupGap||0,g=e.stackGap||0,v=e.barWidth||0,b=[],m=[],_=[],O={opacity:0,bgcolor:"#000"},A=axis_axis.call(this,{dataSet:a,stack:s,splitNumber:l});if(!A||!A.length)return{barData:b,groupData:m,textData:_};var w=d?{label:f[1],value:f[0]}:{label:f[0],value:f[1]},x=Math.max.apply(this,A),j=Math.min.apply(this,A),P=x/(x-j),S=function(t){for(var e=0,a=0,s=t.length;a<s;a++)"disabled"!==t[a][0].state&&e++;return e||1}(a),k=a[0].length,M=0;0===v?(v=s?.5*w.label/k:.5*w.label/(k*S),M=s?v:v*S):M=s?(w.label-v*k)/k:(w.label-v*S*k-y*(S-1)*k)/k;var R=w.value/(x-j);if(s)for(var D=0,E=k;D<E;D++){for(var C=0,q=0,L=0,B={rects:[]},T=0,I=a.length;T<I;T++){var z=g;L=a[T][D].layoutScaleValue;var G=R*Math.abs(L);0===G&&(z=0);var F=L<0?w.value*(1-P)-q:w.value*(1-P)+C,N=L<0?w.value*P+q+G:w.value*P-C,W={anchor:[d&&L<0?1:0,d||L<0?0:1],size:d?[G-z,v]:[v,G-z],pos:d?[F,M/2+(v+M)*D]:[M/2+(v+M)*D,L<0?w.value*P+q:w.value*P-C],index:T},K=d?"paddingLeft":"paddingBottom",$={opacity:"disabled"!==a[T][D].state?1:0,text:L.toString(),anchor:d?L<0?[1,.5]:[0,.5]:[.5,1],pos:d?[F,+(M+v)/2+(v+M)*D]:[(M+v)/2+(v+M)*D,N]};$[K]=8,"disabled"===a[T][D].state?W.size=d?[0,W.size[1]]:[W.size[0],0]:(L<0?q+=G:C+=G,B.rects.push(W)),_.push($),b.push(W)}B=Object.assign(B,layout_objectSpread({pos:d?[0,(M+v)*D]:[(M+v)*D,0],size:d?[w.value,v+M]:[v+M,w.value]},O)),m.push(B)}else for(var U=0,V=k;U<V;U++){for(var H=0,Z=0,X=0,Y={rects:[]},J=0,Q=a.length;J<Q;J++){X=a[J][U].value,Z=a[J][U].layoutScaleValue;var tt=R*Math.abs(Z),et={anchor:[d&&Z<0?1:0,d||Z<0?0:1],size:d?[tt,v-1]:[v-1,tt],pos:d?[w.value*(1-P),M/2+(v+y)*(J-H)+(v*S+y*(S-1)+M)*U]:[M/2+(v+y)*(J-H)+(v*S+y*(S-1)+M)*U,w.value*P]};"disabled"===a[J][U].state?(et.size=d?[0,et.size[1]]:[et.size[0],0],H++):Y.rects.push(et);var rt={opacity:"disabled"!==a[J][U].state?1:0,text:X.toString(),anchor:[d&&Z<0?1:0,.5],pos:d?[w.value*(1-P),M/2+(v+y)*(J-H)+(v*S+y*(S-1)+M)*U+.5*v]:[M/2+(v+y)*(J-H)+(v*S+y*(S-1)+M)*U+.5*v,w.value*P],rotate:d?0:Z<0?90:270,paddingLeft:8};b.push(et),_.push(rt)}Y=Object.assign(Y,layout_objectSpread({pos:d?[0,(M+v*S+y*(S-1))*U]:[(M+v*S+y*(S-1))*U,0],size:d?[w.value,v*S+y*(S-1)+M]:[v*S+y*(S-1)+M,w.value]},O)),m.push(Y)}return{textData:_,barData:b,groupData:m}}function Bar_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Bar_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Bar_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Bar_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ct=function(t){function Bar(t){var e;return P()(this,Bar),e=R()(this,E()(Bar).call(this,t)),nt()(I()(e),"onMousemove",throttle((function(t,a){if(e.groups.length&&!isNaN(t.x)&&!isNaN(t.y)){var s=0,l=a.getOffsetPosition(t.x,t.y),p=x()(l,2),f=p[0],d=p[1];if(e.renderAttrs.transpose){var y=e.groups[0].size[1];s=Math.floor(d/y)}else{var g=e.groups[0].size[0];s=Math.floor(f/g)}if(s<1?s=0:s>e.groups.length-1&&(s=e.groups.length-1),e.hoverIndex!==s){var v=e.renderAttrs.bgpillarState;v[s]="hover",v[e.hoverIndex]="defualt",e.attr("bgpillarState",v),e.dataset.resetState(),e.dataset.cols[s].state="hover",e.hoverIndex=s}}}),16,!0)),nt()(I()(e),"myClick",(function(){console.log("myclick")})),e.type="bar",e.pillars=null,e.texts=null,e.groups=null,e.fromTos=null,e.hoverIndex=-1,e}return B()(Bar,t),k()(Bar,[{key:"beforeRender",value:function(){var t=this,e=this.getRenderData().arrLayout,a=e.barData.map((function(e){return{attrs:e,from:{size:t.renderAttrs.transpose?[0,e.size[1]]:[e.size[0],0]},to:{size:e.size}}})),s=e.textData.map((function(t){return{attrs:t,from:{pos:t.pos},to:{pos:t.pos}}}));return this.pillars=a,this.groups=e.groupData,this.texts=s,{barData:a,textData:s,groupData:e.groupData}}},{key:"beforeUpdate",value:function(){var t=this,e=this.pillars,a=this.texts,s=this.getRenderData().arrLayout,l=s.barData.map((function(a,l){var p=e[l]?e[l]:s.barData[l-1];return p||(p={size:[0,0],pos:a.pos,labelAttrs:null}),{attrs:a,from:{size:p.attrs.disable?t.attr("transpose")?[0,p.attrs.size[1]]:[p.attrs.size[0],0]:p.attrs.size,pos:p.attrs.pos},to:{size:a.size,pos:a.pos}}})),p=s.textData.map((function(t,e){var l=a[e]?a[e]:s.textData[e-1];return l||(l={pos:nextPillar.pos}),{attrs:t,from:{pos:l.attrs.pos},to:{pos:t.pos}}}));return this.pillars=l,this.groups=s.groupData,this.texts=p,{barData:l,textData:p,groupData:s.groupData}}},{key:"getRenderData",value:function(){var t=this.renderAttrs,e=this.dataset[t.layoutBy],a=(e.length>1?e.length:e[0].length,Bar_layout_layout.call(this,e,t));this.theme.colors,this.renderStyles;return a.barData=a.barData.map((function(t,e){return t})),{arrLayout:a}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){var t=this.dataset.rows;return{layer:"bar",bgpillarState:Array.from({length:t[0].length},(function(){return"defalut"})),states:{bgpillar:{animation:{duration:20},default:{opacity:.01},hover:{opacity:.1}}}}}},{key:"defaultStyles",value:function(){return{text:{fontSize:12,fillColor:"#666"}}}},{key:"onMouseleave",value:function(t,e){this.dataset.resetState();var a=this.renderAttrs.bgpillarState;a[this.hoverIndex]="defualt",this.attr("bgpillarState",a),this.hoverIndex=-1}},{key:"render",value:function(t){var e=this,a=this.renderAttrs,s=a.clientRect,l=a.bgpillarState,p=a.states,f=this.renderStyles,d=this.dataset[this.renderAttrs.layoutBy],y=d.length>1?d.length:d[0].length,g=this.theme.colors;return qcharts.h(z.Group,{pos:[s.left,s.top],size:[s.width,s.height],onMouseleave:this.onMouseleave,onMouseenter:this.onMousemove,onMousemove:this.onMousemove,onClick:this.myClick},qcharts.h(z.Group,{ref:"pillars",class:"pillars-group"},t.barData.map((function(t,a){var s=e.dataset.rows[a%d.length][Math.floor(a/d.length)],l=getStyle(e,"pillar",[Bar_objectSpread({bgcolor:g[a%y]},t.attrs),f.bar],[s.data,Math.floor(a/d.length),a%d.length]),p=getStyle(e,"pillar:hover",[],[s.data,Math.floor(a/d.length),a%d.length]);return"hover"===s.state&&deepObjectMerge(l,p),qcharts.h(z.Sprite,A()({},t.attrs,t.from,l,{animation:{from:t.from,to:t.to}}))})),t.textData.map((function(a,s){var l=v()(t.barData[s].attrs,["pos","size"]),p=getStyle(e,"text",[{barAttrs:l},f.text],[e.dataset.rows[s%d.length][Math.floor(s/d.length)].data,Math.floor(s/d.length),s%d.length]);return(p=v()(p,[],["barAttrs"])).pos&&(e.texts[s].attrs.pos=p.pos,a.to.pos=p.pos),!1===p?null:qcharts.h(z.Label,A()({},a.attrs,p,{animation:{from:a.from,to:a.to}}))}))),qcharts.h(z.Group,{ref:"bgpillar",class:"bgpillars-group"},t.groupData.map((function(t,a){var s=getStyle(e,"backgroundpillar",[],[e.dataset.rows[a%d.length],Math.floor(a/d.length)]);return!1===s?null:qcharts.h(z.Sprite,A()({state:l[a],states:p.bgpillar},t,s))}))))}},{key:"renderAttrs",get:function(){return q()(E()(Bar.prototype),"renderAttrs",this)}}]),Bar}(Y);function PolarBar_layout_layout(t,e){var a=t,s=e.stack,l=e.splitNumber,p=e.clientRect,f=e.groupPadAngle,d=e.activeOffset,y=[p.width,p.height],g=f||0,v=e.stackGap||0,b=e.radius||1,m=e.innerRadius||0,_=(e.padAngle,[]),O=axis_axis.call(this,{dataSet:a,stack:s,splitNumber:l});if(!O||!O.length)return{barData:_};var A=Math.min(y[0],y[1]),w=Math.max.apply(this,O),x=Math.min.apply(this,O),j=w/(w-x),P=function(t){for(var e=0,a=0,s=t.length;a<s;a++)"disabled"!==t[a][0].state&&e++;return e||1}(a),S=a[0].length,k=.5*b*A,M=k/(w-x);if(s)for(var R=0,D=S;R<D;R++)for(var E=0,C=0,q=0,L={rects:[]},B=(2*Math.PI-S*g)/S,T=0,I=a.length;T<I;T++){var z=(B+g)*R-.5*Math.PI,G=M*(q=a[T][R].value),F=q<0?k*(1-j)-C:k*(1-j)+E,N={innerRadius:F+=m*A*.5,outerRadius:F+G-v,startAngle:180*z/Math.PI,endAngle:180*(z+B)/Math.PI,value:a[T][R].value,text:a[T][R].text,state:a[T][R].state,data:a[T][R].data,offsetPos:[0,0]};"hover"===N.state?N.strokeColor="#F00":delete N.strokeColor,"disabled"===N.state?N.opacity=0:(N.opacity=1,q<0?C-=G:E+=G,L.rects.push(N)),_.push(N)}else for(var W=0,K=S;W<K;W++)for(var $=0,U={rects:[]},V=(2*Math.PI-S*g)/S,H=0,Z=a.length;H<Z;H++){var X=V/P,Y=(V+g)*W+X*(H-$)-.5*Math.PI,J=k*(1-j)+m*A*.5,Q={innerRadius:J,outerRadius:J+M*a[H][W].layoutScaleValue,startAngle:180*Y/Math.PI,endAngle:180*(Y+X)/Math.PI,value:a[H][W].value,text:a[H][W].text,state:a[H][W].state,data:a[H][W].data,id:W*Z+H,offsetPos:[0,0]};if("hover"===Q.state){var tt=(Q.startAngle+Q.endAngle)/2%360;Q.bisectorRadian=tt/180*Math.PI,Q.offsetPos=[d*Math.cos(Q.bisectorRadian),d*Math.sin(Q.bisectorRadian)]}"disabled"===Q.state?(Q.endAngle=Q.startAngle,Q.radius=0,Q.opacity=0,$++):(Q.opacity=1,U.rects.push(Q)),S<2&&(delete Q.startAngle,delete Q.endAngle),_.push(Q)}return{barData:_}}function PolarBar_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function PolarBar_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?PolarBar_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):PolarBar_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ht=function(t){function PolarBar(t){var e;return P()(this,PolarBar),(e=R()(this,E()(PolarBar).call(this,t))).type="polarbar",e.pillars=[],e.hoverIndex=-1,e.timer=null,e}return B()(PolarBar,t),k()(PolarBar,[{key:"beforeRender",value:function(){var t=this.getRenderData().arrLayout;return this.pillars=t.barData,{barData:t.barData.map((function(t){return{from:{endAngle:t.startAngle},to:t}}))}}},{key:"beforeUpdate",value:function(){var t=this.pillars,e=this.renderAttrs.pos,a=this.getRenderData().arrLayout,s=a.barData.map((function(a,s){var l=[e[0]+a.offsetPos[0],e[1]+a.offsetPos[1]];return a.pos=l,{from:PolarBar_objectSpread({},t[s]),to:PolarBar_objectSpread({},a)}}));return this.pillars=a.barData,{barData:s}}},{key:"getRenderData",value:function(){var t=this,e=this.renderAttrs,a=this.dataset[e.layoutBy];if(!a||0===a.length)return{barData:[]};var s=a.length>1?a.length:a[0].length;this.legendArr=Array.from({length:a.length},(function(){return 1}));var l=PolarBar_layout_layout.call(this,a,e),p=this.theme.colors,f=this.renderStyles;return l.barData.forEach((function(a,l){var d=t.style("pillar")(a.attrs,t.dataset.rows[l],l);a.fillColor=a.fillColor||p[l%s],a.strokeColor=e.strokeColor||"#FFF",a.pos=e.pos,a.hasOwnProperty("startAngle")&&a.hasOwnProperty("endAngle")?a.lineWidth=1:a.lineWidth=0;var y=deepObjectMerge({bgcolor:a.bgcolor||p[l%s]},f.bar,d);a=deepObjectMerge(a,y)})),{arrLayout:l}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){return{layer:"bar",activeOffset:10}}},{key:"defaultStyles",value:function(){return{}}},{key:"mouseleave",value:function(){var t=this;this.timer=setTimeout((function(){t.dataset.resetState(),t.hoverIndex=-1}),100)}},{key:"mousemove",value:function(t,e){clearTimeout(this.timer);var a=this.renderData(),s=e.attr("_index"),l=Math.floor(s/a.length);l!==this.hoverIndex&&(this.dataset.resetState(),this.dataset["rows"===this.renderAttrs.layoutBy?"cols":"rows"][l].state="hover",this.hoverIndex=l)}},{key:"groupMousemove",value:function(t,e){console.log(e)}},{key:"renderData",value:function(){var t=this.renderAttrs;return this.dataset[t.layoutBy]}},{key:"render",value:function(t){var e=this,a=this.renderAttrs,s=(a.clientRect,a.innerRadiusPx,a.radiusPx,this.theme.colors,this.renderStyles);return qcharts.h(z.Group,{class:"container",ref:"wrap"},qcharts.h(z.Group,{class:"rings-group",onMouseleave:this.mouseleave},t.barData.map((function(t,a){var l=getStyle(e,"sector",[{_index:a},s.sector],[e.dataset.rows[a],a]);return"disabled"===t.state||!1===l?qcharts.h(Node,null):qcharts.h(z.Ring,A()({onMousemove:e.mousemove},l,{animation:{from:t.from,to:t.to}}))}))))}},{key:"renderAttrs",get:function(){var t=q()(E()(PolarBar.prototype),"renderAttrs",this),e=t.clientRect,a=e.height,s=e.width,l=e.top,p=e.left;return t.pos=[p+s/2,l+a/2],t}}]),PolarBar}(Y);function Funnel_layout_layout(t,e){for(var a=t,s=e.align,l=e.pyramid,p=e.clientRect,f=p.width,d=p.height,y=[],g=t[0][0].value,v=f/g,b=function(t){for(var e=0,a=0,s=t.length;a<s;a++)"disabled"!==t[a][0].state&&e++;0===e&&console.warn("data invalid!");return e||1}(a),m=0,_=0,O=a.length;_<O;_++){var A={colse:!0,lineWidth:3,points:[]},w=a[_][0].value,x=0,j=[0,.5];if("center"===s?(j=[.5,.5],x=.5):"right"===s&&(x=1,j=[1,.5]),A.points.push((g-w)*x*v,d*(_-m)/b),A.points.push((g*x+w*(1-x))*v,d*(_-m)/b),_-m+1<b){for(var P=1;"disabled"===a[_+P][0].state;)P++;var S=a[_+P][0].value;A.points.push((g*x+S*(1-x))*v,d*(_-m+1)/b),A.points.push((g-S)*x*v,d*(_-m+1)/b)}else l?A.points.push(x*f,d):(A.points.push((g*x+w*(1-x))*v,d*(_-m+1)/b),A.points.push((g-w)*x*v,d*(_-m+1)/b));A.opacity=1,"disabled"===a[_][0].state&&(A.points[6]=A.points[0],A.points[7]=A.points[1],A.points[4]=A.points[2],A.points[5]=A.points[3],A.opacity=0,m++),A.labelAttrs={opacity:"disabled"===!a[_][0].state?1:0,text:Math.round(100*w/g)+"%",anchor:j,pos:[f*x+10*(.5-x),(_-m+.5)*d/b],fillColor:"#FFF",fontSize:"12px"},y.push(A)}return y}function Funnel_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Funnel_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Funnel_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Funnel_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var pt=function(t){function Funnel(t){var e;return P()(this,Funnel),e=R()(this,E()(Funnel).call(this,t)),nt()(I()(e),"onMousemove",throttle((function(t,a){if(e.groups.length&&!isNaN(t.x)&&!isNaN(t.y)){var s=0,l=a.getOffsetPosition(t.x,t.y),p=x()(l,2),f=p[0],d=p[1];if(e.renderAttrs.transpose){var y=e.groups[0].size[1];s=Math.floor(d/y)}else{var g=e.groups[0].size[0];s=Math.floor(f/g)}if(s<1?s=0:s>e.groups.length-1&&(s=e.groups.length-1),e.hoverIndex!==s){var v=e.renderAttrs.bgpillarState;v[s]="hover",v[e.hoverIndex]="defualt",e.attr("bgpillarState",v),e.dataset.resetState(),e.dataset.cols[s].state="hover",e.hoverIndex=s}}}),16,!0)),nt()(I()(e),"myClick",(function(){console.log("myclick")})),e.type="funnel",e.polygons=null,e.hoverIndex=-1,e}return B()(Funnel,t),k()(Funnel,[{key:"beforeRender",value:function(){var t=this.getRenderData().polygons;return t=t.map((function(t){return{from:{points:8===t.points.length?[t.points[6],t.points[7],t.points[4],t.points[5],t.points[4],t.points[5],t.points[6],t.points[7]]:[t.points[4],t.points[5],t.points[4],t.points[5],t.points[4],t.points[5]]},to:Funnel_objectSpread({pos:[0,0]},t)}})),this.polygons=t,{polygons:t}}},{key:"beforeUpdate",value:function(){var t=this.polygons,e=this.getRenderData().polygons;return e=e.map((function(e,a){return{from:{points:t[a].to.points},to:Funnel_objectSpread({},e)}})),this.polygons=e,{polygons:e}}},{key:"getRenderData",value:function(){var t=this,e=this.renderAttrs,a=Funnel_layout_layout(this.dataset[e.layoutBy],e),s=this.theme.colors,l=this.renderStyles;return{polygons:a=a.map((function(e,a){var p=t.style("polygon")(e.attrs,t.dataset.rows[a],a),f=deepObjectMerge({fillColor:e.bgcolor||s[a]},l.funnel,p);return e=deepObjectMerge(e,f)}))}}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){var t=this.dataset.rows;return{layer:"bar",bgpillarState:Array.from({length:t[0].length},(function(){return"defalut"})),states:{bgpillar:{animation:{duration:20},default:{opacity:.01},hover:{opacity:.1}}}}}},{key:"defaultStyles",value:function(){return{}}},{key:"onMouseleave",value:function(t,e){this.dataset.resetState();var a=this.renderAttrs.bgpillarState;a[this.hoverIndex]="defualt",this.attr("bgpillarState",a),this.hoverIndex=-1}},{key:"render",value:function(t){var e=this.renderAttrs,a=e.clientRect;e.bgpillarState,e.states;return qcharts.h(z.Group,{class:"container",ref:"wrap",pos:[a.left,a.top],size:[a.width,a.height]},qcharts.h(z.Group,{ref:"pillars",class:"pillars-group",bgcolor:"#FF0"},t.polygons.map((function(t,e){return qcharts.h(z.Polyline,A()({},t.from,{animation:{from:t.from,to:t.to}}))}))))}},{key:"renderAttrs",get:function(){return q()(E()(Funnel.prototype),"renderAttrs",this)}}]),Funnel}(Y);function Scatter_layout_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Scatter_layout_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Scatter_layout_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Scatter_layout_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var layout_getDataRange=function(t){return 0===t.length?[0,1]:[Math.min.apply(Math,Q()(t)),Math.max.apply(Math,Q()(t))]},layout_getBigRange=function(t){if(0===t.length)return[0,1];var e=layout_getDataRange(t),a=x()(e,2),s=a[0],l=a[1];return[10*(Math.round(s/10)-1),10*(Math.round(l/10)+1)]},layout_updateSectionVal=function(t,e){var a=e.min,s=e.max;"number"===jsType(a)&&(t[0]=a),"number"===jsType(s)&&(t[1]=s)};function Scatter_layout_layout(t,e,a){var s=x()(e,2),l=s[0],p=s[1],f=t.option,d=f.text,y=f.value,g=Q()(t),v=layout_getDataRange(t.rows.map((function(t){return t.length})))[1],b=[0,v-1],m=[0,v-1],_=g.some((function(t){return"string"===jsType(t.text)}));if(!_){m=layout_getBigRange(g.map((function(t){return t.text})));var O=axis_axis.call(this,{dataSet:data,stack:!1,field:d,section:m});b=layout_getDataRange(O)}if(g.some((function(t){return"string"===jsType(t.value)})))throw new Error("Scatter's value category data should be Number!");var A=layout_getBigRange(g.map((function(t){return t.layoutScaleValue}))),w=axis_axis.call(this,{dataSet:data,stack:!1,field:"layoutScaleValue",section:A}),j=layout_getDataRange(w);a&&(a[d]&&layout_updateSectionVal(m,a[d]),a[y]&&layout_updateSectionVal(A,a[y]));var P={};P[d]={min:m[0],max:m[1]},P[y]={min:A[0],max:A[1]};var S=scaleLinear().domain(b).range([0,l]),k=scaleLinear().domain(j).range([0,p]);return{data:t.rows.map((function(t){var e=t.map((function(e,a){var s=_?a:e.text,l=e.layoutScaleValue;return{pos:[S(s),p-k(l)],radius:5,anchor:[1,1],dataOrigin:Scatter_layout_objectSpread({},e.data),state:e.state,name:t.name,col:e.col,row:e.row}}));return{name:t.name,state:t.state,attrs:e}})),layoutWay:P}}function Scatter_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Scatter_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Scatter_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Scatter_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ft=function(t){function Scatter(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return P()(this,Scatter),(t=R()(this,E()(Scatter).call(this,e))).type="scatter",t.scatterData=[],t.guideLineData=[],t}return B()(Scatter,t),k()(Scatter,[{key:"defaultAttrs",value:function(){return{layer:"scatter",labelField:null,areaField:null,areaRange:null,showGuideLine:!1,layoutWay:null}}},{key:"processData",value:function(){var t=this,e=this.dataset,a=this.renderAttrs,s=a.layoutWay,l=a.clientRect,p=Scatter_layout_layout.call(this,e,[l.width,l.height],s),f=p.data,d=p.layoutWay;return deepObjectMerge(this.renderAttrs.layoutWay||{},d),f.forEach((function(e,a){var s=t.theme.colors[a],l=function(t,e){if(/^rgba\(.+\)$/.test(t))return t;var a;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return 3===(a=t.substring(1).split("")).length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]),"rgba("+[(a="0x"+a.join(""))>>16&255,a>>8&255,255&a].join(",")+","+e+")";throw new Error("Bad Hex")}(s,.3);e.attrs.forEach((function(t){t.strokeColor=s,t.fillColor=l}))})),f}},{key:"beforeUpdate",value:function(){var t=this;q()(E()(Scatter.prototype),"beforeUpdate",this).call(this);var e=this.processData(),a=e.map((function(t){return deepObjectMerge({},t)}));return e.forEach((function(e,a){var s=t.scatterData[a];e.attrs.forEach((function(e,a){var l=t.getRealRadius(Scatter_objectSpread({},e));if(e.radius=l,s&&s.attrs[a]){var p=s.attrs[a],f=Q()(e.pos),d=p.animation.to&&p.animation.to.pos?Q()(p.animation.to.pos):Q()(p.pos);if(f.toString()===d.toString()){var y=l,g=l;"disabled"===e.state&&(g=0),0==p.animation.to.radius&&(y=0),e.animation={from:{radius:y},to:{radius:g}}}else e.animation={from:{pos:d},to:{pos:f}}}else e.animation={from:{radius:0},to:{radius:l}}}))})),this.scatterData=a,e}},{key:"beforeRender",value:function(){var t=this;q()(E()(Scatter.prototype),"beforeRender",this).call(this);var e=this.processData();return this.scatterData=e.map((function(t){return deepObjectMerge({},t)})),e.forEach((function(e){e.attrs.forEach((function(e){var a=t.getRealRadius(Scatter_objectSpread({},e));e.animation={from:{radius:0},to:{radius:a}}}))})),e}},{key:"getRealRadius",value:function(t){var e=this.renderAttrs,a=e.areaRange,s=e.areaField,l=t.radius,p=t.dataOrigin;if(!s||!p.hasOwnProperty(s))return l;if(!a)return p[s];var f=Q()(this.dataset).map((function(t){return t.data[s]})).sort((function(t,e){return t-e}));return scaleLinear().domain([f[0],f[f.length-1]]).range(a)(p[s])}},{key:"onMouseenter",value:function(t,e){var a=e.children[0].attributes,s=a.row,l=a.col,p=a.pos;if(this.dataset.forEach((function(t){t.row===s&&t.col===l&&(t.state="hover")})),this.renderAttrs.showGuideLine){var f=this.renderAttrs.clientRect,d=f.height,y=f.width;this.guideLineData=[[[0,p[1]],[y,p[1]]],[[p[0],0],[p[0],d]]]}}},{key:"onMouseleave",value:function(){this.dataset.resetState(),this.guideLineData=[]}},{key:"renderGuideLine",value:function(){if(this.guideLineData.length>0)return this.guideLineData.map((function(t){return qcharts.h(z.Polyline,{points:t,strokeColor:"#ddd",lineWidth:1,translate:[.5,.5]})}))}},{key:"renderScatter",value:function(t){var e=this,a=this.renderAttrs.labelField;return t.map((function(t,s){return t.attrs.map((function(t,l){var p=e.style("point")(t,Scatter_objectSpread({},t.dataOrigin),l);if(!1!==p){var f=null;if(a){var d=e.style("label")(t,Scatter_objectSpread({},t.dataOrigin),l);if(!1!==d&&t.dataOrigin.hasOwnProperty(a)){var y=t.strokeColor;f=deepObjectMerge(et()(t,["strokeColor"]),{fillColor:y,text:t.dataOrigin[a],anchor:[.5,.5],fontSize:"12px",zIndex:10+s+l},d)}}var g=e.style("point:hover")(t,t.dataOrigin,l)||{},v="hover"===t.state?g:{};return qcharts.h(z.Group,{onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave},qcharts.h(z.Arc,A()({},t,p,v,{zIndex:9+s+l})),f?qcharts.h(z.Label,f):null)}}))})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"render",value:function(t){var e=this.renderAttrs.clientRect,a=e.height,s=e.width,l=e.left,p=e.top;return qcharts.h(z.Group,{size:[s,a],pos:[l,p],zIndex:10},this.renderScatter(t),this.renderGuideLine())}},{key:"rendered",value:function(){}},{key:"renderAttrs",get:function(){return Scatter_objectSpread({},q()(E()(Scatter.prototype),"renderAttrs",this))}}]),Scatter}(Y);var utils_ellipse2path=function(t,e,a,s){if(!isNaN(t-e+a-s))return"M"+(t-a)+" "+e+"a"+a+" "+s+" 0 1 0 "+2*a+" 0a"+a+" "+s+" 0 1 0 "+-2*a+" 0z"};function Wave_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}var dt=function(t){function Wave(t){var e;return P()(this,Wave),(e=R()(this,E()(Wave).call(this,t))).offsetR=50,e.tickId="",e.oldAttr={},e}return B()(Wave,t),k()(Wave,[{key:"rendered",value:function(){this.wave()}},{key:"defaultAttrs",value:function(){return{amplitude:8,wavelength:300,radius:150,percent:65,formatter:function(t){return t+"%"}}}},{key:"wave",value:function(){var t=this,e=0,a=this.$refs.clipWave,s=this.$refs.clipPath||a,l=s.originalContentRect[3],p=this.renderAttrs,f=p.percent,d=p.wavelength,y=p.amplitude,g=p.clientRect,v=p.animation,b=p.shape,m=24/v.duration,_=0-g.left,O=l*(100-f)/100+s.originalContentRect[1];this.tickId=Object(z.requestAnimationFrame)((function(s){t.offsetR+=m;var p=[[_,O+l]];for(p.push([_,O+y*Math.sin(e+t.offsetR)]);_<g.width+g.left+g.right;)p.push([_,O+y*Math.sin(e+t.offsetR)]),_+=d/8,e+=Math.PI/4;var f=y*Math.sin(e+t.offsetR);p.push([_,O+f]),p.push([_,O+f]),p.push([_,O+l]),a.attr({points:p,clipPath:" "+b}),t.offsetR>=2*Math.PI&&(t.offsetR=t.offsetR%(2*Math.PI)),t.wave()}))}},{key:"render",value:function(){var t=this.renderAttrs,e=t.clientRect,a=t.shape,s=t.pos,l=t.formatter,p=t.percent,f=t.radius,d=this.renderStyles,y=getStyle(this,"wave",d.wave),g=getStyle(this,"shape",d.shape),v=getStyle(this,"text",d.text),b={from:{pos:this.oldAttr.pos||s},to:{pos:s}};return this.oldAttr=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Wave_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Wave_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},this.renderAttrs),qcharts.h(z.Group,{zIndex:1,class:"container",pos:[e.left,e.top],size:[e.width,e.height]},qcharts.h(z.Group,{animation:b},qcharts.h(z.Path,{ref:"clipPath1",d:a,fillColor:g.fillColor}),qcharts.h(z.Polyline,A()({ref:"clipWave"},y,{clipPath:a,smooth:!0})),qcharts.h(z.Path,{ref:"clipPath",d:a,strokeColor:g.strokeColor,lineWidth:g.lineWidth}),!1===v?qcharts.h(z.Node,null):qcharts.h(z.Label,A()({text:l(p)},v,{pos:[f,f],anchor:[.5]}))))}},{key:"renderAttrs",get:function(){var t=q()(E()(Wave.prototype),"renderAttrs",this),e=t.clientRect,a=Math.floor(e.width),s=Math.floor(e.height),l=t.radius;return t.pos=[0,0],t.shape||(t.pos=[a/2-l,s/2-l],t.shape=utils_ellipse2path(l,l,t.radius,t.radius)),t}}]),Wave}(Y);function Gauge_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Gauge_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Gauge_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Gauge_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Gauge_tickLine(t,e,a,s,l){var p=e*Math.PI/180,f=Math.cos(p),d=Math.sin(p),y=f*t,g=d*t,v=l?[y-a*f,g-a*d]:[y+a*f,g+a*d],b=x()(v,2),m=b[0],_=b[1],O=l?[y-(a+s)*f,g-(a+s)*d]:[y+(a+s)*f,g+(a+s)*d],A=l?f:-f,w=l?d:-d,j=[.5,.5];return Math.abs(A)>Math.abs(w)?j[0]=A<0?0:A:j[1]=w>0?w:0,{points:[[y,g],[m,_]],labelPos:O,anchor:j}}var yt=function(t){function Gauge(t){var e;return P()(this,Gauge),(e=R()(this,E()(Gauge).call(this,t))).gaugeAnimations=[],e.type="Gauge",e.oldPos=null,e.style("tickText",!0),e.style("tickLine",!0),e}return B()(Gauge,t),k()(Gauge,[{key:"defaultAttrs",value:function(){return{layer:"gauge",min:0,max:100,percent:50,lineCap:"round",_useBuiltInColors:!1,lineWidth:10,startAngle:140,endAngle:400,strokeBgcolor:"#dde3ea",title:function(t){return t},tickStep:10,tickLength:10,labelOffset:5,tickFormatter:function(t){return t}}}},{key:"transform",value:function(){var t=this.renderAttrs,e=t.radius,a=t.startAngle,s=t.endAngle,l=t.min,p=t.max,f=t.percent;return{dataOrigin:f,startAngle:a,radius:e,endAngle:(s-a)*(f-l)/Math.abs(p-l)+a,strokeColor:this.color(0)}}},{key:"beforeRender",value:function(){q()(E()(Gauge.prototype),"beforeRender",this).call(this);var t=this.transform();return this.gaugeAnimations={from:{startAngle:t.startAngle,endAngle:t.startAngle},to:{startAngle:t.startAngle,endAngle:t.endAngle}},t}},{key:"beforeUpdate",value:function(){q()(E()(Gauge.prototype),"beforeUpdate",this).call(this);var t=this.transform(),e={from:{startAngle:t.startAngle,endAngle:t.startAngle},to:{startAngle:t.startAngle,endAngle:t.endAngle}};return this.gaugeAnimations&&(e.from=Gauge_objectSpread({},this.gaugeAnimations.to)),this.gaugeAnimations=Gauge_objectSpread({},e),t}},{key:"color",value:function(t){return this.theme.colors[t]}},{key:"renderPointer",value:function(t,e){var a=this.style("pointer")(t,t.dataOrigin,0);if(!1!==a){var s=this.gaugeAnimations,l=s.from,p=s.to,f=l.endAngle+90,d={from:{rotate:f},to:{rotate:p.endAngle+90}},y=this.renderAttrs,g=y.radius,v=(y.pointerWidth,y.center),b=y.tickLength,m=y.labelOffset,_=b+y.lineWidth+m+e;b<0&&(_=_-b-m);var O=g-_,w=g/10,j=this.color(0),P=x()(v,2),S=P[0],k=P[1],M={fillColor:j,rotate:f,transformOrigin:v,zIndex:11,points:[[S,k],[S-w/2,k-.1*O],[S,k-O],[S+w/2,k-.1*O],[S,k]],close:!0};return qcharts.h(z.Polyline,A()({},M,a,{animation:d}))}}},{key:"isStyleExist",value:function(t){var e=this.style("".concat(t));return Boolean(e)}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.renderAttrs,s=a._useBuiltInColors,l=a.title,p=a.percent,f=a.center,d=a.radius,y=a.startAngle,g=a.endAngle,v=a.lineWidth,b=a.lineCap,m=a.strokeBgcolor,_=a.clientRect,O=[f[0],1.25*f[1]],w=this.ticks,x=this.isStyleExist("tickLine"),j=this.isStyleExist("tickText"),P=l||p,S=null;if(!1!==s){var k=this.theme.colors.reverse(),M={vector:[0,0,2*f[0],2*f[1]],colors:[{color:k[0],offset:0},{color:k[1],offset:.3},{color:k[2],offset:1}]};S=new z.Gradient(M)}var R=16;!1!==j&&w.map((function(a,s){var l=t.style("tickText")(e,e.dataOrigin,s);if(l&&l.fontSize&&("number"===jsType(l.fontSize)&&R<l.fontSize&&(R=l.fontSize),"string"===jsType(l.fontSize))){var p=Number(l.fontSize.replace("px",""));"number"===jsType(p)&&R<p&&(R=p)}}));var D=[_.left,_.top],E=[_.width,_.height],C={from:{pos:this.oldPos?this.oldPos:D},to:{pos:D}};return this.oldPos=D,qcharts.h(z.Group,{pos:D,size:E,animation:C},qcharts.h(z.Arc,{pos:f,lineWidth:v,lineCap:b,startAngle:y,endAngle:g,strokeColor:m,radius:d,zIndex:10}),qcharts.h(z.Arc,A()({pos:f,lineCap:b,lineWidth:v},e,{animation:this.gaugeAnimations},S?{strokeColor:S}:{strokeColor:this.color(0)},this.style("arc")(e,e.dataOrigin,0),{zIndex:11})),this.renderPointer(e,R),P?qcharts.h(z.Label,A()({text:"function"===jsType(P)?P(e.dataOrigin):P,pos:O,textAlign:"center",zIndex:10,anchor:[.5,1]},this.style("title")(e,e.dataOrigin,0))):null,!1!==x||!1!==j?w.map((function(a,s){return qcharts.h(z.Group,{pos:f,anchor:[0,0],zIndex:1010},!1!==x?qcharts.h(z.Polyline,A()({points:a.points,strokeColor:m},t.style("tickLine")(e,e.dataOrigin,s))):null,!1!==j?qcharts.h(z.Label,A()({},a.label,t.style("tickText")(e,e.dataOrigin,s))):null)})):null)}},{key:"rendered",value:function(){var t=this;this.on("resize",(function(){return t.forceUpdate()}))}},{key:"renderAttrs",get:function(){var t=q()(E()(Gauge.prototype),"renderAttrs",this),e=t.clientRect,a=e.height,s=e.width,l=[s,a],p=~~Math.min.apply(l,l.map((function(t){return t/2})));return Gauge_objectSpread({},t,{radius:p,pointerWidth:p/10,center:[s/2,a/2]})}},{key:"ticks",get:function(){for(var t=this.renderAttrs,e=t.min,a=t.max,s=t.radius,l=t.startAngle,p=t.endAngle,f=t.lineWidth,d=t.tickStep,y=t.tickLength,g=t.labelOffset,v=t.tickFormatter,b=Math.abs(a-e)/d,m=y>0,_=(p-l)/b,O=[],A=m?s-f/2:s+f/2,w=-1;++w<=b;){var x=Gauge_tickLine(A,w*_+l,Math.abs(y),Math.abs(g),m);O.push({points:x.points,label:{text:v(w*d+e).toFixed(0),pos:x.labelPos,anchor:x.anchor}})}return(O[0].angle+O[O.length-1].angle)%(2*Math.PI)==0&&O.pop(),O}}]),Gauge}(Y);function RadialBar_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function RadialBar_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?RadialBar_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):RadialBar_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var RadialBar_flattern=function(t){return[].concat.apply([],t)},gt=function(t){function RadialBar(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return P()(this,RadialBar),(t=R()(this,E()(RadialBar).call(this,e))).type="RadialBar",t.animators=[],t.oldPos=null,t}return B()(RadialBar,t),k()(RadialBar,[{key:"defaultAttrs",value:function(){return{layer:"radialBar",radius:.8,innerRadius:0,startAngle:-90,endAngle:270,lineWidth:5,strokeBgcolor:"#f5f5f5"}}},{key:"transform",value:function(t){var e=this,a=this.renderAttrs,s=a.startAngle,l=a.endAngle,p=a.max,f=a.min,d=a.lineWidth,y=a.colors,g=0;if(isNaN(p)||isNaN(f)){var v=deepObjectMerge(t);v.sort((function(t,e){return e.value-t.value})),g=1.3*v[0].value}else g=p-f;var b=l-s,m=this.innerRadius,_=this.maxOuterRadius,O=t.length,A=(2*(_-m)-d*(d>=5?1:O-1))/(1.5*(2*O-1)),w=null;return t.forEach((function(t,a){w=+t.value,t.pos=[_,_],t.anchor=[.5,.5],t.lineWidth=d,t.startAngle=s,t.endAngle="disabled"===t.state?s:s+b*w/g,t.innerRadius=m+1.5*a*A,t.radius=t.innerRadius+1*A,t.strokeColor=y[a];var l=e.style("arc")(t,t.dataOrigin,t.index);Object.assign(t,l)})),t.sort((function(t,e){return e.radius-t.radius}))}},{key:"beforeRender",value:function(){q()(E()(RadialBar.prototype),"beforeRender",this).call(this);var t=this.renderAttrs.startAngle,e=RadialBar_flattern(this.dataset);return e=this.transform(e),this.animators=e.map((function(e){return{from:{startAngle:t,endAngle:t},to:{startAngle:t,endAngle:e.endAngle}}})),e}},{key:"beforeUpdate",value:function(){var t=this;q()(E()(RadialBar.prototype),"beforeUpdate",this).call(this);var e=this.renderAttrs.startAngle,a=RadialBar_flattern(this.dataset);return a=this.transform(a),this.animators=a.map((function(s,l){if(s.anticlockwise)return s.disabled?{from:{opacity:1},to:{opacity:0}}:{from:{opacity:1},to:{opacity:1}};var p=t.animators[l]?t.animators[l].to:a[l-1];return p||(p={startAngle:e,endAngle:e}),{from:{startAngle:p.startAngle,endAngle:p.endAngle},to:{startAngle:s.startAngle,endAngle:s.endAngle}}})),a}},{key:"onMouseenter",value:function(t,e){var a=e.children[1].attributes,s=a.col,l=a.row;this.dataset.forEach((function(t){t.state=t.col===s&&t.row===l?"hover":"default"}))}},{key:"onMouseleave",value:function(){this.dataset.resetState()}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this.renderAttrs.strokeBgcolor,s={from:{pos:this.oldPos?this.oldPos:this.center},to:{pos:this.center}};return this.oldPos=this.center,qcharts.h(z.Group,null,e.map((function(e,l){var p=e.col,f=e.row,d=e.data;return qcharts.h(z.Group,{pos:t.center,animation:s,onMouseenter:t.onMouseenter,onMousemove:t.onMouseenter,onMouseleave:t.onMouseleave},qcharts.h(z.Arc,A()({},e,{startAngle:0,endAngle:360,strokeColor:a})),qcharts.h(z.Arc,A()({pos:t.center},RadialBar_objectSpread({},e,{col:p,row:f}),{animation:t.animators[l]},t.style("arc")(e,d,l))))})))}},{key:"rendered",value:function(){}},{key:"renderAttrs",get:function(){var t=q()(E()(RadialBar.prototype),"renderAttrs",this),e=t.clientRect;return RadialBar_objectSpread({},t,{size:[e.width,e.height]})}},{key:"maxOuterRadius",get:function(){var t=this.renderAttrs,e=t.startAngle,a=t.endAngle,s=t.radius,l=t.size,p=x()(l,2),f=p[0],d=p[1];return a-e==90?Math.min(f,d)*s:Math.min(f,d)/2*s}},{key:"center",get:function(){var t=this.renderAttrs,e=t.startAngle,a=t.endAngle,s=t.radius,l=t.size,p=(a+e)/2,f=x()(l,2),d=f[0],y=f[1],g=this.maxOuterRadius,v=d/2-g,b=y/2-g;if(a-e==90){var m=s*d,_=s*y;v+=Math.cos(p)<0?m/2:-m/2,b+=Math.sin(p)<0?_/2:-_/2}return[v,b]}},{key:"innerRadius",get:function(){var t=this.renderAttrs,e=t.radius,a=t.innerRadius;return a<=0?0:this.maxOuterRadius/e*a}}]),RadialBar}(Y),vt=function(t){function BasePlugin(t){var e;return P()(this,BasePlugin),(e=R()(this,E()(BasePlugin).call(this,t))).theme=X.plugins[e.constructor.name],e.theme.set=function(t){e.theme===X.visuals[e.constructor.name]&&(e.theme=v()(e.theme)),e.theme=deepObjectMerge(e.theme,t)},e}return B()(BasePlugin,t),BasePlugin}(U),bt=a(28),mt=a.n(bt);function Axis_layout_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function Axis_layout_objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Axis_layout_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Axis_layout_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Axis_layout_layout(t,e){var a={scales:[],labels:[],grids:[],axisPoints:[],orient:e.orient},s={top:{label:{anchor:[.5,1],padding:[0,0,6,0],textAlign:"center"},scale:{anchor:[.5,1],width:1,height:4},grid:{strokeColor:"#666"},name:{},type:"category"},bottom:{scale:{anchor:[.5,0],width:1,height:4},label:{anchor:[.5,0],padding:[6,0,0,0],textAlign:"center"},grid:{strokeColor:"#666"},name:{},type:"category"},left:{label:{padding:[0,8,0,0],anchor:[1,.5],textAlign:"right"},scale:{anchor:[1,.5],width:4,height:1},grid:{strokeColor:"#666"},name:{},type:"value"},right:{label:{anchor:[0,.5],padding:[0,0,0,8]},scale:{anchor:[0,.5],width:4,height:1},grid:{strokeColor:"#666"},name:{},type:"value"}},l=e.stack,p=e.splitNumber,f=e.clientRect,d=e.orient,y=e.axisGap;e.transpose&&["top","bottom","right","left"].forEach((function(t){s[t].type="value"===s[t].type?"category":"value"}));var g=f.width,v=f.height,b=axis_axis.call(this,{dataSet:t,stack:l,splitNumber:p}),m=Math.max.apply(this,b),_=Math.min.apply(this,b),O=e.type||s[d].type,A="left"===d||"right"===d?v:g,w=this.dataset.datasetReverse;if("value"===O){var x=scaleLinear().domain([_,m]).range([0,A]);b.forEach((function(t){var e=getItemAttrs(s,d,{text:""+mt()(w)=="function"?w(t):t},t,x,f),l=e.scaleAttr,p=e.labelAttr,y=e.gridAttr;a.scales.push(l),a.labels.push(p),a.grids.push(y)}))}else if("category"===O){var j=t[0],P=y?j.length:j.length-1,S=scaleLinear().domain([0,P]).range([0,A]);if(j.forEach((function(t,e){var l=getItemAttrs(s,d,t,e,S,f,y),p=l.scaleAttr,g=l.labelAttr,v=l.gridAttr;a.scales.push(p),a.labels.push(g),a.grids.push(v)})),y){var k=getItemAttrs(s,d,{},j.length,S,f,y),M=k.scaleAttr,R=k.gridAttr;a.scales.push(M),a.grids.push(R)}}if("left"===d||"right"===d){var D="left"===d?0:g;a.axisPoints=[[D,v],[D,0]],a.nameAttr={pos:[D,0],anchor:[.5,1],padding:[10]}}else if("bottom"===d||"top"===d){var E="bottom"===d?v:0;a.axisPoints=[[0,E],[g,E]],a.nameAttr={pos:[g,E],anchor:[0,1]}}return a}function getItemAttrs(t,e,a,s,l,p,f){var d=emptyObject(),y=p.width,g=p.height,v=p.left,b=(p.top,f?s+.5:s);if("left"===e||"right"===e){var m="left"===e?0:y,_=l(s);d.scaleAttr=Axis_layout_objectSpread({},t[e].scale,{pos:[m,g-_]}),d.gridAttr=Axis_layout_objectSpread({},t[e].grid,{points:[[m,g-_],[y,g-_]]}),d.labelAttr=Axis_layout_objectSpread({},t[e].label,{width:v,text:""+a.text,pos:[m,g-l(b)]})}else if("top"===e||"bottom"===e){var O="top"===e?0:g,A=l(s);d.scaleAttr=Axis_layout_objectSpread({},t[e].scale,{pos:[A,O]}),d.gridAttr=Axis_layout_objectSpread({},t[e].grid,{points:[[A,0],[A,O]]}),d.labelAttr=Axis_layout_objectSpread({},t[e].label,{width:v,text:""+a.text,pos:[l(b),O]})}return d}var _t=function(t){function Axis(t){var e;return P()(this,Axis),(e=R()(this,E()(Axis).call(this,t))).renderAxis=emptyObject(),e}return B()(Axis,t),k()(Axis,[{key:"beforeRender",value:function(){return this.getRenderData().axis}},{key:"beforeUpdate",value:function(){return this.getRenderData().axis}},{key:"rendered",value:function(){}},{key:"defaultAttrs",value:function(){return{layer:"axis",zIndex:-1,formatter:function(t){return t}}}},{key:"getRenderData",value:function(){var t=this.renderAttrs,e=this.dataset[t.layoutBy];return{axis:Axis_layout_layout.call(this,e,t)}}},{key:"render",value:function(t){var e=this,a=this.renderAxis||emptyObject();this.renderAxis=t;var s=this.renderAttrs,l=s.clientRect,p=s.formatter,f=s.orient,d=s.name,y=this.renderStyles,g=getStyle(this,"axis",y.axis),b=this.chart.plugins.map((function(t){if("Axis"===t.constructor.name)return t.renderAttrs.orient})).filter(Boolean),m=getStyle(this,"name",[y.name||{},v()(t.nameAttr,[],["pos"])]),_={from:{pos:a.nameAttr&&a.nameAttr.pos||t.nameAttr.pos},to:{pos:t.nameAttr.pos}};return qcharts.h(z.Group,{ref:"wrap",pos:[l.left,l.top]},qcharts.h(z.Polyline,A()({},g,{animation:{from:{points:a.axisPoints},to:{points:t.axisPoints}}})),qcharts.h(z.Group,null,t.grids.map((function(s,l){var p={from:{points:a.grids&&a.grids[l]&&a.grids[l].points||s.points},to:{points:s.points}},d=getStyle(e,"grid",y.grid,[l]);if("left"===f||"right"===f){if(0===l&&b.includes("bottom")||l===t.grids.length-1&&b.includes("top"))return qcharts.h(z.Node,null)}else if(("top"===f||"bottom"===f)&&(0===l&&b.includes("left")||l===t.grids.length-1&&b.includes("right")))return qcharts.h(z.Node,null);return!1===d?qcharts.h(z.Node,null):qcharts.h(z.Polyline,A()({},d,{points:p.from.points,animation:p}))})),t.scales.map((function(t,s){var l={from:{pos:a.scales&&a.scales[s]&&a.scales[s].pos||t.pos},to:{pos:t.pos}},p=getStyle(e,"scale",y.scale,[t,s]);return!1===p?qcharts.h(z.Node,null):qcharts.h(z.Group,A()({},v()(t,[],["pos"]),p,{animation:l}))})),t.labels.map((function(t,s){var l=a.labels&&a.labels[s]&&a.labels[s].pos||t.pos,f=getStyle(e,"label",y.label,[t,s]),d={from:{pos:l},to:{pos:t.pos}};return!1===f?qcharts.h(z.Node,null):qcharts.h(z.Label,A()({},v()(t,[],["pos","text"]),f,{text:p(t.text),animation:d}))}))),!1===m||void 0===d||0===d.length?qcharts.h(z.Node,null):qcharts.h(z.Label,A()({},m,{text:d,animation:_})))}},{key:"renderAttrs",get:function(){var t=q()(E()(Axis.prototype),"renderAttrs",this),e=this.chart.visuals[0];return void 0===t.axisGap&&e&&"Bar"===e.constructor.name&&(t.axisGap=!0),e&&"Scatter"===e.constructor.name&&(t.type="value"),void 0===t.transpose&&e&&(t.transpose=e.renderAttrs.transpose),t}}]),Axis}(vt);function Legend_ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}var Ot=function(t){function Legend(t){var e;return P()(this,Legend),(e=R()(this,E()(Legend).call(this,t))).arrLayout=null,e.state={page:1,totalPage:1,perPageWidthOrHeight:0,paginationSize:[0,0],groupSize:[0,0]},e.twiceRender=!1,e.animationSwitch=!1,e.posFrom=[0,0],e.currentPos=[0,0],e.legendStateArray=[],e}return B()(Legend,t),k()(Legend,[{key:"defaultAttrs",value:function(){return nt()({orient:"horizontal",align:["center","bottom"],formatter:function(t){return t.value||t},iconSize:[12,12],textSize:[40,12],outGap:10,innerGap:4},"formatter",(function(t){return t.text||t}))}},{key:"beforeRender",value:function(){return this.twiceRender?this.reset():this.arrLayout=this.getRenderData().arrLayout,this.arrLayout}},{key:"getRenderData",value:function(){var t=this,e=this.renderAttrs,a=e.layoutBy,s=e.innerGap,l=this.dataset[a].map((function(e,a){return t.legendStateArray.push(e.state),{name:e.name,state:e.state}})).map((function(t){return{textAttrs:{text:t.name,paddingLeft:s}}}));return this.arrLayout=l,{arrLayout:l}}},{key:"itemClick",value:function(t,e){var a=e.attr("_index"),s=this.dataset[this.renderAttrs.layoutBy][a].state;s="disabled"!==s?"disabled":"default",this.dataset[this.renderAttrs.layoutBy][a].state=s}},{key:"itemLeave",value:function(t,e){var a=e.attr("_index");this.legendStateArray[a]="default",this.update()}},{key:"itemMove",value:function(t,e){var a=e.attr("_index");"default"===this.legendStateArray[a]&&(this.legendStateArray[a]="hover",this.update())}},{key:"beforeUpdate",value:function(t){return t&&"source"===t.type?(this.animationSwitch=!0,this.twiceRender=!1,this.beforeRender()):(t&&"resize"===t.type&&(this.animationSwitch=!0),this.arrLayout)}},{key:"rendered",value:function(){}},{key:"afterrender",value:function(t,e){this.twiceRender?this.animationSwitch=!1:(this.twiceRender=!0,this.reset(),this.update())}},{key:"reset",value:function(){var t=this,e=[0,0],a=this.renderAttrs,s=a.outGap,l=(a.innerGap,a.iconSize),p=(a.textSize,0),f=this.theme.colors;this.arrLayout=this.arrLayout.map((function(a,d){a.iconAttrs={};t.$refs["icon"+d].getBoundingClientRect();var y=t.$refs["text"+d].getBoundingClientRect(),g={bgcolor:f[d],size:l,pos:t.isVertical?[0,e[1]+(y.height-l[1])/2]:[e[0],(y.height-l[1])/2]};"disabled"===t.dataset[t.renderAttrs.layoutBy][d].state&&(g.bgcolor="#ccc",g.fillColor="#ccc");var v=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Legend_ownKeys(Object(a),!0).forEach((function(e){nt()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Legend_ownKeys(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},a.textAttrs,{pos:t.isVertical?[l[0],e[1]]:[l[0]+e[0],0],text:a.textAttrs.text}),b=[l[0]+y.width,l[1]];return b[0]+s>p&&(p=b[0]+s),e=t.isVertical?[p,e[1]+y.height+s]:[e[0]+b[0]+s,y.height],{iconAttrs:g,textAttrs:v}})),this.state.groupSize=e}},{key:"changePage",value:function(t,e){"prev"===e.name&&this.state.page>1?(this.state.page--,this.animationSwitch=!0,this.update()):"next"===e.name&&this.state.page<this.state.totalPage&&(this.state.page++,this.animationSwitch=!0,this.update())}},{key:"render",value:function(t){var e=this;this.posFrom=this.currentPos;var a=this.pos,s=a.pos,l=a.pagePos;this.posFrom=this.twiceRender&&this.animationSwitch?this.posFrom:s;var p=this.state,f=p.page,d=p.totalPage;this.currentPos=s;var y=this.renderStyles,g=this.isVertical;this.twiceRender&&(s[0]=s[0]-1);var v=this.renderAttrs.formatter;if(t)return qcharts.h(z.Group,{size:[1,1],onAfterrender:this.afterrender},qcharts.h(z.Group,{animation:{from:{pos:this.posFrom},to:{pos:s},duration:this.twiceRender&&this.animationSwitch?this.renderAttrs.animation.duration:0}},t.map((function(t,a){var s=e.dataset[e.renderAttrs.layoutBy][a],l="hover"===e.legendStateArray[a],p="disabled"===s.state,f=getStyle(e,"point",[{},y.point],[s,a]),d=l?getStyle(e,"point:hover",[{}],[s,a]):{};p&&t.iconAttrs.bgcolor&&(d.bgcolor="#ccc",d.fillColor="#ccc");var g=getStyle(e,"text",[{},y.text],[s,a]),b=l?getStyle(e,"text:hover",[{}],[s,a]):{};return t.textAttrs.text=v(s.name,s.data,a),qcharts.h(z.Group,A()({onClick:e.itemClick,onMouseleave:e.itemLeave,onMouseenter:e.itemMove,onMousemove:e.itemMove},{_index:a}),qcharts.h(ot,A()({ref:"icon"+a},t.iconAttrs,f,d)),qcharts.h(z.Label,A()({ref:"text"+a},t.textAttrs,g,b)))}))),d<=1?null:qcharts.h(z.Group,{pos:l.pos},qcharts.h(z.Path,A()({pos:l.pagePrev},g?{marginLeft:5}:{},{name:"prev",padding:[g?2:1,0,0,0],d:g?"M 0 15 L 15 15 L7.5 0 Z":"M 0 7.5 L 13 0 L13 15 Z",fillColor:f<=1?"#ccc":"#324556",onClick:this.changePage})),qcharts.h(z.Label,{pos:l.pageText,ref:"paginationText",fontSize:"14px",text:f+"/"+d,lineBreak:"normal",padding:[0,2]}),qcharts.h(z.Path,A()({pos:l.pageNext},g?{marginLeft:5}:{},{name:"next",padding:[g?2:1,0,0,0],d:g?"M 0 0 L 15 0 L7.5 13 Z":"M 13 7.5 L 0 0 L0 15 Z",fillColor:f>=d?"#ccc":"#324556",onClick:this.changePage}))))}},{key:"renderAttrs",get:function(){return q()(E()(Legend.prototype),"renderAttrs",this)}},{key:"pos",get:function(){var t=this.renderAttrs,e=t.clientRect,a=t.align,s=this.state.groupSize,l=e.width,p=e.height,f=e.top,d=e.left,y=e.right,g=e.bottom,v=l+d+y,b=p+f+g;this.state.paginationSize=this.isVertical?[30,60]:[70,25];var m,_,O,A,isValidLayout=function(t,e){return"horizontal"===e?["default","left","center","right"].indexOf(t)>-1:["default","top","center","bottom"].indexOf(t)>-1},w={default:0,left:2,center:(v-s[0])/2,right:v-s[0]-2,numberOrPercent:function(t){if("number"==typeof t)return t;var e=0;try{e=parseFloat(t)/100}catch(t){}return(v-s[0])*e}},x={default:0,top:2,center:b/2-s[1]/2,bottom:b-s[1]-2,numberOrPercent:function(t){if("number"==typeof t)return t;var e=0;try{e=parseFloat(t)/100}catch(t){}return(b-s[1])*e}},j=[isValidLayout(a[0],"horizontal")?w[a[0]]:w.numberOrPercent(a[0]),isValidLayout(a[1],"vertical")?x[a[1]]:x.numberOrPercent(a[1])],P=Math.ceil(this.state.groupSize[0]/v),S=Math.ceil(this.state.groupSize[1]/b),k=this.state.paginationSize;if(P>1){this.state.totalPage=P;var M=j[1]+s[1]+k[1]>b?j[1]-k[1]:j[1]+s[1];m=[v-k[0],M],_=[0,0],O=[15,0],A=[45,0],j[0]=-(this.state.page-1)*v}else if(S>1){this.state.totalPage=S,m=[j[0]+s[0]+k[0]>v?j[0]-k[0]:j[0]+s[0],b-k[1]],_=[5,0],O=[0,20],A=[5,40],j[1]=-(this.state.page-1)*b}else this.state.page=1,this.state.totalPage=1;return{pos:j,pagePos:{pos:m,pagePrev:_,pageText:O,pageNext:A}}}},{key:"isVertical",get:function(){return"vertical"===this.renderAttrs.orient}}]),Legend}(vt),At=function(t){function Tooltip(t){var e;return P()(this,Tooltip),e=R()(this,E()(Tooltip).call(this,t)),nt()(I()(e),"tipMousemove",throttle((function(t){var a=window.innerWidth-e.$el.getBoundingClientRect().width-5,s=window.innerHeight-e.$el.getBoundingClientRect().height-5,l=t.y>s?s:t.y,p=t.x>a?a:t.x;e.$el.style.left=p+"px",e.$el.style.top=l+"px"}),100,1)),e.$el=null,e}return B()(Tooltip,t),k()(Tooltip,[{key:"beforeRender",value:function(){}},{key:"beforeUpdate",value:function(){}},{key:"rendered",value:function(){var t=this,e=this.renderAttrs,a=e.colors,s=e.sort,l=e.formatter;this.chart.dataset.on("change",(function(e){var p=e.option;if(t.$el.innerHTML="","hover"===p.value){var f=[].concat(t.chart.dataset).filter((function(t){return"hover"===t.state}));if(s&&f.sort(s),f.length){var d="",y=document.createElement("div");y.style.cssText="white-space:nowrap;padding:6px 10px;background-color:rgba(0,0,0,0.5);color:#fff;",f.forEach((function(t,e){var s="".concat(t.text,"：").concat(t.value);l&&(s=l(t.data)||s);var p='<div class="tooltip-item"><span class="icon" style="margin-right:6px;display:inline-block;width:10px;height:10px;background-color:'.concat(a[e],'"></span><span class="text">').concat(s,"</span></div>");d+=p})),y.innerHTML=d,t.$el.appendChild(y)}}else"reset"===p.name&&(t.$el.innerHTML="")})),document.body.addEventListener("mousemove",this.tipMousemove)}},{key:"render",value:function(){this.$el||(this.$el=document.createElement("div"),this.$el.className="qcharts-tooltip",this.$el.style.cssText="transition:top 300ms ease-out,left 300ms ease-out;position:absolute;pointEvents:none;pointer-events:none;font-size:14px;"),document.body.appendChild(this.$el)}},{key:"renderAttrs",get:function(){return q()(E()(Tooltip.prototype),"renderAttrs",this)}}]),Tooltip}(vt),wt=window,xt=function(t){function Chart(t){var e;P()(this,Chart),e=R()(this,E()(Chart).call(this));var a=t.container;return"string"===jsType(a)&&(a=document.querySelector(a)),e.$el=a,e.visuals=[],e.plugins=[],e.children=[],e.scene=new z.Scene({container:a,displayRatio:wt.devicePixelRatio}),e.scene.addEventListener("resize",(function(t){e.checkUpdate({type:"resize"})})),e.checkUpdate=throttle((function(t){e.children.forEach((function(e){e.update(t)}))}),300),e.checkRender=throttle((function(t){e.children.forEach((function(t){t.created(),e.dataset.addDep(t)})),e.__store.__isCreated__=!0,e.dispatchEvent("updated",emptyObject())})),e}return B()(Chart,t),k()(Chart,[{key:"update",value:function(t){this.checkUpdate(t)}},{key:"append",value:function(t){var e=this;if([dt,yt].some((function(e){return t instanceof e})))this.source([],{});else if(!this.dataset)return void console.error("Chart should set data before append some graphs");"array"!==jsType(t)?(t instanceof Y?this.visuals.push(t):t instanceof vt&&this.plugins.push(t),this.children.push(t),t.chart=this,t.scene=this.scene,this.checkRender()):t.forEach((function(t){e.append(t)}))}},{key:"getDataURL",value:function(){return this.scene.snapshot().toDataURL()}}]),Chart}(U),jt={version:"1.0.0",Line:it,Pie:st,Area:lt,Radar:ut,Bar:ct,PolarBar:ht,Funnel:pt,Scatter:ft,Gauge:yt,RadialBar:gt,Legend:Ot,Axis:_t,Wave:dt,Tooltip:At,h:h,theme:X,Chart:xt,easing:l};e.default=jt}})}));
//# sourceMappingURL=qcharts.js.map